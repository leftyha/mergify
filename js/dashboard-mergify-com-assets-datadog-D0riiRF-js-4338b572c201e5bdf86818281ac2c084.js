import{_ as Ns}from"./@tanstack-D9TvfXfY.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"1a852bb1435e099912e47361ac6ea11c1a9da234"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="8d9bb9a6-97e9-4738-9164-443cde34685e",t._sentryDebugIdIdentifier="sentry-dbid-8d9bb9a6-97e9-4738-9164-443cde34685e")})()}catch{}const _n={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},Et=console,ie={};Object.keys(_n).forEach(t=>{ie[t]=Et[t]});const Te="Datadog Browser SDK:",E={debug:ie.debug.bind(Et,Te),log:ie.log.bind(Et,Te),info:ie.info.bind(Et,Te),warn:ie.warn.bind(Et,Te),error:ie.error.bind(Et,Te)},gn="https://docs.datadoghq.com",Xo=`${gn}/real_user_monitoring/browser/troubleshooting`,cr="More details:";function Ls(t,e){return(...n)=>{try{return t(...n)}catch(r){E.error(e,r)}}}function Kt(t){return t!==0&&Math.random()*100<=t}function Oe(t,e){return+t.toFixed(e)}function Jo(t){return Fe(t)&&t>=0&&t<=100}function Fe(t){return typeof t=="number"}const G=1e3,Z=60*G,Ms=60*Z,Zo=24*Ms,Ds=365*Zo;function ze(t){return{relative:t,timeStamp:ta(t)}}function Qo(t){return{relative:lr(t),timeStamp:t}}function ta(t){const e=J()-performance.now();return e>Be()?Math.round(me(e,t)):ea(t)}function Ps(){return Math.round(J()-me(Be(),performance.now()))}function w(t){return Fe(t)?Oe(t*1e6,0):t}function J(){return new Date().getTime()}function x(){return J()}function it(){return performance.now()}function U(){return{relative:it(),timeStamp:x()}}function ur(){return{relative:0,timeStamp:Be()}}function D(t,e){return e-t}function me(t,e){return t+e}function lr(t){return t-Be()}function ea(t){return Math.round(me(Be(),t))}function na(t){return t<Ds}let xn;function Be(){var t,e;return xn===void 0&&(xn=(e=(t=performance.timing)===null||t===void 0?void 0:t.navigationStart)!==null&&e!==void 0?e:performance.timeOrigin),xn}const de=1024,Us=1024*de,ra=/[^\u0000-\u007F]/;function Vs(t){return ra.test(t)?window.TextEncoder!==void 0?new TextEncoder().encode(t).length:new Blob([t]).size:t.length}function sa(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Le(t){return{...t}}function un(t,e){return Object.keys(t).some(n=>t[n]===e)}function Yt(t){return Object.keys(t).length===0}function Fs(t,e){const n={};for(const r of Object.keys(t))n[r]=e(t[r]);return n}function at(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let t=_dd_temp_;return delete Object.prototype._dd_temp_,typeof t!="object"&&(typeof self=="object"?t=self:typeof window=="object"?t=window:t={}),t}const yt=at(),ln="WorkerGlobalScope"in yt;function xt(t,e){const n=at();let r;return n.Zone&&typeof n.Zone.__symbol__=="function"&&(r=t[n.Zone.__symbol__(e)]),r||(r=t[e]),r}let Zn,zs=!1;function ia(t){Zn=t}function oa(t){zs=t}function S(t){return function(){return Ot(t,this,arguments)}}function Ot(t,e,n){try{return t.apply(e,n)}catch(r){dt(r)}}function dt(t){if(Qn(t),Zn)try{Zn(t)}catch(e){Qn(e)}}function Qn(...t){zs&&E.error("[MONITOR]",...t)}function $(t,e){return xt(at(),"setTimeout")(S(t),e)}function tt(t){xt(at(),"clearTimeout")(t)}function he(t,e){return xt(at(),"setInterval")(S(t),e)}function bn(t){xt(at(),"clearInterval")(t)}function Ur(t){var e;const n=(e=yt.queueMicrotask)===null||e===void 0?void 0:e.bind(yt);typeof n=="function"?n(S(t)):Promise.resolve().then(S(t))}class O{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.addObserver(e),{unsubscribe:()=>this.removeObserver(e)}}notify(e){this.observers.forEach(n=>n(e))}addObserver(e){this.observers.push(e),this.observers.length===1&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0)}removeObserver(e){this.observers=this.observers.filter(n=>e!==n),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}function Bs(...t){return new O(e=>{const n=t.map(r=>r.subscribe(s=>e.notify(s)));return()=>n.forEach(r=>r.unsubscribe())})}class $s extends O{constructor(e){super(),this.maxBufferSize=e,this.buffer=[]}notify(e){this.buffer.push(e),this.buffer.length>this.maxBufferSize&&this.buffer.shift(),super.notify(e)}subscribe(e){let n=!1;const r={unsubscribe:()=>{n=!0,this.removeObserver(e)}};return Ur(()=>{for(const s of this.buffer){if(n)return;e(s)}n||this.addObserver(e)}),r}unbuffer(){Ur(()=>{this.maxBufferSize=this.buffer.length=0})}}function Mt(t,e,n){const r=n&&n.leading!==void 0?n.leading:!0,s=n&&n.trailing!==void 0?n.trailing:!0;let i=!1,o,a;return{throttled:(...c)=>{if(i){o=c;return}r?t(...c):o=c,i=!0,a=$(()=>{s&&o&&t(...o),i=!1,o=void 0},e)},cancel:()=>{tt(a),i=!1,o=void 0}}}function R(){}function W(t){return t?(parseInt(t,10)^Math.random()*16>>parseInt(t,10)/4).toString(16):`10000000-1000-4000-8000-${1e11}`.replace(/[018]/g,W)}const dn=/([\w-]+)\s*=\s*([^;]+)/g;function Me(t,e){for(dn.lastIndex=0;;){const n=dn.exec(t);if(n){if(n[1]===e)return n[2]}else break}}function aa(t){const e=new Map;for(dn.lastIndex=0;;){const n=dn.exec(t);if(n)e.set(n[1],n[2]);else break}return e}function dr(t,e,n=""){const r=t.charCodeAt(e-1),i=r>=55296&&r<=56319?e+1:e;return t.length<=i?t:`${t.slice(0,i)}${n}`}function ca(){return Gs()===0}function ua(){return Gs()===1}let Je;function Gs(){return Je??(Je=la())}function la(t=window){var e;const n=t.navigator.userAgent;return t.chrome||/HeadlessChrome/.test(n)?0:((e=t.navigator.vendor)===null||e===void 0?void 0:e.indexOf("Apple"))===0||/safari/i.test(n)&&!/chrome|android/i.test(n)?1:2}function fr(t){return $e(t,location.href).href}function da(t){try{return!!$e(t)}catch{return!1}}function fa(t){const e=$e(t).pathname;return e[0]==="/"?e:`/${e}`}function $e(t,e){const{URL:n}=pa();try{return e!==void 0?new n(t,e):new n(t)}catch(r){throw new Error(`Failed to construct URL: ${String(r)}`)}}let Nn;function pa(){if(!Nn){let t,e;try{t=document.createElement("iframe"),t.style.display="none",document.body.appendChild(t),e=t.contentWindow}catch{e=yt}Nn={URL:e.URL},t==null||t.remove()}return Nn}function yn(t,e,n=0,r){const s=new Date;s.setTime(s.getTime()+n);const i=`expires=${s.toUTCString()}`,o=r&&r.crossSite?"none":"strict",a=r&&r.domain?`;domain=${r.domain}`:"",c=r&&r.secure?";secure":"",u=r&&r.partitioned?";partitioned":"";document.cookie=`${t}=${e};${i};path=/;samesite=${o}${a}${c}${u}`}function Sn(t){return Me(document.cookie,t)}let Ln;function Rt(t){return Ln||(Ln=aa(document.cookie)),Ln.get(t)}function Hs(t,e){yn(t,"",0,e)}function ma(t){if(document.cookie===void 0||document.cookie===null)return!1;try{const e=`dd_cookie_test_${W()}`,n="test";yn(e,n,Z,t);const r=Sn(e)===n;return Hs(e,t),r}catch(e){return E.error(e),!1}}let Mn;function Ks(t=location.hostname,e=document.referrer){if(Mn===void 0){const n=ha(t,e);if(n){const r=`dd_site_test_${W()}`,s="test",i=n.split(".");let o=i.pop();for(;i.length&&!Sn(r);)o=`${i.pop()}.${o}`,yn(r,s,G,{domain:o});Hs(r,{domain:o}),Mn=o}}return Mn}function ha(t,e){try{return t||$e(e).hostname}catch{}}const Nt="_dd_s";function Ws(t,e){for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(e(r,n,t))return r}}function js(t){return Object.values(t)}function pr(t){return Object.entries(t)}const Xt=4*Ms,qs=15*Z,_a=Ds,Ys="0",De={COOKIE:"cookie",LOCAL_STORAGE:"local-storage"},Xs=/^([a-zA-Z]+)=([a-z0-9-]+)$/,mr="&";function ga(t){return!!t&&(t.indexOf(mr)!==-1||Xs.test(t))}const ba="1";function Bt(t,e){const n={isExpired:ba};return e.trackAnonymousUser&&(t!=null&&t.anonymousId?n.anonymousId=t==null?void 0:t.anonymousId:n.anonymousId=W()),n}function rn(t){return Yt(t)}function Js(t){return!rn(t)}function ke(t){return t.isExpired!==void 0||!ya(t)}function ya(t){return(t.created===void 0||J()-Number(t.created)<Xt)&&(t.expire===void 0||J()<Number(t.expire))}function Zs(t){t.expire=String(J()+qs)}function Qs(t){return pr(t).map(([e,n])=>e==="anonymousId"?`aid=${n}`:`${e}=${n}`).join(mr)}function hr(t){const e={};return ga(t)&&t.split(mr).forEach(n=>{const r=Xs.exec(n);if(r!==null){const[,s,i]=r;s==="aid"?e.anonymousId=i:e[s]=i}}),e}const Sa="_dd",va="_dd_r",Ea="_dd_l",Ta="rum",wa="logs";function Ia(t){if(!Rt(Nt)){const n=Rt(Sa),r=Rt(va),s=Rt(Ea),i={};n&&(i.id=n),s&&/^[01]$/.test(s)&&(i[wa]=s),r&&/^[012]$/.test(r)&&(i[Ta]=r),Js(i)&&(Zs(i),t.persistSession(i))}}function Vr(t){const e=Ra(t);return e&&ma(e)?{type:De.COOKIE,cookieOptions:e}:void 0}function Aa(t,e){const n={isLockEnabled:ca(),persistSession:r=>Fr(e,t,r,qs),retrieveSession:ti,expireSession:r=>Fr(e,t,Bt(r,t),Xt)};return Ia(n),n}function Fr(t,e,n,r){yn(Nt,Qs(n),e.trackAnonymousUser?_a:r,t)}function ti(){const t=Sn(Nt);return hr(t)}function Ra(t){const e={};if(e.secure=!!t.useSecureSessionCookie||!!t.usePartitionedCrossSiteSessionCookie,e.crossSite=!!t.usePartitionedCrossSiteSessionCookie,e.partitioned=!!t.usePartitionedCrossSiteSessionCookie,t.trackSessionAcrossSubdomains){const n=Ks();if(!n)return;e.domain=n}return e}const Ca="_dd_test_";function zr(){try{const t=W(),e=`${Ca}${t}`;localStorage.setItem(e,t);const n=localStorage.getItem(e);return localStorage.removeItem(e),t===n?{type:De.LOCAL_STORAGE}:void 0}catch{return}}function Oa(t){return{isLockEnabled:!1,persistSession:ei,retrieveSession:ka,expireSession:e=>xa(e,t)}}function ei(t){localStorage.setItem(Nt,Qs(t))}function ka(){const t=localStorage.getItem(Nt);return hr(t)}function xa(t,e){ei(Bt(t,e))}const Na=10,La=100,Ma=G,ni="--",ri=[];let sn;function $t(t,e,n=0){var r;const{isLockEnabled:s,persistSession:i,expireSession:o}=e,a=l=>i({...l,lock:u}),c=()=>{const{lock:l,...p}=e.retrieveSession();return{session:p,lock:l&&!Pa(l)?l:void 0}};if(sn||(sn=t),t!==sn){ri.push(t);return}if(s&&n>=La){Br(e);return}let u,d=c();if(s){if(d.lock){Ze(t,e,n);return}if(u=Da(),a(d.session),d=c(),d.lock!==u){Ze(t,e,n);return}}let f=t.process(d.session);if(s&&(d=c(),d.lock!==u)){Ze(t,e,n);return}if(f&&(ke(f)?o(f):(Zs(f),s?a(f):i(f))),s&&!(f&&ke(f))){if(d=c(),d.lock!==u){Ze(t,e,n);return}i(d.session),f=d.session}(r=t.after)===null||r===void 0||r.call(t,f||d.session),Br(e)}function Ze(t,e,n){$(()=>{$t(t,e,n+1)},Na)}function Br(t){sn=void 0;const e=ri.shift();e&&$t(e,t)}function Da(){return W()+ni+x()}function Pa(t){const[,e]=t.split(ni);return!e||D(Number(e),x())>Ma}const $r=G;function Ua(t){switch(t.sessionPersistence){case De.COOKIE:return Vr(t);case De.LOCAL_STORAGE:return zr();case void 0:{let e=Vr(t);return!e&&t.allowFallbackToLocalStorage&&(e=zr()),e}default:E.error(`Invalid session persistence '${String(t.sessionPersistence)}'`)}}function Va(t,e){return t.type===De.COOKIE?Aa(e,t.cookieOptions):Oa(e)}function Fa(t,e,n,r,s=Va(t,e)){const i=new O,o=new O,a=new O,c=he(p,$r);let u;h();const{throttled:d,cancel:f}=Mt(()=>{$t({process:_=>{if(rn(_))return;const C=m(_);return g(C),C},after:_=>{Js(_)&&!I()&&b(_),u=_}},s)},$r);function l(){$t({process:_=>I()?m(_):void 0},s)}function p(){const _=s.retrieveSession();ke(_)?$t({process:C=>ke(C)?Bt(C,e):void 0,after:m},s):m(_)}function m(_){return ke(_)&&(_=Bt(_,e)),I()&&(P(_)?H():(a.notify({previousState:u,newState:_}),u=_)),_}function h(){$t({process:_=>{if(rn(_))return Bt(_,e)},after:_=>{u=_}},s)}function g(_){if(rn(_))return!1;const C=r(_[n]);_[n]=C,delete _.isExpired,C!==Ys&&!_.id&&(_.id=W(),_.created=String(J()))}function I(){return(u==null?void 0:u[n])!==void 0}function P(_){return u.id!==_.id||u[n]!==_[n]}function H(){u=Bt(u,e),o.notify()}function b(_){u=_,i.notify()}function T(_){$t({process:C=>({...C,..._}),after:m},s)}return{expandOrRenewSession:d,expandSession:l,getSession:()=>u,renewObservable:i,expireObservable:o,sessionStateUpdateObservable:a,restartSession:h,expire:()=>{f(),s.expireSession(u),m(Bt(u,e))},stop:()=>{bn(c)},updateSessionState:T}}const tr={GRANTED:"granted",NOT_GRANTED:"not-granted"};function za(t){const e=new O;return{tryToInit(n){t||(t=n)},update(n){t=n,e.notify()},isGranted(){return t===tr.GRANTED},observable:e}}function Jt(t){return t===null?"null":Array.isArray(t)?"array":typeof t}function Pe(t){const e=Jt(t);return e==="string"||e==="function"||t instanceof RegExp}function vn(t,e,n=!1){return t.some(r=>{try{if(typeof r=="function")return r(e);if(r instanceof RegExp)return r.test(e);if(typeof r=="string")return n?e.startsWith(r):r===e}catch(s){E.error(s)}return!1})}const si=["chrome-extension://","moz-extension://"];function Gr(t){return si.some(e=>t.includes(e))}function Ba(t,e=""){if(Gr(t))return!1;const r=e.split(`
`).filter(s=>{const i=s.trim();return i.length&&/^at\s+|@/.test(i)})[1]||"";return Gr(r)}function $a(t=""){for(const e of si){const n=t.match(new RegExp(`${e}[^/]+`));if(n)return n[0]}}function Ge(t,e,n){if(typeof t!="object"||t===null)return JSON.stringify(t);const r=oe(Object.prototype),s=oe(Array.prototype),i=oe(Object.getPrototypeOf(t)),o=oe(t);try{return JSON.stringify(t,e,n)}catch{return"<error: unable to serialize object>"}finally{r(),s(),i(),o()}}function oe(t){const e=t,n=e.toJSON;return n?(delete e.toJSON,()=>{e.toJSON=n}):R}const Ga=220*de,Ha="$",Ka=3;function M(t,e=Ga){const n=oe(Object.prototype),r=oe(Array.prototype),s=[],i=new WeakMap,o=Dn(t,Ha,void 0,s,i),a=JSON.stringify(o);let c=a?a.length:0;if(c>e){Pn(e,"discarded",t);return}for(;s.length>0&&c<e;){const u=s.shift();let d=0;if(Array.isArray(u.source))for(let f=0;f<u.source.length;f++){const l=Dn(u.source[f],u.path,f,s,i);if(l!==void 0?c+=JSON.stringify(l).length:c+=4,c+=d,d=1,c>e){Pn(e,"truncated",t);break}u.target[f]=l}else for(const f in u.source)if(Object.prototype.hasOwnProperty.call(u.source,f)){const l=Dn(u.source[f],u.path,f,s,i);if(l!==void 0&&(c+=JSON.stringify(l).length+d+f.length+Ka,d=1),c>e){Pn(e,"truncated",t);break}u.target[f]=l}}return n(),r(),o}function Dn(t,e,n,r,s){const i=qa(t);if(!i||typeof i!="object")return Wa(i);const o=er(i);if(o!=="[Object]"&&o!=="[Array]"&&o!=="[Error]")return o;const a=t;if(s.has(a))return`[Reference seen at ${s.get(a)}]`;const c=n!==void 0?`${e}.${n}`:e,u=Array.isArray(i)?[]:{};return s.set(a,c),r.push({source:i,target:u,path:c}),u}function Wa(t){return typeof t=="bigint"?`[BigInt] ${t.toString()}`:typeof t=="function"?`[Function] ${t.name||"unknown"}`:typeof t=="symbol"?`[Symbol] ${t.description||t.toString()}`:t}function er(t){try{if(t instanceof Event)return ja(t);if(t instanceof RegExp)return`[RegExp] ${t.toString()}`;const n=Object.prototype.toString.call(t).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch{}return"[Unserializable]"}function ja(t){return{type:t.type,isTrusted:t.isTrusted,currentTarget:t.currentTarget?er(t.currentTarget):null,target:t.target?er(t.target):null}}function qa(t){const e=t;if(e&&typeof e.toJSON=="function")try{return e.toJSON()}catch{}return t}function Pn(t,e,n){E.warn(`The data provided has been ${e} as it is over the limit of ${t} characters:`,n)}const fe="?";function He(t){var e,n;const r=[];let s=Un(t,"stack");const i=String(t);if(s&&s.startsWith(i)&&(s=s.slice(i.length)),s&&s.split(`
`).forEach(o=>{const a=Ja(o)||Qa(o)||ec(o)||sc(o);a&&(!a.func&&a.line&&(a.func=fe),r.push(a))}),r.length>0&&cc()&&t instanceof Error){const o=[];let a=t;for(;(a=Object.getPrototypeOf(a))&&oi(a);){const c=((e=a.constructor)===null||e===void 0?void 0:e.name)||fe;o.push(c)}for(let c=o.length-1;c>=0&&((n=r[0])===null||n===void 0?void 0:n.func)===o[c];c--)r.shift()}return{message:Un(t,"message"),name:Un(t,"name"),stack:r}}const ii="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",pe="(?::(\\d+))",Ya=new RegExp(`^\\s*at (.*?) ?\\(${ii}${pe}?${pe}?\\)?\\s*$`,"i"),Xa=new RegExp(`\\((\\S*)${pe}${pe}\\)`);function Ja(t){const e=Ya.exec(t);if(!e)return;const n=e[2]&&e[2].indexOf("native")===0,r=e[2]&&e[2].indexOf("eval")===0,s=Xa.exec(e[2]);return r&&s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3]),{args:n?[e[2]]:[],column:e[4]?+e[4]:void 0,func:e[1]||fe,line:e[3]?+e[3]:void 0,url:n?void 0:e[2]}}const Za=new RegExp(`^\\s*at ?${ii}${pe}?${pe}??\\s*$`,"i");function Qa(t){const e=Za.exec(t);if(e)return{args:[],column:e[3]?+e[3]:void 0,func:fe,line:e[2]?+e[2]:void 0,url:e[1]}}const tc=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function ec(t){const e=tc.exec(t);if(e)return{args:[],column:e[4]?+e[4]:void 0,func:e[1]||fe,line:+e[3],url:e[2]}}const nc=/^\s*(.*?)(?:\((.*?)\))?(?:(?:(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle|\[wasm code\])(?::(\d+))?(?::(\d+))?)|@)\s*$/i,rc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function sc(t){const e=nc.exec(t);if(!e)return;const n=e[3]&&e[3].indexOf(" > eval")>-1,r=rc.exec(e[3]);return n&&r&&(e[3]=r[1],e[4]=r[2],e[5]=void 0),{args:e[2]?e[2].split(","):[],column:e[5]?+e[5]:void 0,func:e[1]||fe,line:e[4]?+e[4]:void 0,url:e[3]}}function Un(t,e){if(typeof t!="object"||!t||!(e in t))return;const n=t[e];return typeof n=="string"?n:void 0}function ic(t,e,n,r){if(e===void 0)return;const{name:s,message:i}=ac(t);return{name:s,message:i,stack:[{url:e,column:r,line:n}]}}const oc=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function ac(t){let e,n;return{}.toString.call(t)==="[object String]"&&([,e,n]=oc.exec(t)),{name:e,message:n}}function oi(t){return String(t.constructor).startsWith("class ")}let Qe;function cc(){if(Qe!==void 0)return Qe;class t extends Error{constructor(){super(),this.name="Error"}}const[e,n]=[t,Error].map(r=>new r);return Qe=oi(Object.getPrototypeOf(e))&&n.stack!==e.stack,Qe}function fn(t){const n=new Error(t);n.name="HandlingStack";let r;return Ot(()=>{const s=He(n);s.stack=s.stack.slice(2),r=Ke(s)}),r}function Ke(t){let e=ai(t);return t.stack.forEach(n=>{const r=n.func==="?"?"<anonymous>":n.func,s=n.args&&n.args.length>0?`(${n.args.join(", ")})`:"",i=n.line?`:${n.line}`:"",o=n.line&&n.column?`:${n.column}`:"";e+=`
  at ${r}${s} @ ${n.url}${i}${o}`}),e}function ai(t){return`${t.name||"Error"}: ${t.message}`}const ci="No stack, consider using an instance of Error";function _r({stackTrace:t,originalError:e,handlingStack:n,componentStack:r,startClocks:s,nonErrorPrefix:i,useFallbackStack:o=!0,source:a,handling:c}){const u=Zt(e);return!t&&u&&(t=He(e)),{startClocks:s,source:a,handling:c,handlingStack:n,componentStack:r,originalError:e,type:t?t.name:void 0,message:uc(t,u,i,e),stack:t?Ke(t):o?ci:void 0,causes:u?fc(e,a):void 0,fingerprint:lc(e),context:dc(e)}}function uc(t,e,n,r){return t!=null&&t.message&&(t!=null&&t.name)?t.message:e?"Empty message":`${n} ${Ge(M(r))}`}function lc(t){return Zt(t)&&"dd_fingerprint"in t?String(t.dd_fingerprint):void 0}function dc(t){if(t!==null&&typeof t=="object"&&"dd_context"in t)return t.dd_context}function Zt(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}function fc(t,e){let n=t;const r=[];for(;Zt(n==null?void 0:n.cause)&&r.length<10;){const s=He(n.cause);r.push({message:n.cause.message,source:e,type:s==null?void 0:s.name,stack:s&&Ke(s)}),n=n.cause}return r.length?r:void 0}var wt;(function(t){t.TRACK_INTAKE_REQUESTS="track_intake_requests",t.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",t.USE_TREE_WALKER_FOR_ACTION_NAME="use_tree_walker_for_action_name",t.GRAPHQL_TRACKING="graphql_tracking",t.FEATURE_OPERATION_VITAL="feature_operation_vital",t.SHORT_SESSION_INVESTIGATION="short_session_investigation"})(wt||(wt={}));const gr=new Set;function pc(t){Array.isArray(t)&&mc(t.filter(e=>un(wt,e)))}function mc(t){t.forEach(e=>{gr.add(e)})}function _e(t){return gr.has(t)}function hc(){return gr}const _c=200;function br(t){const{env:e,service:n,version:r,datacenter:s,sdkVersion:i,variant:o}=t,a=[te("sdk_version",i??"6.21.2")];return e&&a.push(te("env",e)),n&&a.push(te("service",n)),r&&a.push(te("version",r)),s&&a.push(te("datacenter",s)),o&&a.push(te("variant",o)),a}function te(t,e){const n=e?`${t}:${e}`:t;return(n.length>_c||bc(n))&&E.warn(`Tag ${n} doesn't meet tag requirements and will be sanitized. ${cr} ${gn}/getting_started/tagging/#defining-tags`),gc(n)}function gc(t){return t.replace(/,/g,"_")}function bc(t){return yc()?new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(t):!1}function yc(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch{return!1}}const ui="datad0g.com",Sc="dd0g-gov.com",Wt="datadoghq.com",vc="datadoghq.eu",Ec="ddog-gov.com",Tc="pci.browser-intake-datadoghq.com",wc=["ddsource","dd-api-key","dd-request-id"];function yr(t,e){const n=yt.__ddBrowserSdkExtensionCallback;n&&n({type:t,payload:e})}function pn(t,e,n=Ic()){if(e===void 0)return t;if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const s=e.flags||[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.sticky?"y":"",e.unicode?"u":""].join("");return new RegExp(e.source,s)}if(n.hasAlreadyBeenSeen(e))return;if(Array.isArray(e)){const s=Array.isArray(t)?t:[];for(let i=0;i<e.length;++i)s[i]=pn(s[i],e[i],n);return s}const r=Jt(t)==="object"?t:{};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=pn(r[s],e[s],n));return r}function Sr(t){return pn(void 0,t)}function It(...t){let e;for(const n of t)n!=null&&(e=pn(e,n));return e}function Ic(){if(typeof WeakSet<"u"){const e=new WeakSet;return{hasAlreadyBeenSeen(n){const r=e.has(n);return r||e.add(n),r}}}const t=[];return{hasAlreadyBeenSeen(e){const n=t.indexOf(e)>=0;return n||t.push(e),n}}}function li(){var t;const e=yt.navigator;return{status:e.onLine?"connected":"not_connected",interfaces:e.connection&&e.connection.type?[e.connection.type]:void 0,effective_type:(t=e.connection)===null||t===void 0?void 0:t.effectiveType}}function Ac(t){return t>=500}function Rc(t){try{return t.clone()}catch{return}}const ge={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"},Cc=80*de,Oc=32,di=20*Us,kc=Z,fi=G;function pi(t,e,n,r,s,i){e.transportStatus===0&&e.queuedPayloads.size()===0&&e.bandwidthMonitor.canHandle(t)?hi(t,e,n,i,{onSuccess:()=>_i(0,e,n,r,s,i),onFailure:()=>{e.queuedPayloads.enqueue(t)||i.notify({type:"queue-full",bandwidth:e.bandwidthMonitor.stats(),payload:t}),mi(e,n,r,s,i)}}):e.queuedPayloads.enqueue(t)||i.notify({type:"queue-full",bandwidth:e.bandwidthMonitor.stats(),payload:t})}function mi(t,e,n,r,s){t.transportStatus===2&&$(()=>{const i=t.queuedPayloads.first();hi(i,t,e,s,{onSuccess:()=>{t.queuedPayloads.dequeue(),t.currentBackoffTime=fi,_i(1,t,e,n,r,s)},onFailure:()=>{t.currentBackoffTime=Math.min(kc,t.currentBackoffTime*2),mi(t,e,n,r,s)}})},t.currentBackoffTime)}function hi(t,e,n,r,{onSuccess:s,onFailure:i}){e.bandwidthMonitor.add(t),n(t,o=>{e.bandwidthMonitor.remove(t),xc(o)?(e.transportStatus=e.bandwidthMonitor.ongoingRequestCount>0?1:2,t.retry={count:t.retry?t.retry.count+1:1,lastFailureStatus:o.status},r.notify({type:"failure",bandwidth:e.bandwidthMonitor.stats(),payload:t}),i()):(e.transportStatus=0,r.notify({type:"success",bandwidth:e.bandwidthMonitor.stats(),payload:t}),s())})}function _i(t,e,n,r,s,i){t===0&&e.queuedPayloads.isFull()&&!e.queueFullReported&&(s({message:`Reached max ${r} events size queued for upload: ${di/Us}MiB`,source:ge.AGENT,startClocks:U()}),e.queueFullReported=!0);const o=e.queuedPayloads;for(e.queuedPayloads=gi();o.size()>0;)pi(o.dequeue(),e,n,r,s,i)}function xc(t){return t.type!=="opaque"&&(t.status===0&&!navigator.onLine||t.status===408||t.status===429||Ac(t.status))}function Nc(){return{transportStatus:0,currentBackoffTime:fi,bandwidthMonitor:Lc(),queuedPayloads:gi(),queueFullReported:!1}}function gi(){const t=[];return{bytesCount:0,enqueue(e){return this.isFull()?!1:(t.push(e),this.bytesCount+=e.bytesCount,!0)},first(){return t[0]},dequeue(){const e=t.shift();return e&&(this.bytesCount-=e.bytesCount),e},size(){return t.length},isFull(){return this.bytesCount>=di}}}function Lc(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle(t){return this.ongoingRequestCount===0||this.ongoingByteCount+t.bytesCount<=Cc&&this.ongoingRequestCount<Oc},add(t){this.ongoingRequestCount+=1,this.ongoingByteCount+=t.bytesCount},remove(t){this.ongoingRequestCount-=1,this.ongoingByteCount-=t.bytesCount},stats(){return{ongoingByteCount:this.ongoingByteCount,ongoingRequestCount:this.ongoingRequestCount}}}}function vr(t,e,n){const r=new O,s=Nc();return{observable:r,send:i=>{for(const o of t)pi(i,s,(a,c)=>Pc(o,e,a,c),o.trackType,n,r)},sendOnExit:i=>{for(const o of t)Mc(o,e,i)}}}function Mc(t,e,n){if(!!navigator.sendBeacon&&n.bytesCount<e)try{const s=t.build("beacon",n);if(navigator.sendBeacon(s,n.data))return}catch(s){Dc(s)}nr(t,n)}let Hr=!1;function Dc(t){Hr||(Hr=!0,dt(t))}function Pc(t,e,n,r){if(Uc()&&n.bytesCount<e){const i=t.build("fetch-keepalive",n);fetch(i,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(S(o=>r==null?void 0:r({status:o.status,type:o.type}))).catch(S(()=>nr(t,n,r)))}else nr(t,n,r)}function nr(t,e,n){const r=t.build("fetch",e);fetch(r,{method:"POST",body:e.data,mode:"cors"}).then(S(s=>n==null?void 0:n({status:s.status,type:s.type}))).catch(S(()=>n==null?void 0:n({status:0})))}function Uc(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function be(){const t=Vc();if(t)return{getCapabilities(){var e;return JSON.parse(((e=t.getCapabilities)===null||e===void 0?void 0:e.call(t))||"[]")},getPrivacyLevel(){var e;return(e=t.getPrivacyLevel)===null||e===void 0?void 0:e.call(t)},getAllowedWebViewHosts(){return JSON.parse(t.getAllowedWebViewHosts())},send(e,n,r){const s=r?{id:r}:void 0;t.send(JSON.stringify({eventType:e,event:n,view:s}))}}}function bi(t){const e=be();return!!e&&e.getCapabilities().includes(t)}function jt(t){var e;t===void 0&&(t=(e=at().location)===null||e===void 0?void 0:e.hostname);const n=be();return!!n&&n.getAllowedWebViewHosts().some(r=>t===r||t.endsWith(`.${r}`))}function Vc(){return at().DatadogEventBridge}function L(t,e,n,r,s){return rt(t,e,[n],r,s)}function rt(t,e,n,r,{once:s,capture:i,passive:o}={}){const a=S(l=>{!l.isTrusted&&!l.__ddIsTrusted&&!t.allowUntrustedEvents||(s&&f(),r(l))}),c=o?{capture:i,passive:o}:i,u=window.EventTarget&&e instanceof EventTarget?window.EventTarget.prototype:e,d=xt(u,"addEventListener");n.forEach(l=>d.call(e,l,a,c));function f(){const l=xt(u,"removeEventListener");n.forEach(p=>l.call(e,p,a,c))}return{stop:f}}const ue={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Fc(t){return new O(e=>{const{stop:n}=rt(t,window,["visibilitychange","freeze"],s=>{s.type==="visibilitychange"&&document.visibilityState==="hidden"?e.notify({reason:ue.HIDDEN}):s.type==="freeze"&&e.notify({reason:ue.FROZEN})},{capture:!0}),r=L(t,window,"beforeunload",()=>{e.notify({reason:ue.UNLOADING})}).stop;return()=>{n(),r()}})}function yi(t){return js(ue).includes(t)}function Si({encoder:t,request:e,flushController:n,messageBytesLimit:r}){let s={};const i=n.flushObservable.subscribe(f=>d(f));function o(f,l,p){n.notifyBeforeAddMessage(l),p!==void 0?(s[p]=f,n.notifyAfterAddMessage()):t.write(t.isEmpty?f:`
${f}`,m=>{n.notifyAfterAddMessage(m-l)})}function a(f){return f!==void 0&&s[f]!==void 0}function c(f){const l=s[f];delete s[f];const p=t.estimateEncodedBytesCount(l);n.notifyAfterRemoveMessage(p)}function u(f,l){const p=Ge(f),m=t.estimateEncodedBytesCount(p);if(m>=r){E.warn(`Discarded a message whose size was bigger than the maximum allowed size ${r}KB. ${cr} ${Xo}/#technical-limitations`);return}a(l)&&c(l),o(p,m,l)}function d(f){const l=js(s).join(`
`);s={};const p=yi(f.reason),m=p?e.sendOnExit:e.send;if(p&&t.isAsync){const h=t.finishSync();h.outputBytesCount&&m(Kr(h));const g=[h.pendingData,l].filter(Boolean).join(`
`);g&&m({data:g,bytesCount:Vs(g)})}else l&&t.write(t.isEmpty?l:`
${l}`),t.finish(h=>{m(Kr(h))})}return{flushController:n,add:u,upsert:u,stop:i.unsubscribe}}function Kr(t){let e;return typeof t.output=="string"?e=t.output:e=new Blob([t.output],{type:"text/plain"}),{data:e,bytesCount:t.outputBytesCount,encoding:t.encoding}}function vi({messagesLimit:t,bytesLimit:e,durationLimit:n,pageMayExitObservable:r,sessionExpireObservable:s}){const i=r.subscribe(m=>d(m.reason)),o=s.subscribe(()=>d("session_expire")),a=new O(()=>()=>{i.unsubscribe(),o.unsubscribe()});let c=0,u=0;function d(m){if(u===0)return;const h=u,g=c;u=0,c=0,p(),a.notify({reason:m,messagesCount:h,bytesCount:g})}let f;function l(){f===void 0&&(f=$(()=>{d("duration_limit")},n))}function p(){tt(f),f=void 0}return{flushObservable:a,get messagesCount(){return u},notifyBeforeAddMessage(m){c+m>=e&&d("bytes_limit"),u+=1,c+=m,l()},notifyAfterAddMessage(m=0){c+=m,u>=t?d("messages_limit"):c>=e&&d("bytes_limit")},notifyAfterRemoveMessage(m){c-=m,u-=1,u===0&&p()}}}const Lt="DISCARDED",ot="SKIPPED";function zc(){const t={};return{register(e,n){return t[e]||(t[e]=[]),t[e].push(n),{unregister:()=>{t[e]=t[e].filter(r=>r!==n)}}},triggerHook(e,n){const r=t[e]||[],s=[];for(const i of r){const o=i(n);if(o===Lt)return Lt;o!==ot&&s.push(o)}return It(...s)}}}const kt={LOG:"log",CONFIGURATION:"configuration",USAGE:"usage"},Bc=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],$c=1,Gc=[Ec];let Vn;function ye(){return Vn||(Vn=new $s(100)),Vn}function Hc(t,e,n,r,s,i){const o=new O,{stop:a}=Wc(e,r,s,i,o),{enabled:c,metricsEnabled:u}=Kc(t,e,n,o);return{stop:a,enabled:c,metricsEnabled:u}}function Kc(t,e,n,r,s=$c){const i={},o=!Gc.includes(e.site)&&Kt(e.telemetrySampleRate),a={[kt.LOG]:o,[kt.CONFIGURATION]:o&&Kt(e.telemetryConfigurationSampleRate),[kt.USAGE]:o&&Kt(e.telemetryUsageSampleRate),metric:o&&Kt(s)},c=jc(),u=ye();return u.subscribe(({rawEvent:f,metricName:l})=>{if(l&&!a.metric||!a[f.type])return;const p=l||f.status||f.type;let m=i[p];if(m||(m=i[p]=new Set),m.size>=e.maxTelemetryEventsPerPage)return;const h=Ge(f);if(m.has(h))return;const g=n.triggerHook(1,{startTime:U().relative});if(g===Lt)return;const I=d(g,t,f,c);r.notify(I),yr("telemetry",I),m.add(h)}),u.unbuffer(),ia(Er),{enabled:o,metricsEnabled:a.metric};function d(f,l,p,m){const g={type:"telemetry",date:U().timeStamp,service:l,version:"6.21.2",source:"browser",_dd:{format_version:2},telemetry:It(p,{runtime_env:m,connectivity:li(),sdk_setup:"npm"}),ddtags:br(e).join(","),experimental_features:Array.from(hc())};return It(g,f)}}function Wc(t,e,n,r,s){const i=[];if(jt()){const o=be(),a=s.subscribe(c=>o.send("internal_telemetry",c));i.push(a.unsubscribe)}else{const o=[t.rumEndpointBuilder];t.replica&&qc(t)&&o.push(t.replica.rumEndpointBuilder);const a=Si({encoder:r(4),request:vr(o,t.batchBytesLimit,e),flushController:vi({messagesLimit:t.batchMessagesLimit,bytesLimit:t.batchBytesLimit,durationLimit:t.flushTimeout,pageMayExitObservable:n,sessionExpireObservable:new O}),messageBytesLimit:t.messageBytesLimit});i.push(a.stop);const c=s.subscribe(a.add);i.push(c.unsubscribe)}return{stop:()=>i.forEach(o=>o())}}function jc(){var t;return{is_local_file:((t=yt.location)===null||t===void 0?void 0:t.protocol)==="file:",is_worker:ln}}function qc(t){return t.site===ui}function Dt(t,e){Qn(_n.debug,t,e),ye().notify({rawEvent:{type:kt.LOG,message:t,status:"debug",...e}})}function Er(t,e){ye().notify({rawEvent:{type:kt.LOG,status:"error",...Xc(t),...e}})}function Yc(t){ye().notify({rawEvent:{type:kt.CONFIGURATION,configuration:t}})}function We(t,e){ye().notify({rawEvent:{type:kt.LOG,message:t,status:"debug",...e},metricName:t})}function z(t){ye().notify({rawEvent:{type:kt.USAGE,usage:t}})}function Xc(t){if(Zt(t)){const e=He(t);return{error:{kind:e.name,stack:Ke(Jc(e))},message:e.message}}return{error:{stack:ci},message:`Uncaught ${Ge(t)}`}}function Jc(t){return t.stack=t.stack.filter(e=>!e.url||Bc.some(n=>e.url.startsWith(n))),t}const Wr="Running the Browser SDK in a Web extension content script is discouraged and will be forbidden in a future major release unless the `allowedTrackingOrigins` option is provided.",Zc="SDK initialized on a non-allowed domain.";function Qc(t,e,n=typeof location<"u"?location.origin:""){const r=t.allowedTrackingOrigins;if(!r){if(Ba(n,e)){E.warn(Wr);const i=$a(e);Dt(Wr,{extensionUrl:i||"unknown"})}return!0}const s=vn(r,n);return s||E.error(Zc),s}function Gt(t,e,n){const r=tu(t,e);return{build(s,i){const o=eu(t,e,s,i,n);return r(o)},trackType:e}}function tu(t,e){const n=`/api/v2/${e}`,r=t.proxy;if(typeof r=="string"){const i=fr(r);return o=>`${i}?ddforward=${encodeURIComponent(`${n}?${o}`)}`}if(typeof r=="function")return i=>r({path:n,parameters:i});const s=Ei(e,t);return i=>`https://${s}${n}?${i}`}function Ei(t,e){const{site:n=Wt,internalAnalyticsSubdomain:r}=e;if(t==="logs"&&e.usePciIntake&&n===Wt)return Tc;if(r&&n===Wt)return`${r}.${Wt}`;if(n===Sc)return`http-intake.logs.${n}`;const s=n.split("."),i=s.pop();return`browser-intake-${s.join("-")}.${i}`}function eu({clientToken:t,internalAnalyticsSubdomain:e,source:n="browser"},r,s,{retry:i,encoding:o},a=[]){const c=[`ddsource=${n}`,`dd-api-key=${t}`,`dd-evp-origin-version=${encodeURIComponent("6.21.2")}`,"dd-evp-origin=browser",`dd-request-id=${W()}`].concat(a);return o&&c.push(`dd-evp-encoding=${o}`),r==="rum"&&(c.push(`batch_time=${x()}`,`_dd.api=${s}`),i&&c.push(`_dd.retry_count=${i.count}`,`_dd.retry_after=${i.lastFailureStatus}`)),e&&c.reverse(),c.join("&")}function nu(t){const e=t.site||Wt,n=ru(t.source),r=su({...t,site:e,source:n});return{replica:iu({...t,site:e,source:n}),site:e,source:n,...r}}function ru(t){return t==="flutter"||t==="unity"?t:"browser"}function su(t){return{logsEndpointBuilder:Gt(t,"logs"),rumEndpointBuilder:Gt(t,"rum"),profilingEndpointBuilder:Gt(t,"profile"),sessionReplayEndpointBuilder:Gt(t,"replay"),exposuresEndpointBuilder:Gt(t,"exposures")}}function iu(t){if(!t.replica)return;const e={...t,site:Wt,clientToken:t.replica.clientToken};return{logsEndpointBuilder:Gt(e,"logs"),rumEndpointBuilder:Gt(e,"rum",[`application.id=${t.replica.applicationId}`])}}function ou(t){return wc.every(e=>t.includes(e))}const ae={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input",MASK_UNLESS_ALLOWLISTED:"mask-unless-allowlisted"},rr={ALL:"all",SAMPLED:"sampled"};function Fn(t,e){return t!=null&&typeof t!="string"?(E.error(`${e} must be defined as a string`),!1):!0}function au(t){return t&&typeof t=="string"&&!/(datadog|ddog|datad0g|dd0g)/.test(t)?(E.error(`Site should be a valid Datadog site. ${cr} ${gn}/getting_started/site/.`),!1):!0}function ce(t,e){return t!==void 0&&!Jo(t)?(E.error(`${e} Sample Rate should be a number between 0 and 100`),!1):!0}function cu(t,e){var n,r,s,i,o,a,c,u,d,f;if(!t||!t.clientToken){E.error("Client Token is not configured, we will not send any data.");return}if(t.allowedTrackingOrigins!==void 0&&!Array.isArray(t.allowedTrackingOrigins)){E.error("Allowed Tracking Origins must be an array");return}if(!(!au(t.site)||!ce(t.sessionSampleRate,"Session")||!ce(t.telemetrySampleRate,"Telemetry")||!ce(t.telemetryConfigurationSampleRate,"Telemetry Configuration")||!ce(t.telemetryUsageSampleRate,"Telemetry Usage")||!Fn(t.version,"Version")||!Fn(t.env,"Env")||!Fn(t.service,"Service")||!Qc(t,e??""))){if(t.trackingConsent!==void 0&&!un(tr,t.trackingConsent)){E.error('Tracking Consent should be either "granted" or "not-granted"');return}return{beforeSend:t.beforeSend&&Ls(t.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:ln?void 0:Ua(t),sessionSampleRate:(n=t.sessionSampleRate)!==null&&n!==void 0?n:100,telemetrySampleRate:(r=t.telemetrySampleRate)!==null&&r!==void 0?r:20,telemetryConfigurationSampleRate:(s=t.telemetryConfigurationSampleRate)!==null&&s!==void 0?s:5,telemetryUsageSampleRate:(i=t.telemetryUsageSampleRate)!==null&&i!==void 0?i:5,service:(o=t.service)!==null&&o!==void 0?o:void 0,env:(a=t.env)!==null&&a!==void 0?a:void 0,version:(c=t.version)!==null&&c!==void 0?c:void 0,datacenter:(u=t.datacenter)!==null&&u!==void 0?u:void 0,silentMultipleInit:!!t.silentMultipleInit,allowUntrustedEvents:!!t.allowUntrustedEvents,trackingConsent:(d=t.trackingConsent)!==null&&d!==void 0?d:tr.GRANTED,trackAnonymousUser:(f=t.trackAnonymousUser)!==null&&f!==void 0?f:!0,storeContextsAcrossPages:!!t.storeContextsAcrossPages,batchBytesLimit:16*de,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*G,batchMessagesLimit:ln?1:50,messageBytesLimit:256*de,variant:t.variant,sdkVersion:t.sdkVersion,...nu(t)}}}function uu(t){return{session_sample_rate:t.sessionSampleRate,telemetry_sample_rate:t.telemetrySampleRate,telemetry_configuration_sample_rate:t.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:t.telemetryUsageSampleRate,use_before_send:!!t.beforeSend,use_partitioned_cross_site_session_cookie:t.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:t.useSecureSessionCookie,use_proxy:!!t.proxy,silent_multiple_init:t.silentMultipleInit,track_session_across_subdomains:t.trackSessionAcrossSubdomains,track_anonymous_user:t.trackAnonymousUser,session_persistence:t.sessionPersistence,allow_fallback_to_local_storage:!!t.allowFallbackToLocalStorage,store_contexts_across_pages:!!t.storeContextsAcrossPages,allow_untrusted_events:!!t.allowUntrustedEvents,tracking_consent:t.trackingConsent,use_allowed_tracking_origins:Array.isArray(t.allowedTrackingOrigins),source:t.source,sdk_version:t.sdkVersion,variant:t.variant}}function nt(t,e,n,{computeHandlingStack:r}={}){let s=t[e];if(typeof s!="function")if(e in t&&e.startsWith("on"))s=R;else return{stop:R};let i=!1;const o=function(){if(i)return s.apply(this,arguments);const a=Array.from(arguments);let c;Ot(n,null,[{target:this,parameters:a,onPostCall:d=>{c=d},handlingStack:r?fn("instrumented method"):void 0}]);const u=s.apply(this,a);return c&&Ot(c,null,[u]),u};return t[e]=o,{stop:()=>{i=!0,t[e]===o&&(t[e]=s)}}}function we(t,e,n){const r=Object.getOwnPropertyDescriptor(t,e);if(!r||!r.set||!r.configurable)return{stop:R};const s=R;let i=(a,c)=>{$(()=>{i!==s&&n(a,c)},0)};const o=function(a){r.set.call(this,a),i(this,a)};return Object.defineProperty(t,e,{set:o}),{stop:()=>{var a;((a=Object.getOwnPropertyDescriptor(t,e))===null||a===void 0?void 0:a.set)===o&&Object.defineProperty(t,e,r),i=s}}}function lu(){return new O(t=>{const e=(s,i)=>{const o=_r({stackTrace:i,originalError:s,startClocks:U(),nonErrorPrefix:"Uncaught",source:ge.SOURCE,handling:"unhandled"});t.notify(o)},{stop:n}=du(e),{stop:r}=fu(e);return()=>{n(),r()}})}function du(t){return nt(at(),"onerror",({parameters:[e,n,r,s,i]})=>{let o;Zt(i)||(o=ic(e,n,r,s)),t(i??e,o)})}function fu(t){return nt(at(),"onunhandledrejection",({parameters:[e]})=>{t(e.reason||"Empty reason")})}function pu(t){const e={version:"6.21.2",onReady(n){n()},...t};return Object.defineProperty(e,"_setDebug",{get(){return oa},enumerable:!1}),e}function mu(t,e,n){const r=t[e];r&&!r.q&&r.version&&E.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),t[e]=n,r&&r.q&&r.q.forEach(s=>Ls(s,"onReady callback threw an error:")())}function Ti(t,e){e.silentMultipleInit||E.error(`${t} is already initialized.`)}const Ue={intervention:"intervention",cspViolation:"csp_violation"};function hu(t,e){const n=[];e.includes(Ue.cspViolation)&&n.push(gu(t));const r=e.filter(s=>s!==Ue.cspViolation);return r.length&&n.push(_u(r)),Bs(...n)}function _u(t){return new O(e=>{if(!window.ReportingObserver)return;const n=S((s,i)=>s.forEach(o=>e.notify(bu(o)))),r=new window.ReportingObserver(n,{types:t,buffered:!0});return r.observe(),()=>{r.disconnect()}})}function gu(t){return new O(e=>{const{stop:n}=L(t,document,"securitypolicyviolation",r=>{e.notify(yu(r))});return n})}function bu(t){const{type:e,body:n}=t;return wi({type:n.id,message:`${e}: ${n.message}`,originalError:t,stack:Ii(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}function yu(t){const e=`'${t.blockedURI}' blocked by '${t.effectiveDirective}' directive`;return wi({type:t.effectiveDirective,message:`${Ue.cspViolation}: ${e}`,originalError:t,csp:{disposition:t.disposition},stack:Ii(t.effectiveDirective,t.originalPolicy?`${e} of the policy "${dr(t.originalPolicy,100,"...")}"`:"no policy",t.sourceFile,t.lineNumber,t.columnNumber)})}function wi(t){return{startClocks:U(),source:ge.REPORT,handling:"unhandled",...t}}function Ii(t,e,n,r,s){return n?Ke({name:t,message:e,stack:[{func:"?",url:n,line:r??void 0,column:s??void 0}]}):void 0}function Ai(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function xe(t){return Array.isArray(t)&&t.length>0}const tn=1/0,Su=Z;let Ie=null;const on=new Set;function vu(){on.forEach(t=>t())}function Se({expireDelay:t,maxEntries:e}){let n=[];Ie||(Ie=he(()=>vu(),Su));const r=()=>{const d=it()-t;for(;n.length>0&&n[n.length-1].endTime<d;)n.pop()};on.add(r);function s(d,f){const l={value:d,startTime:f,endTime:tn,remove:()=>{Ai(n,l)},close:p=>{l.endTime=p}};return e&&n.length>=e&&n.pop(),n.unshift(l),l}function i(d=tn,f={returnInactive:!1}){for(const l of n)if(l.startTime<=d){if(f.returnInactive||d<=l.endTime)return l.value;break}}function o(d){const f=n[0];f&&f.endTime===tn&&f.close(d)}function a(d=tn,f=0){const l=me(d,f);return n.filter(p=>p.startTime<=l&&d<=p.endTime).map(p=>p.value)}function c(){n=[]}function u(){on.delete(r),on.size===0&&Ie&&(bn(Ie),Ie=null)}return{add:s,find:i,closeActive:o,findAll:a,reset:c,stop:u}}const Eu="datadog-synthetics-public-id",Tu="datadog-synthetics-result-id",wu="datadog-synthetics-injects-rum";function Ri(){return ln?!1:!!(yt._DATADOG_SYNTHETICS_INJECTS_RUM||Rt(wu))}function Ci(){const t=window._DATADOG_SYNTHETICS_PUBLIC_ID||Rt(Eu);return typeof t=="string"?t:void 0}function Oi(){const t=window._DATADOG_SYNTHETICS_RESULT_ID||Rt(Tu);return typeof t=="string"?t:void 0}function ki(){return!!(Ci()&&Oi())}const Iu=Z,Au=Xt;function Ru(t,e,n,r){const s=new O,i=new O,o=Fa(t.sessionStoreStrategyType,t,e,n),a=Se({expireDelay:Au});if(o.renewObservable.subscribe(()=>{a.add(c(),it()),s.notify()}),o.expireObservable.subscribe(()=>{i.notify(),a.closeActive(it())}),o.expandOrRenewSession(),a.add(c(),ur().relative),_e(wt.SHORT_SESSION_INVESTIGATION)){const u=o.getSession();u&&Nu(t,u)}r.observable.subscribe(()=>{r.isGranted()?o.expandOrRenewSession():o.expire()}),Cu(t,()=>{r.isGranted()&&o.expandOrRenewSession()}),Ou(t,()=>o.expandSession()),ku(t,()=>o.restartSession());function c(){const u=o.getSession();return u?{id:u.id,trackingType:u[e],isReplayForced:!!u.forcedReplay,anonymousId:u.anonymousId}:(xu().catch(()=>{}),{id:"invalid",trackingType:Ys,isReplayForced:!1,anonymousId:void 0})}return{findSession:(u,d)=>a.find(u,d),renewObservable:s,expireObservable:i,sessionStateUpdateObservable:o.sessionStateUpdateObservable,expire:o.expire,updateSessionState:o.updateSessionState}}function Cu(t,e){const{stop:n}=rt(t,window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0})}function Ou(t,e){const n=()=>{document.visibilityState==="visible"&&e()},{stop:r}=L(t,document,"visibilitychange",n);he(n,Iu)}function ku(t,e){const{stop:n}=L(t,window,"resume",e,{capture:!0})}async function xu(){const t=ti();Dt("Unexpected session state",{session:t,isSyntheticsTest:ki(),createdTimestamp:t==null?void 0:t.created,expireTimestamp:t==null?void 0:t.expire,cookie:await xi(),currentDomain:`${window.location.protocol}//${window.location.hostname}`})}function Nu(t,e){if(!window.cookieStore||!e.created)return;const n=Number(e.created),r=J(),{stop:s}=L(t,cookieStore,"change",i);function i(o){const a=Ws(o.changed,u=>u.name===Nt);if(!a)return;const c=J()-n;if(c>14*Z)s();else{const u=hr(a.value);if(u.id&&u.id!==e.id){s();const d=J()-r;xi().then(f=>{Dt("Session cookie changed",{time:d,session_age:c,old:e,new:u,cookie:f})}).catch(dt)}}}}async function xi(){let t;return"cookieStore"in window?t=await window.cookieStore.getAll(Nt):t=document.cookie.split(/\s*;\s*/).filter(e=>e.startsWith(Nt)),{count:t.length,domain:Ks()||"undefined",...t}}function Lu(){let t="",e=0;return{isAsync:!1,get isEmpty(){return!t},write(n,r){const s=Vs(n);e+=s,t+=n,r&&r(s)},finish(n){n(this.finishSync())},finishSync(){const n={output:t,outputBytesCount:e,rawBytesCount:e,pendingData:""};return t="",e=0,n},estimateEncodedBytesCount(n){return n.length}}}class Mu{constructor(){this.callbacks={}}notify(e,n){const r=this.callbacks[e];r&&r.forEach(s=>s(n))}subscribe(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter(r=>n!==r)}}}}function zn(t,e,n){let r=0,s=!1;return{isLimitReached(){if(r===0&&$(()=>{r=0},Z),r+=1,r<=e||s)return s=!1,!1;if(r===e+1){s=!0;try{n({message:`Reached max number of ${t}s by minute: ${e}`,source:ge.AGENT,startClocks:U()})}finally{s=!1}}return!0}}}function Tr(t,e,n){return document.readyState===e||document.readyState==="complete"?(n(),{stop:R}):L(t,window,e==="complete"?"load":"DOMContentLoaded",n,{once:!0})}function Du(t,e){return new Promise(n=>{Tr(t,e,n)})}let Bn;const wr=new WeakMap;function Pu(t){return Bn||(Bn=Uu(t)),Bn}function Uu(t){return new O(e=>{const{stop:n}=nt(XMLHttpRequest.prototype,"open",Vu),{stop:r}=nt(XMLHttpRequest.prototype,"send",i=>{Fu(i,t,e)},{computeHandlingStack:!0}),{stop:s}=nt(XMLHttpRequest.prototype,"abort",zu);return()=>{n(),r(),s()}})}function Vu({target:t,parameters:[e,n]}){wr.set(t,{state:"open",method:String(e).toUpperCase(),url:fr(String(n))})}function Fu({target:t,parameters:[e],handlingStack:n},r,s){const i=wr.get(t);if(!i)return;const o=i;o.state="start",o.startClocks=U(),o.isAborted=!1,o.xhr=t,o.handlingStack=n,o.body=e;let a=!1;const{stop:c}=nt(t,"onreadystatechange",()=>{t.readyState===XMLHttpRequest.DONE&&u()}),u=()=>{if(d(),c(),a)return;a=!0;const f=i;f.state="complete",f.duration=D(o.startClocks.timeStamp,x()),f.status=t.status,s.notify(Le(f))},{stop:d}=L(r,t,"loadend",u);s.notify(o)}function zu({target:t}){const e=wr.get(t);e&&(e.isAborted=!0)}let $n;function Ni(){return $n||($n=Bu()),$n}function Bu(){return new O(t=>{if(!yt.fetch)return;const{stop:e}=nt(yt,"fetch",n=>$u(n,t),{computeHandlingStack:!0});return e})}function $u({parameters:t,onPostCall:e,handlingStack:n},r){const[s,i]=t;let o=i&&i.method;o===void 0&&s instanceof Request&&(o=s.method);const a=o!==void 0?String(o).toUpperCase():"GET",c=s instanceof Request?s.url:fr(String(s)),u=U(),d={state:"start",init:i,input:s,method:a,startClocks:u,url:c,handlingStack:n};r.notify(d),t[0]=d.input,t[1]=d.init,e(f=>Gu(r,f,d))}function Gu(t,e,n){const r=n;function s(i){r.state="resolve",Object.assign(r,i),t.notify(r)}e.then(S(i=>{s({response:i,responseType:i.type,status:i.status,isAborted:!1})}),S(i=>{var o,a;s({status:0,isAborted:((a=(o=r.init)===null||o===void 0?void 0:o.signal)===null||a===void 0?void 0:a.aborted)||i instanceof DOMException&&i.code===DOMException.ABORT_ERR,error:i})}))}function Li(t,e){if(window.requestIdleCallback&&window.cancelIdleCallback){const n=window.requestIdleCallback(S(t),e);return()=>window.cancelIdleCallback(n)}return Ku(t)}const Hu=50;function Ku(t){const e=J(),n=$(()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,Hu-(J()-e))})},0);return()=>tt(n)}const Wu=G,ju=30;function qu(){const t=[];function e(r){let s;if(r.didTimeout){const i=performance.now();s=()=>ju-(performance.now()-i)}else s=r.timeRemaining.bind(r);for(;s()>0&&t.length;)t.shift()();t.length&&n()}function n(){Li(e,{timeout:Wu})}return{push(r){t.push(r)===1&&n()},stop(){t.length=0}}}let Gn={};function Yu(t){const e=t.map(n=>(Gn[n]||(Gn[n]=Xu(n)),Gn[n]));return Bs(...e)}function Xu(t){return new O(e=>{const n=Et[t];return Et[t]=(...r)=>{n.apply(console,r);const s=fn("console error");Ot(()=>{e.notify(Ju(r,t,s))})},()=>{Et[t]=n}})}function Ju(t,e,n){const r=t.map(s=>Zu(s)).join(" ");if(e===_n.error){const s=t.find(Zt),i=_r({originalError:s,handlingStack:n,startClocks:U(),source:ge.CONSOLE,handling:"handled",nonErrorPrefix:"Provided",useFallbackStack:!1});return i.message=r,{api:e,message:r,handlingStack:n,error:i}}return{api:e,message:r,error:void 0,handlingStack:n}}function Zu(t){return typeof t=="string"?M(t):Zt(t)?ai(He(t)):Ge(M(t),void 0,2)}const Qu=500;function tl(){const t=[];return{add:s=>{t.push(s)>Qu&&t.splice(0,1)},remove:s=>{Ai(t,s)},drain:s=>{t.forEach(i=>i(s)),t.length=0}}}function el(t){const e=Jt(t)==="object";return e||E.error("Unsupported context:",t),e}function Hn(t,e,n){const r={...t};for(const[s,{required:i,type:o}]of Object.entries(e))o==="string"&&!jr(r[s])&&(r[s]=String(r[s])),i&&jr(r[s])&&E.warn(`The property ${s} of ${n} is required; context will not be sent to the intake.`);return r}function jr(t){return t==null||t===""}function En(t="",{propertiesConfig:e={}}={}){let n={};const r=new O,s={getContext:()=>Sr(n),setContext:i=>{el(i)?n=M(Hn(i,e,t)):s.clearContext(),r.notify()},setContextProperty:(i,o)=>{n=M(Hn({...n,[i]:o},e,t)),r.notify()},removeContextProperty:i=>{delete n[i],Hn(n,e,t),r.notify()},clearContext:()=>{n={},r.notify()},changeObservable:r};return s}function q(t,e,n,r){return S((...s)=>(r&&z({feature:r}),t()[e][n](...s)))}const nl="_dd_c",rl=[];function Ir(t,e,n,r){const s=sl(n,r);rl.push(L(t,window,"storage",({key:u})=>{s===u&&o()})),e.changeObservable.subscribe(a);const i=It(c(),e.getContext());Yt(i)||e.setContext(i);function o(){e.setContext(c())}function a(){localStorage.setItem(s,JSON.stringify(e.getContext()))}function c(){const u=localStorage.getItem(s);return u?JSON.parse(u):{}}}function sl(t,e){return`${nl}_${t}_${e}`}function il(t,e,n){const r=Mi();return e.storeContextsAcrossPages&&Ir(e,r,n,4),t.register(0,()=>{const s=r.getContext();return Yt(s)||!s.id?ot:{account:s}}),r}function Mi(){return En("account",{propertiesConfig:{id:{type:"string",required:!0},name:{type:"string"}}})}function ol(t,e,n,r){const s=Di();return e.storeContextsAcrossPages&&Ir(e,s,n,2),t.register(0,()=>({context:s.getContext()})),s}function Di(){return En("global context")}function al(t,e,n,r){const s=Pi();return e.storeContextsAcrossPages&&Ir(e,s,r,1),t.register(0,({eventType:i,startTime:o})=>{const a=s.getContext(),c=n.findTrackedSession(o);return c&&c.anonymousId&&!a.anonymous_id&&e.trackAnonymousUser&&(a.anonymous_id=c.anonymousId),Yt(a)?ot:{type:i,usr:a}}),t.register(1,({startTime:i})=>{var o;return{anonymous_id:(o=n.findTrackedSession(i))===null||o===void 0?void 0:o.anonymousId}}),s}function Pi(){return En("user",{propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}})}const B={userContext:"userContext",globalContext:"globalContext",accountContext:"accountContext"},Y={getContext:"getContext",setContext:"setContext",setContextProperty:"setContextProperty",removeContextProperty:"removeContextProperty",clearContext:"clearContext"};function cl(t,e,n){const r=t.getReader();let s=0;i();function i(){r.read().then(S(a=>{if(a.done){o();return}s+=a.value.length,s>n.bytesLimit?o():i()}),S(a=>e(a)))}function o(){r.cancel().catch(R),e(void 0,void 0,void 0)}}const X={DOCUMENT:"document",XHR:"xhr",BEACON:"beacon",FETCH:"fetch",CSS:"css",JS:"js",IMAGE:"image",FONT:"font",MEDIA:"media",OTHER:"other"},Tn={FETCH:X.FETCH,XHR:X.XHR},ul=500;function ll(t=lu){const e=new $s(ul),n=t().subscribe(r=>{e.notify({type:0,error:r})});return{observable:e,stop:()=>{n.unsubscribe()}}}function dl(){try{return new Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}const v={ACTION:"action",ERROR:"error",LONG_TASK:"long_task",VIEW:"view",RESOURCE:"resource",VITAL:"vital"},Ui={LONG_TASK:"long-task",LONG_ANIMATION_FRAME:"long-animation-frame"},Tt={INITIAL_LOAD:"initial_load",ROUTE_CHANGE:"route_change",BF_CACHE:"bf_cache"},wn={CLICK:"click",CUSTOM:"custom"},Ae={RAGE_CLICK:"rage_click",ERROR_CLICK:"error_click",DEAD_CLICK:"dead_click"},Ve={DURATION:"duration",OPERATION_STEP:"operation_step"};function fl(){return{vitalsByName:new Map,vitalsByReference:new WeakMap}}function pl(t,e,n){function r(o){return!e.wasInPageStateDuringPeriod("frozen",o.startClocks.relative,o.duration)}function s(o){r(o)&&t.notify(12,qr(o))}function i(o,a,c,u){if(!_e(wt.FEATURE_OPERATION_VITAL))return;const{operationKey:d,context:f,description:l}=c||{},p={name:o,type:Ve.OPERATION_STEP,operationKey:d,failureReason:u,stepType:a,startClocks:U(),context:M(f),description:l};t.notify(12,qr(p))}return{addOperationStepVital:i,addDurationVital:s,startDurationVital:(o,a={})=>Vi(n,o,a),stopDurationVital:(o,a={})=>{Fi(s,n,o,a)}}}function Vi({vitalsByName:t,vitalsByReference:e},n,r={}){const s={name:n,startClocks:U(),...r},i={__dd_vital_reference:!0};return t.set(n,s),e.set(i,s),i}function Fi(t,{vitalsByName:e,vitalsByReference:n},r,s={}){const i=typeof r=="string"?e.get(r):n.get(r);i&&(t(ml(i,i.startClocks,s,U())),typeof r=="string"?e.delete(r):n.delete(r))}function ml(t,e,n,r){var s;return{name:t.name,type:Ve.DURATION,startClocks:e,duration:D(e.timeStamp,r.timeStamp),context:It(t.context,n.context),description:(s=n.description)!==null&&s!==void 0?s:t.description}}function qr(t){const{startClocks:e,type:n,name:r,description:s,context:i}=t,o={id:W(),type:n,name:r,description:s,...n===Ve.DURATION?{duration:w(t.duration)}:{step_type:t.stepType,operation_key:t.operationKey,failure_reason:t.failureReason}};return{rawRumEvent:{date:e.timeStamp,vital:o,type:v.VITAL,context:i},startTime:e.relative,duration:n===Ve.DURATION?t.duration:void 0,domainContext:{}}}function zi(t,e,n){if(t)for(const r of t){const s=r[e];s&&s(n)}}const Yr=new Map;function Bi(t,e){if(e===100)return!0;if(e===0)return!1;const n=Yr.get(e);if(n&&t===n.sessionId)return n.decision;let r;return window.BigInt?r=hl(BigInt(`0x${t.split("-")[4]}`),e):r=Kt(e),Yr.set(e,{sessionId:t,decision:r}),r}function hl(t,e){const n=BigInt("1111111111111111111"),r=BigInt("0x10000000000000000"),s=t*n%r;return Number(s)<=e/100*Number(r)}function _l(){return Gi(64)}function $i(){return Gi(63)}function Gi(t){const e=crypto.getRandomValues(new Uint32Array(2));return t===63&&(e[e.length-1]>>>=1),{toString(n=10){let r=e[1],s=e[0],i="";do{const o=r%n*4294967296+s;r=Math.floor(r/n),s=Math.floor(o/n),i=(o%n).toString(n)+i}while(r||s);return i}}}function ee(t){return t.toString(16).padStart(16,"0")}function gl(t){const e=t;return Jt(e)==="object"&&Pe(e.match)&&Array.isArray(e.propagatorTypes)}function bl(t){t.status===0&&!t.isAborted&&(t.traceId=void 0,t.spanId=void 0,t.traceSampled=void 0)}function yl(t,e,n,r){return{clearTracingIfNeeded:bl,traceFetch:s=>Xr(t,s,e,n,r,i=>{var o;if(s.input instanceof Request&&!(!((o=s.init)===null||o===void 0)&&o.headers))s.input=new Request(s.input),Object.keys(i).forEach(a=>{s.input.headers.append(a,i[a])});else{s.init=Le(s.init);const a=[];s.init.headers instanceof Headers?s.init.headers.forEach((c,u)=>{a.push([u,c])}):Array.isArray(s.init.headers)?s.init.headers.forEach(c=>{a.push(c)}):s.init.headers&&Object.keys(s.init.headers).forEach(c=>{a.push([c,s.init.headers[c]])}),s.init.headers=a.concat(pr(i))}}),traceXhr:(s,i)=>Xr(t,s,e,n,r,o=>{Object.keys(o).forEach(a=>{i.setRequestHeader(a,o[a])})})}}function Xr(t,e,n,r,s,i){const o=n.findTrackedSession();if(!o)return;const a=t.allowedTracingUrls.find(d=>vn([d.match],e.url,!0));if(!a)return;const c=Bi(o.id,t.traceSampleRate);(c||t.traceContextInjection===rr.ALL)&&(e.traceSampled=c,e.traceId=_l(),e.spanId=$i(),i(Sl(e.traceId,e.spanId,e.traceSampled,o.id,a.propagatorTypes,r,s,t)))}function Sl(t,e,n,r,s,i,o,a){const c={};if(s.forEach(u=>{switch(u){case"datadog":{Object.assign(c,{"x-datadog-origin":"rum","x-datadog-parent-id":e.toString(),"x-datadog-sampling-priority":n?"1":"0","x-datadog-trace-id":t.toString()});break}case"tracecontext":{Object.assign(c,{traceparent:`00-0000000000000000${ee(t)}-${ee(e)}-0${n?"1":"0"}`,tracestate:`dd=s:${n?"1":"0"};o:rum`});break}case"b3":{Object.assign(c,{b3:`${ee(t)}-${ee(e)}-${n?"1":"0"}`});break}case"b3multi":{Object.assign(c,{"X-B3-TraceId":ee(t),"X-B3-SpanId":ee(e),"X-B3-Sampled":n?"1":"0"});break}}}),a.propagateTraceBaggage){const u={"session.id":r},d=i.getContext().id;typeof d=="string"&&(u["user.id"]=d);const f=o.getContext().id;typeof f=="string"&&(u["account.id"]=f);const l=Object.entries(u).map(([p,m])=>`${p}=${encodeURIComponent(m)}`).join(",");l&&(c.baggage=l)}return c}const Hi=["tracecontext","datadog"];function vl(t,e){var n,r,s,i,o,a,c;if(t.trackFeatureFlagsForEvents!==void 0&&!Array.isArray(t.trackFeatureFlagsForEvents)&&E.warn("trackFeatureFlagsForEvents should be an array"),!t.applicationId){E.error("Application ID is not configured, no RUM data will be collected.");return}if(!ce(t.sessionReplaySampleRate,"Session Replay")||!ce(t.traceSampleRate,"Trace"))return;if(t.excludedActivityUrls!==void 0&&!Array.isArray(t.excludedActivityUrls)){E.error("Excluded Activity Urls should be an array");return}const u=El(t);if(!u)return;const d=cu(t,e),f=wl(t);if(!d)return;const l=(n=t.sessionReplaySampleRate)!==null&&n!==void 0?n:0;return{applicationId:t.applicationId,actionNameAttribute:t.actionNameAttribute,sessionReplaySampleRate:l,startSessionReplayRecordingManually:t.startSessionReplayRecordingManually!==void 0?!!t.startSessionReplayRecordingManually:l===0,traceSampleRate:(r=t.traceSampleRate)!==null&&r!==void 0?r:100,rulePsr:Fe(t.traceSampleRate)?t.traceSampleRate/100:void 0,allowedTracingUrls:u,excludedActivityUrls:(s=t.excludedActivityUrls)!==null&&s!==void 0?s:[],workerUrl:t.workerUrl,compressIntakeRequests:!!t.compressIntakeRequests,trackUserInteractions:!!(!((i=t.trackUserInteractions)!==null&&i!==void 0)||i),trackViewsManually:!!t.trackViewsManually,trackResources:!!(!((o=t.trackResources)!==null&&o!==void 0)||o),trackLongTasks:!!(!((a=t.trackLongTasks)!==null&&a!==void 0)||a),trackBfcacheViews:!!t.trackBfcacheViews,trackEarlyRequests:!!t.trackEarlyRequests,subdomain:t.subdomain,defaultPrivacyLevel:un(ae,t.defaultPrivacyLevel)?t.defaultPrivacyLevel:ae.MASK,enablePrivacyForActionName:!!t.enablePrivacyForActionName,traceContextInjection:un(rr,t.traceContextInjection)?t.traceContextInjection:rr.SAMPLED,plugins:t.plugins||[],trackFeatureFlagsForEvents:t.trackFeatureFlagsForEvents||[],profilingSampleRate:(c=t.profilingSampleRate)!==null&&c!==void 0?c:0,propagateTraceBaggage:!!t.propagateTraceBaggage,allowedGraphQlUrls:f,...d}}function El(t){if(t.allowedTracingUrls===void 0)return[];if(!Array.isArray(t.allowedTracingUrls)){E.error("Allowed Tracing URLs should be an array");return}if(t.allowedTracingUrls.length!==0&&t.service===void 0){E.error("Service needs to be configured when tracing is enabled");return}const e=[];return t.allowedTracingUrls.forEach(n=>{Pe(n)?e.push({match:n,propagatorTypes:Hi}):gl(n)?e.push(n):E.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)}),e}function Tl(t){const e=new Set;return xe(t.allowedTracingUrls)&&t.allowedTracingUrls.forEach(n=>{Pe(n)?Hi.forEach(r=>e.add(r)):Jt(n)==="object"&&Array.isArray(n.propagatorTypes)&&n.propagatorTypes.forEach(r=>e.add(r))}),Array.from(e)}function wl(t){if(!t.allowedGraphQlUrls)return[];if(!Array.isArray(t.allowedGraphQlUrls))return E.warn("allowedGraphQlUrls should be an array"),[];const e=[];return t.allowedGraphQlUrls.forEach(n=>{Pe(n)?e.push({match:n,trackPayload:!1}):n&&typeof n=="object"&&"match"in n&&Pe(n.match)&&e.push({match:n.match,trackPayload:!!n.trackPayload})}),e}function Il(t){return xe(t)&&t.some(e=>typeof e=="object"&&"trackPayload"in e?!!e.trackPayload:!1)}function Al(t){var e;const n=uu(t);return{session_replay_sample_rate:t.sessionReplaySampleRate,start_session_replay_recording_manually:t.startSessionReplayRecordingManually,trace_sample_rate:t.traceSampleRate,trace_context_injection:t.traceContextInjection,propagate_trace_baggage:t.propagateTraceBaggage,action_name_attribute:t.actionNameAttribute,use_allowed_tracing_urls:xe(t.allowedTracingUrls),use_allowed_graph_ql_urls:xe(t.allowedGraphQlUrls),use_track_graph_ql_payload:Il(t.allowedGraphQlUrls),selected_tracing_propagators:Tl(t),default_privacy_level:t.defaultPrivacyLevel,enable_privacy_for_action_name:t.enablePrivacyForActionName,use_excluded_activity_urls:xe(t.excludedActivityUrls),use_worker_url:!!t.workerUrl,compress_intake_requests:t.compressIntakeRequests,track_views_manually:t.trackViewsManually,track_user_interactions:t.trackUserInteractions,track_resources:t.trackResources,track_long_task:t.trackLongTasks,track_bfcache_views:t.trackBfcacheViews,track_early_requests:t.trackEarlyRequests,plugins:(e=t.plugins)===null||e===void 0?void 0:e.map(r=>{var s;return{name:r.name,...(s=r.getConfigurationTelemetry)===null||s===void 0?void 0:s.call(r)}}),track_feature_flags_for_events:t.trackFeatureFlagsForEvents,remote_configuration_id:t.remoteConfigurationId,profiling_sample_rate:t.profilingSampleRate,use_remote_configuration_proxy:!!t.remoteConfigurationProxy,...n}}function Rl(t){const e=[];let n=0,r;const s={quote:void 0,escapeSequence:void 0};let i="";for(const o of t){if(r=Jr[n].find(a=>Ll[a](o,s)),!r)return[];if(s.escapeSequence!==void 0&&r!==12){if(!Pl(s.escapeSequence))return[];i+=Vl(s.escapeSequence),s.escapeSequence=void 0}Ml.includes(r)?i+=o:Dl.includes(r)&&i!==""?(e.push(i),i=""):r===12?s.escapeSequence=s.escapeSequence?`${s.escapeSequence}${o}`:o:r===8?s.quote=o:r===9&&(s.quote=void 0),n=r}return Jr[n].includes(1)?(i!==""&&e.push(i),e):[]}const Cl=/[a-zA-Z_$]/,Ol=/[a-zA-Z0-9_$]/,kl=/[0-9]/,xl=/[a-fA-F0-9]/,Nl=`'"`,Ll={0:()=>!1,1:()=>!1,2:t=>Cl.test(t),3:t=>Ol.test(t),4:t=>t===".",5:t=>t==="[",6:t=>t==="]",7:t=>kl.test(t),8:t=>Nl.includes(t),9:(t,e)=>t===e.quote,10:()=>!0,11:t=>t==="\\",12:(t,e)=>e.escapeSequence===void 0?`${e.quote}/\\bfnrtu`.includes(t):e.escapeSequence.startsWith("u")&&e.escapeSequence.length<5?xl.test(t):!1},Jr={0:[2,5],1:[],2:[3,4,5,1],3:[3,4,5,1],4:[2],5:[8,7],6:[4,5,1],7:[7,6],8:[11,9,10],9:[6],10:[11,9,10],11:[12],12:[12,11,9,10]},Ml=[2,3,7,10],Dl=[4,5,6];function Pl(t){return`"'/\\bfnrt`.includes(t)||t.startsWith("u")&&t.length===5}const Ul={'"':'"',"'":"'","/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function Vl(t){return t.startsWith("u")?String.fromCharCode(parseInt(t.slice(1),16)):Ul[t]}const Fl="v1",zl=["applicationId","service","env","version","sessionSampleRate","sessionReplaySampleRate","defaultPrivacyLevel","enablePrivacyForActionName","traceSampleRate","trackSessionAcrossSubdomains","allowedTracingUrls","allowedTrackingOrigins"];async function Bl(t,e){let n;const r=Gl(),s=await jl(t);return s.ok?(r.increment("fetch","success"),n=$l(t,s.value,e,r)):(r.increment("fetch","failure"),E.error(s.error)),We("remote configuration metrics",{metrics:r.get()}),n}function $l(t,e,n,r){const s={...t};return zl.forEach(l=>{l in e&&(s[l]=i(e[l]))}),Object.keys(n).forEach(l=>{e[l]!==void 0&&o(n[l],e[l])}),s;function i(l){if(Array.isArray(l))return l.map(i);if(Hl(l)){if(Kl(l)){const p=l.rcSerializedType;switch(p){case"string":return l.value;case"regex":return Ki(l.value);case"dynamic":return a(l);default:E.error(`Unsupported remote configuration: "rcSerializedType": "${p}"`);return}}return Fs(l,i)}return l}function o(l,p){p.forEach(({key:m,value:h})=>{l.setContextProperty(m,i(h))})}function a(l){const p=l.strategy;let m;switch(p){case"cookie":m=c(l);break;case"dom":m=u(l);break;case"js":m=f(l);break;default:E.error(`Unsupported remote configuration: "strategy": "${p}"`);return}const h=l.extractor;return h!==void 0&&typeof m=="string"?Wl(h,m):m}function c({name:l}){const p=Sn(l);return r.increment("cookie",p!==void 0?"success":"missing"),p}function u({selector:l,attribute:p}){let m;try{m=document.querySelector(l)}catch{E.error(`Invalid selector in the remote configuration: '${l}'`),r.increment("dom","failure");return}if(!m){r.increment("dom","missing");return}if(d(m,p)){E.error(`Forbidden element selected by the remote configuration: '${l}'`),r.increment("dom","failure");return}const h=p!==void 0?m.getAttribute(p):m.textContent;if(h===null){r.increment("dom","missing");return}return r.increment("dom","success"),h}function d(l,p){return l.getAttribute("type")==="password"&&p==="value"}function f({path:l}){let p=window;const m=Rl(l);if(m.length===0){E.error(`Invalid JSON path in the remote configuration: '${l}'`),r.increment("js","failure");return}for(const h of m){if(!(h in p)){r.increment("js","missing");return}try{p=p[h]}catch(g){E.error(`Error accessing: '${l}'`,g),r.increment("js","failure");return}}return r.increment("js","success"),p}}function Gl(){const t={fetch:{}};return{get:()=>t,increment:(e,n)=>{t[e]||(t[e]={}),t[e][n]||(t[e][n]=0),t[e][n]=t[e][n]+1}}}function Hl(t){return typeof t=="object"&&t!==null}function Kl(t){return"rcSerializedType"in t}function Ki(t){try{return new RegExp(t)}catch{E.error(`Invalid regex in the remote configuration: '${t}'`)}}function Wl(t,e){const n=Ki(t.value);if(n===void 0)return;const r=n.exec(e);if(r===null)return;const[s,i]=r;return i||s}async function jl(t){let e;try{e=await fetch(ql(t))}catch{e=void 0}if(!e||!e.ok)return{ok:!1,error:new Error("Error fetching the remote configuration.")};const n=await e.json();return n.rum?{ok:!0,value:n.rum}:{ok:!1,error:new Error("No remote configuration for RUM.")}}function ql(t){return t.remoteConfigurationProxy?t.remoteConfigurationProxy:`https://sdk-configuration.${Ei("rum",t)}/${Fl}/${encodeURIComponent(t.remoteConfigurationId)}.json`}function Yl({ignoreInitIfSyntheticsWillInjectRum:t=!0,startDeflateWorker:e},n,r,s){const i=tl(),o=Di();Kn(o,B.globalContext,i);const a=Pi();Kn(a,B.userContext,i);const c=Mi();Kn(c,B.accountContext,i);let u,d,f,l;const p=n.observable.subscribe(h),m={};function h(){if(!f||!l||!n.isGranted())return;p.unsubscribe();let b;if(l.trackViewsManually){if(!u)return;i.remove(u.callback),b=u.options}const T=s(l,d,b);i.drain(T)}function g(b,T){const _=jt();if(_&&(b=Xl(b)),f=b,Yc(Al(b)),l){Ti("DD_RUM",b);return}const C=vl(b,T);if(C){if(!_&&!C.sessionStoreStrategyType){E.warn("No storage available for session. We will not send any data.");return}C.compressIntakeRequests&&!_&&e&&(d=e(C,"Datadog RUM",R),!d)||(l=C,Ni().subscribe(R),n.tryToInit(C.trackingConsent),h())}}const I=b=>{i.add(T=>T.addDurationVital(b))};return{init(b,T,_){if(!b){E.error("Missing configuration");return}pc(b.enableExperimentalFeatures),f=b,!(t&&Ri())&&(zi(b.plugins,"onInit",{initConfiguration:b,publicApi:T}),b.remoteConfigurationId?Bl(b,{user:a,context:o}).then(C=>{C&&g(C,_)}).catch(dt):g(b,_))},get initConfiguration(){return f},getInternalContext:R,stopSession:R,addTiming(b,T=x()){i.add(_=>_.addTiming(b,T))},startView(b,T=U()){const _=C=>{C.startView(b,T)};i.add(_),u||(u={options:b,callback:_},h())},setViewName(b){i.add(T=>T.setViewName(b))},setViewContext(b){i.add(T=>T.setViewContext(b))},setViewContextProperty(b,T){i.add(_=>_.setViewContextProperty(b,T))},getViewContext:()=>m,globalContext:o,userContext:a,accountContext:c,addAction(b){i.add(T=>T.addAction(b))},addError(b){i.add(T=>T.addError(b))},addFeatureFlagEvaluation(b,T){i.add(_=>_.addFeatureFlagEvaluation(b,T))},startDurationVital(b,T){return Vi(r,b,T)},stopDurationVital(b,T){Fi(I,r,b,T)},addDurationVital:I,addOperationStepVital:(b,T,_,C)=>{i.add(Ut=>Ut.addOperationStepVital(M(b),T,M(_),M(C)))}}}function Xl(t){var e,n;return{...t,applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100,defaultPrivacyLevel:(e=t.defaultPrivacyLevel)!==null&&e!==void 0?e:(n=be())===null||n===void 0?void 0:n.getPrivacyLevel()}}function Kn(t,e,n){t.changeObservable.subscribe(()=>{const r=t.getContext();n.add(s=>s[e].setContext(r))})}function Jl(t,e,n,r={}){const s=za(),i=fl(),o=ll().observable;let a=Yl(r,s,i,(f,l,p)=>{const m=t(f,e,n,p,l&&r.createDeflateEncoder?h=>r.createDeflateEncoder(f,l,h):Lu,s,i,o,r.sdkName);return e.onRumStart(m.lifeCycle,f,m.session,m.viewHistory,l,m.telemetry),n.onRumStart(m.lifeCycle,m.hooks,f,m.session,m.viewHistory),a=Zl(a,m),zi(f.plugins,"onRumStart",{strategy:a,addEvent:m.addEvent}),m});const c=()=>a,u=S(f=>{const l=typeof f=="object"?f:{name:f};a.startView(l),z({feature:"start-view"})}),d=pu({init:f=>{const l=new Error().stack;Ot(()=>a.init(f,d,l))},setTrackingConsent:S(f=>{s.update(f),z({feature:"set-tracking-consent",tracking_consent:f})}),setViewName:S(f=>{a.setViewName(f),z({feature:"set-view-name"})}),setViewContext:S(f=>{a.setViewContext(f),z({feature:"set-view-context"})}),setViewContextProperty:S((f,l)=>{a.setViewContextProperty(f,l),z({feature:"set-view-context-property"})}),getViewContext:S(()=>(z({feature:"set-view-context-property"}),a.getViewContext())),getInternalContext:S(f=>a.getInternalContext(f)),getInitConfiguration:S(()=>Sr(a.initConfiguration)),addAction:(f,l)=>{const p=fn("action");Ot(()=>{a.addAction({name:M(f),context:M(l),startClocks:U(),type:wn.CUSTOM,handlingStack:p}),z({feature:"add-action"})})},addError:(f,l)=>{const p=fn("error");Ot(()=>{a.addError({error:f,handlingStack:p,context:M(l),startClocks:U()}),z({feature:"add-error"})})},addTiming:S((f,l)=>{a.addTiming(M(f),l)}),setGlobalContext:q(c,B.globalContext,Y.setContext,"set-global-context"),getGlobalContext:q(c,B.globalContext,Y.getContext,"get-global-context"),setGlobalContextProperty:q(c,B.globalContext,Y.setContextProperty,"set-global-context-property"),removeGlobalContextProperty:q(c,B.globalContext,Y.removeContextProperty,"remove-global-context-property"),clearGlobalContext:q(c,B.globalContext,Y.clearContext,"clear-global-context"),setUser:q(c,B.userContext,Y.setContext,"set-user"),getUser:q(c,B.userContext,Y.getContext,"get-user"),setUserProperty:q(c,B.userContext,Y.setContextProperty,"set-user-property"),removeUserProperty:q(c,B.userContext,Y.removeContextProperty,"remove-user-property"),clearUser:q(c,B.userContext,Y.clearContext,"clear-user"),setAccount:q(c,B.accountContext,Y.setContext,"set-account"),getAccount:q(c,B.accountContext,Y.getContext,"get-account"),setAccountProperty:q(c,B.accountContext,Y.setContextProperty,"set-account-property"),removeAccountProperty:q(c,B.accountContext,Y.removeContextProperty,"remove-account-property"),clearAccount:q(c,B.accountContext,Y.clearContext,"clear-account"),startView:u,stopSession:S(()=>{a.stopSession(),z({feature:"stop-session"})}),addFeatureFlagEvaluation:S((f,l)=>{a.addFeatureFlagEvaluation(M(f),M(l)),z({feature:"add-feature-flag-evaluation"})}),getSessionReplayLink:S(()=>e.getSessionReplayLink()),startSessionReplayRecording:S(f=>{e.start(f),z({feature:"start-session-replay-recording",force:f&&f.force})}),stopSessionReplayRecording:S(()=>e.stop()),addDurationVital:S((f,l)=>{z({feature:"add-duration-vital"}),a.addDurationVital({name:M(f),type:Ve.DURATION,startClocks:Qo(l.startTime),duration:l.duration,context:M(l&&l.context),description:M(l&&l.description)})}),startDurationVital:S((f,l)=>(z({feature:"start-duration-vital"}),a.startDurationVital(M(f),{context:M(l&&l.context),description:M(l&&l.description)}))),stopDurationVital:S((f,l)=>{z({feature:"stop-duration-vital"}),a.stopDurationVital(typeof f=="string"?M(f):f,{context:M(l&&l.context),description:M(l&&l.description)})}),startFeatureOperation:S((f,l)=>{z({feature:"add-operation-step-vital",action_type:"start"}),a.addOperationStepVital(f,"start",l)}),succeedFeatureOperation:S((f,l)=>{z({feature:"add-operation-step-vital",action_type:"succeed"}),a.addOperationStepVital(f,"end",l)}),failFeatureOperation:S((f,l,p)=>{z({feature:"add-operation-step-vital",action_type:"fail"}),a.addOperationStepVital(f,"end",p,l)})});return d}function Zl(t,e){return{init:n=>{Ti("DD_RUM",n)},initConfiguration:t.initConfiguration,...e}}function Ql(){const t=Wi();return new O(e=>{if(!t)return;const n=new t(S(r=>e.notify(r)));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),()=>n.disconnect()})}function Wi(){let t;const e=window;if(e.Zone&&(t=xt(e,"MutationObserver"),e.MutationObserver&&t===e.MutationObserver)){const n=new e.MutationObserver(R),r=xt(n,"originalInstance");t=r&&r.constructor}return t||(t=e.MutationObserver),t}function td(){const t=new O,{stop:e}=nt(window,"open",()=>t.notify());return{observable:t,stop:e}}function ed(t,e,n,r,s){return{get:i=>{const o=n.findView(i),a=s.findUrl(i),c=e.findTrackedSession(i);if(c&&o&&a){const u=r.findActionId(i);return{application_id:t,session_id:c.id,user_action:u?{id:u}:void 0,view:{id:o.id,name:o.name,referrer:a.referrer,url:a.url}}}}}}const nd=Mu,rd=Xt;function sd(t){const e=Se({expireDelay:rd});t.subscribe(1,r=>{e.add(n(r),r.startClocks.relative)}),t.subscribe(6,({endClocks:r})=>{e.closeActive(r.relative)}),t.subscribe(3,r=>{const s=e.find(r.startClocks.relative);s&&(r.name&&(s.name=r.name),r.context&&(s.context=r.context),s.sessionIsActive=r.sessionIsActive)}),t.subscribe(10,()=>{e.reset()});function n(r){return{service:r.service,version:r.version,context:r.context,id:r.id,name:r.name,startClocks:r.startClocks}}return{findView:r=>e.find(r),stop:()=>{e.stop()}}}const ji="initial_document",id=[[X.DOCUMENT,t=>ji===t],[X.XHR,t=>t==="xmlhttprequest"],[X.FETCH,t=>t==="fetch"],[X.BEACON,t=>t==="beacon"],[X.CSS,(t,e)=>/\.css$/i.test(e)],[X.JS,(t,e)=>/\.js$/i.test(e)],[X.IMAGE,(t,e)=>["image","img","icon"].includes(t)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(e)!==null],[X.FONT,(t,e)=>/\.(woff|eot|woff2|ttf)$/i.exec(e)!==null],[X.MEDIA,(t,e)=>["audio","video"].includes(t)||/\.(mp3|mp4)$/i.exec(e)!==null]];function od(t){const e=t.name;if(!da(e))return X.OTHER;const n=fa(e);for(const[r,s]of id)if(s(t.initiatorType,n))return r;return X.OTHER}function Zr(...t){for(let e=1;e<t.length;e+=1)if(t[e-1]>t[e])return!1;return!0}function qi(t){return t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch"}function ad(t){const{duration:e,startTime:n,responseEnd:r}=t;return e===0&&n<r?D(n,r):e}function cd(t){if(!Xi(t))return;const{startTime:e,fetchStart:n,workerStart:r,redirectStart:s,redirectEnd:i,domainLookupStart:o,domainLookupEnd:a,connectStart:c,secureConnectionStart:u,connectEnd:d,requestStart:f,responseStart:l,responseEnd:p}=t,m={download:zt(e,l,p),first_byte:zt(e,f,l)};return 0<r&&r<n&&(m.worker=zt(e,r,n)),n<d&&(m.connect=zt(e,c,d),c<=u&&u<=d&&(m.ssl=zt(e,u,d))),n<a&&(m.dns=zt(e,o,a)),e<i&&(m.redirect=zt(e,s,i)),m}function Yi(t){return t.duration>=0}function Xi(t){const e=Zr(t.startTime,t.fetchStart,t.domainLookupStart,t.domainLookupEnd,t.connectStart,t.connectEnd,t.requestStart,t.responseStart,t.responseEnd),n=ud(t)?Zr(t.startTime,t.redirectStart,t.redirectEnd,t.fetchStart):!0;return e&&n}function ud(t){return t.redirectEnd>t.startTime}function zt(t,e,n){if(t<=e&&e<=n)return{duration:w(D(e,n)),start:w(D(t,e))}}function ld(t){return t.nextHopProtocol===""?void 0:t.nextHopProtocol}function dd(t){return t.deliveryType===""?"other":t.deliveryType}function fd(t){if(t.startTime<t.responseStart){const{encodedBodySize:e,decodedBodySize:n,transferSize:r}=t;return{size:n,encoded_body_size:e,decoded_body_size:n,transfer_size:r}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function Ar(t){return t&&(!ou(t)||_e(wt.TRACK_INTAKE_REQUESTS))}const pd=/data:(.+)?(;base64)?,/g,md=24e3;function Ji(t,e=md){if(t.length<=e||!t.startsWith("data:"))return t;const n=t.substring(0,100).match(pd);return n?`${n[0]}[...]`:t}let Qr=1;function hd(t,e,n,r,s){const i=yl(e,n,r,s);_d(t,e,i),gd(t,i)}function _d(t,e,n){const r=Pu(e).subscribe(s=>{const i=s;if(Ar(i.url))switch(i.state){case"start":n.traceXhr(i,i.xhr),i.requestIndex=Zi(),t.notify(7,{requestIndex:i.requestIndex,url:i.url});break;case"complete":n.clearTracingIfNeeded(i),t.notify(8,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:Tn.XHR,url:i.url,xhr:i.xhr,isAborted:i.isAborted,handlingStack:i.handlingStack,body:i.body});break}});return{stop:()=>r.unsubscribe()}}function gd(t,e){const n=Ni().subscribe(r=>{const s=r;if(Ar(s.url))switch(s.state){case"start":e.traceFetch(s),s.requestIndex=Zi(),t.notify(7,{requestIndex:s.requestIndex,url:s.url});break;case"resolve":bd(s,i=>{var o;e.clearTracingIfNeeded(s),t.notify(8,{duration:i,method:s.method,requestIndex:s.requestIndex,responseType:s.responseType,spanId:s.spanId,startClocks:s.startClocks,status:s.status,traceId:s.traceId,traceSampled:s.traceSampled,type:Tn.FETCH,url:s.url,response:s.response,init:s.init,input:s.input,isAborted:s.isAborted,handlingStack:s.handlingStack,body:(o=s.init)===null||o===void 0?void 0:o.body})});break}});return{stop:()=>n.unsubscribe()}}function Zi(){const t=Qr;return Qr+=1,t}function bd(t,e){const n=t.response&&Rc(t.response);!n||!n.body?e(D(t.startClocks.timeStamp,x())):cl(n.body,()=>{e(D(t.startClocks.timeStamp,x()))},{bytesLimit:Number.POSITIVE_INFINITY})}function Qi(t){return Fe(t)&&t<0?void 0:t}function to({lifeCycle:t,isChildEvent:e,onChange:n=R}){const r={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},s=t.subscribe(13,i=>{var o;if(!(i.type==="view"||i.type==="vital"||!e(i)))switch(i.type){case v.ERROR:r.errorCount+=1,n();break;case v.ACTION:r.actionCount+=1,i.action.frustration&&(r.frustrationCount+=i.action.frustration.type.length),n();break;case v.LONG_TASK:r.longTaskCount+=1,n();break;case v.RESOURCE:!((o=i._dd)===null||o===void 0)&&o.discarded||(r.resourceCount+=1,n());break}});return{stop:()=>{s.unsubscribe()},eventCounts:r}}function yd(t,e){const n=J();let r=!1;const{stop:s}=rt(t,window,["click","mousedown","keydown","touchstart","pointerdown"],a=>{if(!a.cancelable)return;const c={entryType:"first-input",processingStart:it(),processingEnd:it(),startTime:a.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:()=>({})};a.type==="pointerdown"?i(t,c):o(c)},{passive:!0,capture:!0});return{stop:s};function i(a,c){rt(a,window,["pointerup","pointercancel"],u=>{u.type==="pointerup"&&o(c)},{once:!0})}function o(a){if(!r){r=!0,s();const c=a.processingStart-a.startTime;c>=0&&c<J()-n&&e(a)}}}var k;(function(t){t.EVENT="event",t.FIRST_INPUT="first-input",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.LAYOUT_SHIFT="layout-shift",t.LONG_TASK="longtask",t.LONG_ANIMATION_FRAME="long-animation-frame",t.NAVIGATION="navigation",t.PAINT="paint",t.RESOURCE="resource",t.VISIBILITY_STATE="visibility-state"})(k||(k={}));function St(t,e){return new O(n=>{if(!window.PerformanceObserver)return;const r=c=>{const u=Ed(c);u.length>0&&n.notify(u)};let s,i=!0;const o=new PerformanceObserver(S(c=>{i?s=$(()=>r(c.getEntries())):r(c.getEntries())}));try{o.observe(e)}catch{if([k.RESOURCE,k.NAVIGATION,k.LONG_TASK,k.PAINT].includes(e.type)){e.buffered&&(s=$(()=>r(performance.getEntriesByType(e.type))));try{o.observe({entryTypes:[e.type]})}catch{return}}}i=!1,Sd(t);let a;return!Pt(k.FIRST_INPUT)&&e.type===k.FIRST_INPUT&&({stop:a}=yd(t,c=>{r([c])})),()=>{o.disconnect(),a&&a(),tt(s)}})}let Re;function Sd(t){return!Re&&vd()&&"addEventListener"in performance&&(Re=L(t,performance,"resourcetimingbufferfull",()=>{performance.clearResourceTimings()})),()=>{Re==null||Re.stop()}}function vd(){return window.performance!==void 0&&"getEntries"in performance}function Pt(t){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.includes(t)}function Ed(t){return t.filter(e=>!Td(e))}function Td(t){return t.entryType===k.RESOURCE&&(!Ar(t.name)||!Yi(t))}function sr(t){return t.nodeType===Node.TEXT_NODE}function wd(t){return t.nodeType===Node.COMMENT_NODE}function At(t){return t.nodeType===Node.ELEMENT_NODE}function In(t){return At(t)&&!!t.shadowRoot}function Rr(t){const e=t;return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&At(e.host)}function Id(t){return t.childNodes.length>0||In(t)}function eo(t,e){let n=t.firstChild;for(;n;)e(n),n=n.nextSibling;In(t)&&e(t.shadowRoot)}function An(t){return Rr(t)?t.host:t.parentNode}const no=100,Ad=100,ts="data-dd-excluded-activity-mutations";function Cr(t,e,n,r,s,i){const o=Cd(t,e,n,r);return Rd(o,s,i)}function Rd(t,e,n){let r,s=!1;const i=$(S(()=>u({hadActivity:!1})),no),o=n!==void 0?$(S(()=>u({hadActivity:!0,end:x()})),n):void 0,a=t.subscribe(({isBusy:d})=>{tt(i),tt(r);const f=x();d||(r=$(S(()=>u({hadActivity:!0,end:f})),Ad))}),c=()=>{s=!0,tt(i),tt(r),tt(o),a.unsubscribe()};function u(d){s||(c(),e(d))}return{stop:c}}function Cd(t,e,n,r){return new O(s=>{const i=[];let o,a=0;return i.push(e.subscribe(u=>{u.every(Od)||c()}),n.subscribe(c),St(r,{type:k.RESOURCE}).subscribe(u=>{u.some(d=>!Wn(r,d.name))&&c()}),t.subscribe(7,u=>{Wn(r,u.url)||(o===void 0&&(o=u.requestIndex),a+=1,c())}),t.subscribe(8,u=>{Wn(r,u.url)||o===void 0||u.requestIndex<o||(a-=1,c())})),()=>{i.forEach(u=>u.unsubscribe())};function c(){s.notify({isBusy:a>0})}})}function Wn(t,e){return vn(t.excludedActivityUrls,e)}function Od(t){const e=t.type==="characterData"?t.target.parentElement:t.target;return!!(e&&At(e)&&e.matches(`[${ts}], [${ts}] *`))}const Rn="data-dd-action-name",kd="Masked Element",ro=[Rn,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],xd=[io,Ld],Nd=[io,Md,Dd];function je(t,e){if(!t.isConnected)return;let n,r=t;for(;r&&r.nodeName!=="HTML";){const s=es(r,xd,Ud,e,n);if(s)return s;n=es(r,Nd,Vd,e,n)||Cn(Pd(r),n),r=r.parentElement}return n}function so(t){return/[0-9]/.test(t)}function Ld(t){if(t.id&&!so(t.id))return`#${CSS.escape(t.id)}`}function Md(t){if(t.tagName==="BODY")return;const e=t.classList;for(let n=0;n<e.length;n+=1){const r=e[n];if(!so(r))return`${CSS.escape(t.tagName)}.${CSS.escape(r)}`}}function Dd(t){return CSS.escape(t.tagName)}function io(t,e){if(e){const r=n(e);if(r)return r}for(const r of ro){const s=n(r);if(s)return s}function n(r){if(t.hasAttribute(r))return`${CSS.escape(t.tagName)}[${r}="${CSS.escape(t.getAttribute(r))}"]`}}function Pd(t){let e=t.parentElement.firstElementChild,n=1;for(;e&&e!==t;)e.tagName===t.tagName&&(n+=1),e=e.nextElementSibling;return`${CSS.escape(t.tagName)}:nth-of-type(${n})`}function es(t,e,n,r,s){for(const i of e){const o=i(t,r);if(o&&n(t,o,s))return Cn(o,s)}}function Ud(t,e,n){return t.ownerDocument.querySelectorAll(Cn(e,n)).length===1}function Vd(t,e,n){let r;if(n===void 0)r=o=>o.matches(e);else{const o=Cn(`${e}:scope`,n);r=a=>a.querySelector(o)!==null}let i=t.parentElement.firstElementChild;for(;i;){if(i!==t&&r(i))return!1;i=i.nextElementSibling}return!0}function Cn(t,e){return e?`${t}>${e}`:t}const y={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:ae.ALLOW,MASK:ae.MASK,MASK_USER_INPUT:ae.MASK_USER_INPUT,MASK_UNLESS_ALLOWLISTED:ae.MASK_UNLESS_ALLOWLISTED},Or="data-dd-privacy",Fd="hidden",zd="dd-privacy-",Ct="***",ns="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",Bd={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0},$d="x";function Ht(t){return`[${Or}="${t}"], .${zd}${t}`}function pt(t,e,n){if(n&&n.has(t))return n.get(t);const r=An(t),s=r?pt(r,e,n):e,i=ao(t),o=oo(i,s);return n&&n.set(t,o),o}function oo(t,e){switch(e){case y.HIDDEN:case y.IGNORE:return e}switch(t){case y.ALLOW:case y.MASK:case y.MASK_USER_INPUT:case y.MASK_UNLESS_ALLOWLISTED:case y.HIDDEN:case y.IGNORE:return t;default:return e}}function ao(t){if(At(t)){if(t.tagName==="BASE")return y.ALLOW;if(t.tagName==="INPUT"){const e=t;if(e.type==="password"||e.type==="email"||e.type==="tel"||e.type==="hidden")return y.MASK;const n=e.getAttribute("autocomplete");if(n&&(n.startsWith("cc-")||n.endsWith("-password")))return y.MASK}if(t.matches(Ht(y.HIDDEN)))return y.HIDDEN;if(t.matches(Ht(y.MASK)))return y.MASK;if(t.matches(Ht(y.MASK_UNLESS_ALLOWLISTED)))return y.MASK_UNLESS_ALLOWLISTED;if(t.matches(Ht(y.MASK_USER_INPUT)))return y.MASK_USER_INPUT;if(t.matches(Ht(y.ALLOW)))return y.ALLOW;if(Gd(t))return y.IGNORE}}function qe(t,e){switch(e){case y.MASK:case y.HIDDEN:case y.IGNORE:return!0;case y.MASK_UNLESS_ALLOWLISTED:return sr(t)?en(t.parentNode)?!0:!lo(t.textContent||""):en(t);case y.MASK_USER_INPUT:return sr(t)?en(t.parentNode):en(t);default:return!1}}function en(t){if(!t||t.nodeType!==t.ELEMENT_NODE)return!1;const e=t;if(e.tagName==="INPUT")switch(e.type){case"button":case"color":case"reset":case"submit":return!1}return!!Bd[e.tagName]}const co=t=>t.replace(/\S/g,$d);function uo(t,e,n){var r;const s=(r=t.parentElement)===null||r===void 0?void 0:r.tagName;let i=t.textContent||"";if(e&&!i.trim())return;const o=n;if(s==="SCRIPT")i=Ct;else if(o===y.HIDDEN)i=Ct;else if(qe(t,o))if(s==="DATALIST"||s==="SELECT"||s==="OPTGROUP"){if(!i.trim())return}else s==="OPTION"?i=Ct:o===y.MASK_UNLESS_ALLOWLISTED?i=Hd(i):i=co(i);return i}function Gd(t){if(t.nodeName==="SCRIPT")return!0;if(t.nodeName==="LINK"){const n=e("rel");return/preload|prefetch/i.test(n)&&e("as")==="script"||n==="shortcut icon"||n==="icon"}if(t.nodeName==="META"){const n=e("name"),r=e("rel"),s=e("property");return/^msapplication-tile(image|color)$/.test(n)||n==="application-name"||r==="icon"||r==="apple-touch-icon"||r==="shortcut icon"||n==="keywords"||n==="description"||/^(og|twitter|fb):/.test(s)||/^(og|twitter):/.test(n)||n==="pinterest"||n==="robots"||n==="googlebot"||n==="bingbot"||t.hasAttribute("http-equiv")||n==="author"||n==="generator"||n==="framework"||n==="publisher"||n==="progid"||/^article:/.test(s)||/^product:/.test(s)||n==="google-site-verification"||n==="yandex-verification"||n==="csrf-token"||n==="p:domain_verify"||n==="verify-v1"||n==="verification"||n==="shopify-checkout-api-token"}function e(n){return(t.getAttribute(n)||"").toLowerCase()}return!1}function lo(t){var e;return!t||!t.trim()?!0:((e=window.$DD_ALLOW)===null||e===void 0?void 0:e.has(t.toLocaleLowerCase()))||!1}function Hd(t,e){return lo(t)?t:e||co(t)}const fo=G,Kd=100;function Wd(t,e){const n=[];let r=0,s;i(t);function i(c){c.stopObservable.subscribe(o),n.push(c),tt(s),s=$(a,fo)}function o(){r===1&&n.every(c=>c.isStopped())&&(r=2,e(n))}function a(){tt(s),r===0&&(r=1,o())}return{tryAppend:c=>r!==0?!1:n.length>0&&!jd(n[n.length-1].event,c.event)?(a(),!1):(i(c),!0),stop:()=>{a()}}}function jd(t,e){return t.target===e.target&&qd(t,e)<=Kd&&t.timeStamp-e.timeStamp<=fo}function qd(t,e){return Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2))}function Yd(t,e,n=y.ALLOW){const{actionNameAttribute:r}=e,s=rs(t,Rn)||r&&rs(t,r);return s?{name:s,nameSource:"custom_attribute"}:n===y.MASK?{name:kd,nameSource:"mask_placeholder"}:ss(t,Xd,e)||ss(t,Jd,e)||{name:"",nameSource:"blank"}}function rs(t,e){const n=t.closest(`[${e}]`);if(!n)return;const r=n.getAttribute(e);return mo(po(r.trim()))}const Xd=[(t,e)=>{if("labels"in t&&t.labels&&t.labels.length>0)return an(t.labels[0],e)},t=>{if(t.nodeName==="INPUT"){const e=t,n=e.getAttribute("type");if(n==="button"||n==="submit"||n==="reset")return{name:e.value,nameSource:"text_content"}}},(t,e)=>{if(t.nodeName==="BUTTON"||t.nodeName==="LABEL"||t.getAttribute("role")==="button")return an(t,e)},t=>Ce(t,"aria-label"),(t,e)=>{const n=t.getAttribute("aria-labelledby");if(n)return{name:n.split(/\s+/).map(r=>Qd(t,r)).filter(r=>!!r).map(r=>ho(r,e)).join(" "),nameSource:"text_content"}},t=>Ce(t,"alt"),t=>Ce(t,"name"),t=>Ce(t,"title"),t=>Ce(t,"placeholder"),(t,e)=>{if("options"in t&&t.options.length>0)return an(t.options[0],e)}],Jd=[(t,e)=>an(t,e)],Zd=10;function ss(t,e,n){let r=t,s=0;for(;s<=Zd&&r&&r.nodeName!=="BODY"&&r.nodeName!=="HTML"&&r.nodeName!=="HEAD";){for(const i of e){const o=i(r,n);if(o){const{name:a,nameSource:c}=o,u=a&&a.trim();if(u)return{name:mo(po(u)),nameSource:c}}}if(r.nodeName==="FORM")break;r=r.parentElement,s+=1}}function po(t){return t.replace(/\s+/g," ")}function mo(t){return t.length>100?`${dr(t,100)} [...]`:t}function Qd(t,e){return t.ownerDocument?t.ownerDocument.getElementById(e):null}function Ce(t,e){return{name:t.getAttribute(e)||"",nameSource:"standard_attribute"}}function an(t,e){return{name:ho(t,e)||"",nameSource:"text_content"}}function ho(t,e){if(t.isContentEditable)return;const{enablePrivacyForActionName:n,actionNameAttribute:r,defaultPrivacyLevel:s}=e;if(_e(wt.USE_TREE_WALKER_FOR_ACTION_NAME))return tf(t,r,n,s);if("innerText"in t){let i=t.innerText;const o=a=>{const c=t.querySelectorAll(a);for(let u=0;u<c.length;u+=1){const d=c[u];if("innerText"in d){const f=d.innerText;f&&f.trim().length>0&&(i=i.replace(f,""))}}};return o(`[${Rn}]`),r&&o(`[${r}]`),n&&o(`${Ht(y.HIDDEN)}, ${Ht(y.MASK)}`),i}return t.textContent}function tf(t,e,n,r){const s=new Map,i=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,a);let o="";for(;i.nextNode();){const c=i.currentNode;if(At(c)){(c.nodeName==="BR"||c.nodeName==="P"||["block","flex","grid","list-item","table","table-caption"].includes(getComputedStyle(c).display))&&(o+=" ");continue}o+=c.textContent||""}return o.replace(/\s+/g," ").trim();function a(c){const u=pt(c,r,s);if(n&&u&&qe(c,u))return NodeFilter.FILTER_REJECT;if(At(c)){if(c.hasAttribute(Rn)||e&&c.hasAttribute(e))return NodeFilter.FILTER_REJECT;const d=getComputedStyle(c);if(d.visibility!=="visible"||d.display==="none"||d.contentVisibility&&d.contentVisibility!=="visible")return NodeFilter.FILTER_REJECT}return NodeFilter.FILTER_ACCEPT}}function ef(t,{onPointerDown:e,onPointerUp:n}){let r,s={selection:!1,input:!1,scroll:!1},i;const o=[L(t,window,"pointerdown",a=>{os(a)&&(r=is(),s={selection:!1,input:!1,scroll:!1},i=e(a))},{capture:!0}),L(t,window,"selectionchange",()=>{(!r||!is())&&(s.selection=!0)},{capture:!0}),L(t,window,"scroll",()=>{s.scroll=!0},{capture:!0,passive:!0}),L(t,window,"pointerup",a=>{if(os(a)&&i){const c=s;n(i,a,()=>c),i=void 0}},{capture:!0}),L(t,window,"input",()=>{s.input=!0},{capture:!0})];return{stop:()=>{o.forEach(a=>a.stop())}}}function is(){const t=window.getSelection();return!t||t.isCollapsed}function os(t){return t.target instanceof Element&&t.isPrimary!==!1}const as=3;function nf(t,e){if(rf(t))return e.addFrustration(Ae.RAGE_CLICK),t.some(cs)&&e.addFrustration(Ae.DEAD_CLICK),e.hasError&&e.addFrustration(Ae.ERROR_CLICK),{isRage:!0};const n=t.some(r=>r.getUserActivity().selection);return t.forEach(r=>{r.hasError&&r.addFrustration(Ae.ERROR_CLICK),cs(r)&&!n&&r.addFrustration(Ae.DEAD_CLICK)}),{isRage:!1}}function rf(t){if(t.some(e=>e.getUserActivity().selection||e.getUserActivity().scroll))return!1;for(let e=0;e<t.length-(as-1);e+=1)if(t[e+as-1].event.timeStamp-t[e].event.timeStamp<=G)return!0;return!1}const sf='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function cs(t){if(t.hasPageActivity||t.getUserActivity().input||t.getUserActivity().scroll)return!1;let e=t.event.target;return e.tagName==="LABEL"&&e.hasAttribute("for")&&(e=document.getElementById(e.getAttribute("for"))),!e||!e.matches(sf)}const _o=10*G,Ne=new Map;function of(t){const e=Ne.get(t);return Ne.delete(t),e}function go(t,e){Ne.set(t,e),Ne.forEach((n,r)=>{D(r,it())>_o&&Ne.delete(r)})}const af=5*Z;function cf(t,e,n,r){const s=Se({expireDelay:af}),i=new O;let o;t.subscribe(10,()=>{s.reset()}),t.subscribe(5,d),t.subscribe(11,f=>{f.reason===ue.UNLOADING&&d()});const{stop:a}=ef(r,{onPointerDown:f=>uf(r,t,e,f,n),onPointerUp:({clickActionBase:f,hadActivityOnPointerDown:l},p,m)=>{lf(r,t,e,n,s,i,u,f,p,m,l)}});return{stop:()=>{d(),i.notify(),a()},actionContexts:{findActionId:f=>s.findAll(f)}};function u(f){if(!o||!o.tryAppend(f)){const l=f.clone();o=Wd(f,p=>{ff(p,l)})}}function d(){o&&o.stop()}}function uf(t,e,n,r,s){let i;if(t.enablePrivacyForActionName?i=pt(r.target,t.defaultPrivacyLevel):i=y.ALLOW,i===y.HIDDEN)return;const o=df(r,i,t);let a=!1;return Cr(e,n,s,t,c=>{a=c.hadActivity},no),{clickActionBase:o,hadActivityOnPointerDown:()=>a}}function lf(t,e,n,r,s,i,o,a,c,u,d){var f;const l=bo(e,s,u,a,c);o(l);const p=(f=a==null?void 0:a.target)===null||f===void 0?void 0:f.selector;p&&go(c.timeStamp,p);const{stop:m}=Cr(e,n,r,t,I=>{I.hadActivity&&I.end<l.startClocks.timeStamp?l.discard():I.hadActivity?l.stop(I.end):d()?l.stop(l.startClocks.timeStamp):l.stop()},_o),h=e.subscribe(5,({endClocks:I})=>{l.stop(I.timeStamp)}),g=i.subscribe(()=>{l.stop()});l.stopObservable.subscribe(()=>{h.unsubscribe(),m(),g.unsubscribe()})}function df(t,e,n){const r=t.target.getBoundingClientRect(),s=je(t.target,n.actionNameAttribute);s&&go(t.timeStamp,s);const{name:i,nameSource:o}=Yd(t.target,n,e);return{type:wn.CLICK,target:{width:Math.round(r.width),height:Math.round(r.height),selector:s},position:{x:Math.round(t.clientX-r.left),y:Math.round(t.clientY-r.top)},name:i,nameSource:o}}function bo(t,e,n,r,s){const i=W(),o=U(),a=e.add(i,o.relative),c=to({lifeCycle:t,isChildEvent:m=>m.action!==void 0&&(Array.isArray(m.action.id)?m.action.id.includes(i):m.action.id===i)});let u=0,d;const f=[],l=new O;function p(m){u===0&&(d=m,u=1,d?a.close(lr(d)):a.remove(),c.stop(),l.notify())}return{event:s,stop:p,stopObservable:l,get hasError(){return c.eventCounts.errorCount>0},get hasPageActivity(){return d!==void 0},getUserActivity:n,addFrustration:m=>{f.push(m)},startClocks:o,isStopped:()=>u===1||u===2,clone:()=>bo(t,e,n,r,s),validate:m=>{if(p(),u!==1)return;const{resourceCount:h,errorCount:g,longTaskCount:I}=c.eventCounts,P={duration:d&&D(o.timeStamp,d),startClocks:o,id:i,frustrationTypes:f,counts:{resourceCount:h,errorCount:g,longTaskCount:I},events:m??[s],event:s,...r};t.notify(0,P),u=2},discard:()=>{p(),u=2}}}function ff(t,e){const{isRage:n}=nf(t,e);n?(t.forEach(r=>r.discard()),e.stop(x()),e.validate(t.map(r=>r.event))):(e.discard(),t.forEach(r=>r.validate()))}function pf(t,e,n,r,s){const{unsubscribe:i}=t.subscribe(0,c=>{t.notify(12,us(c))});e.register(0,({startTime:c,eventType:u})=>{if(u!==v.ERROR&&u!==v.RESOURCE&&u!==v.LONG_TASK)return ot;const d=o.findActionId(c);return d?{type:u,action:{id:d}}:ot}),e.register(1,({startTime:c})=>({action:{id:o.findActionId(c)}}));let o={findActionId:R},a=R;return s.trackUserInteractions&&({actionContexts:o,stop:a}=cf(t,n,r,s)),{addAction:c=>{t.notify(12,us(c))},actionContexts:o,stop:()=>{i(),a()}}}function us(t){const e=jn(t)?{action:{id:t.id,loading_time:Qi(w(t.duration)),frustration:{type:t.frustrationTypes},error:{count:t.counts.errorCount},long_task:{count:t.counts.longTaskCount},resource:{count:t.counts.resourceCount}},_dd:{action:{target:t.target,position:t.position,name_source:t.nameSource}}}:{context:t.context},n=It({action:{id:W(),target:{name:t.name},type:t.type},date:t.startClocks.timeStamp,type:v.ACTION},e),r=jn(t)?t.duration:void 0,s=jn(t)?{events:t.events}:{handlingStack:t.handlingStack};return{rawRumEvent:n,duration:r,startTime:t.startClocks.relative,domainContext:s}}function jn(t){return t.type!==wn.CUSTOM}function mf(t){const e=Yu([_n.error]).subscribe(n=>t.notify(n.error));return{stop:()=>{e.unsubscribe()}}}function hf(t,e){const n=hu(t,[Ue.cspViolation,Ue.intervention]).subscribe(r=>e.notify(r));return{stop:()=>{n.unsubscribe()}}}function _f(t,e,n){const r=new O;return n.subscribe(s=>{s.type===0&&r.notify(s.error)}),mf(r),hf(e,r),r.subscribe(s=>t.notify(14,{error:s})),gf(t)}function gf(t){return t.subscribe(14,({error:e})=>{t.notify(12,bf(e))}),{addError:({error:e,handlingStack:n,componentStack:r,startClocks:s,context:i})=>{const o=_r({originalError:e,handlingStack:n,componentStack:r,startClocks:s,nonErrorPrefix:"Provided",source:ge.CUSTOM,handling:"handled"});o.context=It(o.context,i),t.notify(14,{error:o})}}}function bf(t){const e={date:t.startClocks.timeStamp,error:{id:W(),message:t.message,source:t.source,stack:t.stack,handling_stack:t.handlingStack,component_stack:t.componentStack,type:t.type,handling:t.handling,causes:t.causes,source_type:"browser",fingerprint:t.fingerprint,csp:t.csp},type:v.ERROR,context:t.context},n={error:t.originalError,handlingStack:t.handlingStack};return{rawRumEvent:e,startTime:t.startClocks.relative,domainContext:n}}const ls=new WeakSet;function yf(t){if(!performance||!("getEntriesByName"in performance))return;const e=performance.getEntriesByName(t.url,"resource");if(!e.length||!("toJSON"in e[0]))return;const n=e.filter(r=>!ls.has(r)).filter(r=>Yi(r)&&Xi(r)).filter(r=>Sf(r,t.startClocks.relative,yo({startTime:t.startClocks.relative,duration:t.duration})));if(n.length===1)return ls.add(n[0]),n[0].toJSON()}function yo(t){return me(t.startTime,t.duration)}function Sf(t,e,n){return t.startTime>=e-1&&yo(t)<=me(n,1)}const vf=2*Z;function Ef(t){const e=Tf(t)||wf(t);if(!(!e||e.traceTime<=J()-vf))return e.traceId}function Tf(t){const e=t.querySelector("meta[name=dd-trace-id]"),n=t.querySelector("meta[name=dd-trace-time]");return So(e&&e.content,n&&n.content)}function wf(t){const e=If(t);if(e)return So(Me(e,"trace-id"),Me(e,"trace-time"))}function So(t,e){const n=e&&Number(e);if(!(!t||!n))return{traceId:t,traceTime:n}}function If(t){for(let e=0;e<t.childNodes.length;e+=1){const n=ds(t.childNodes[e]);if(n)return n}if(t.body)for(let e=t.body.childNodes.length-1;e>=0;e-=1){const n=t.body.childNodes[e],r=ds(n);if(r)return r;if(!sr(n))break}}function ds(t){if(t&&wd(t)){const e=/^\s*DATADOG;(.*?)\s*$/.exec(t.data);if(e)return e[1]}}function vo(){if(Pt(k.NAVIGATION)){const n=performance.getEntriesByType(k.NAVIGATION)[0];if(n)return n}const t=Af(),e={entryType:k.NAVIGATION,initiatorType:"navigation",name:window.location.href,startTime:0,duration:t.loadEventEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,workerStart:0,toJSON:()=>({...e,toJSON:void 0}),...t};return e}function Af(){const t={},e=performance.timing;for(const n in e)if(Fe(e[n])){const r=n,s=e[r];t[r]=s===0?0:lr(s)}return t}function Rf(t,e,n=vo){Tr(t,"interactive",()=>{const r=n(),s=Object.assign(r.toJSON(),{entryType:k.RESOURCE,initiatorType:ji,duration:r.responseEnd,traceId:Ef(document),toJSON:()=>({...s,toJSON:void 0})});e(s)})}const Cf=1e3;function Of(t){const e=new Set,n=t.subscribe(8,r=>{e.add(r),e.size>Cf&&(Dt("Too many requests"),e.delete(e.values().next().value))});return{getMatchingRequest(r){let s=1/0,i;for(const o of e){const a=r.startTime-o.startClocks.relative;0<=a&&a<s&&o.url===r.name&&(s=Math.abs(a),i=o)}return i&&e.delete(i),i},stop(){n.unsubscribe()}}}const kf=32*de;function xf(t,e){return e.allowedGraphQlUrls.find(n=>vn([n.match],t))}function Nf(t,e=!1){if(!t||typeof t!="string")return;let n;try{n=JSON.parse(t)}catch{return}if(!n||!n.query)return;const r=n.query.trim(),s=Lf(r),i=n.operationName;if(!s)return;let o;return n.variables&&(o=JSON.stringify(n.variables)),{operationType:s,operationName:i,variables:o,payload:e?dr(r,kf,"..."):void 0}}function Lf(t){var e;return(e=t.match(/^\s*(query|mutation|subscription)\b/i))===null||e===void 0?void 0:e[1]}function Mf(t,e,n,r=qu(),s=Rf){let i;const o=e.trackEarlyRequests;o?i=Of(t):t.subscribe(8,u=>{c(()=>Df(u,e,n))});const a=St(e,{type:k.RESOURCE,buffered:!0}).subscribe(u=>{for(const d of u)(o||!qi(d))&&c(()=>fs(d,e,n,i))});s(e,u=>{c(()=>fs(u,e,n,i))});function c(u){r.push(()=>{const d=u();d&&t.notify(12,d)})}return{stop:()=>{r.stop(),a.unsubscribe()}}}function Df(t,e,n){const r=yf(t);return Eo(r,t,n,e)}function fs(t,e,n,r){const s=qi(t)&&r?r.getMatchingRequest(t):void 0;return Eo(t,s,n,e)}function Eo(t,e,n,r){if(!t&&!e)return;const s=e?Ff(e,r):zf(t,r);if(!r.trackResources&&!s)return;const i=t?ze(t.startTime):e.startClocks,o=t?ad(t):Bf(n,i,e.duration),a=e&&Pf(e,r),c=It({date:i.timeStamp,resource:{id:W(),duration:w(o),type:e?e.type===Tn.XHR?X.XHR:X.FETCH:od(t),method:e?e.method:void 0,status_code:e?e.status:$f(t.responseStatus),url:e?Ji(e.url):t.name,protocol:t&&ld(t),delivery_type:t&&dd(t),graphql:a},type:v.RESOURCE,_dd:{discarded:!r.trackResources}},s,t&&Vf(t));return{startTime:i.relative,duration:o,rawRumEvent:c,domainContext:Uf(t,e)}}function Pf(t,e){if(!_e(wt.GRAPHQL_TRACKING))return;const n=xf(t.url,e);if(n)return Nf(t.body,n.trackPayload)}function Uf(t,e){if(e){const n={performanceEntry:t,isAborted:e.isAborted,handlingStack:e.handlingStack};return e.type===Tn.XHR?{xhr:e.xhr,...n}:{requestInput:e.input,requestInit:e.init,response:e.response,error:e.error,...n}}return{performanceEntry:t}}function Vf(t){const{renderBlockingStatus:e}=t;return{resource:{render_blocking_status:e,...fd(t),...cd(t)}}}function Ff(t,e){if(t.traceSampled&&t.traceId&&t.spanId)return{_dd:{span_id:t.spanId.toString(),trace_id:t.traceId.toString(),rule_psr:e.rulePsr}}}function zf(t,e){if(t.traceId)return{_dd:{trace_id:t.traceId,span_id:$i().toString(),rule_psr:e.rulePsr}}}function Bf(t,e,n){return t.wasInPageStateDuringPeriod("frozen",e.relative,n)?void 0:n}function $f(t){return t===0?void 0:t}function Gf(t,e,n){const{stop:r,eventCounts:s}=to({lifeCycle:t,isChildEvent:i=>i.view.id===e,onChange:n});return{stop:r,eventCounts:s}}const Hf=10*Z;function Kf(t,e,n){return{stop:St(t,{type:k.PAINT,buffered:!0}).subscribe(s=>{const i=s.find(o=>o.name==="first-contentful-paint"&&o.startTime<e.timeStamp&&o.startTime<Hf);i&&n(i.startTime)}).unsubscribe}}function Wf(t,e){requestAnimationFrame(()=>{requestAnimationFrame(()=>{e(D(t,it()))})})}function jf(t,e,n){const r=St(t,{type:k.FIRST_INPUT,buffered:!0}).subscribe(s=>{const i=s.find(o=>o.startTime<e.timeStamp);if(i){const o=D(i.startTime,i.processingStart);let a;i.target&&At(i.target)&&(a=je(i.target,t.actionNameAttribute)),n({delay:o>=0?o:0,time:i.startTime,targetSelector:a})}});return{stop:()=>{r.unsubscribe()}}}function qf(t,e,n=vo){return Jf(t,()=>{const r=n();Xf(r)||e(Yf(r))})}function Yf(t){return{domComplete:t.domComplete,domContentLoaded:t.domContentLoadedEventEnd,domInteractive:t.domInteractive,loadEvent:t.loadEventEnd,firstByte:t.responseStart>=0&&t.responseStart<=it()?t.responseStart:void 0}}function Xf(t){return t.loadEventEnd<=0}function Jf(t,e){let n;const{stop:r}=Tr(t,"complete",()=>{n=$(()=>e())});return{stop:()=>{r(),tt(n)}}}const Zf=10*Z;function Qf(t,e,n,r){let s=1/0;const{stop:i}=rt(t,n,["pointerdown","keydown"],c=>{s=c.timeStamp},{capture:!0,once:!0});let o=0;const a=St(t,{type:k.LARGEST_CONTENTFUL_PAINT,buffered:!0}).subscribe(c=>{const u=Ws(c,d=>d.entryType===k.LARGEST_CONTENTFUL_PAINT&&d.startTime<s&&d.startTime<e.timeStamp&&d.startTime<Zf&&d.size>o);if(u){let d;u.element&&(d=je(u.element,t.actionNameAttribute)),r({value:u.startTime,targetSelector:d,resourceUrl:tp(u)}),o=u.size}});return{stop:()=>{i(),a.unsubscribe()}}}function tp(t){return t.url===""?void 0:t.url}function To(t,e,n=window){if(document.visibilityState==="hidden")return{timeStamp:0,stop:R};if(Pt(k.VISIBILITY_STATE)){const i=performance.getEntriesByType(k.VISIBILITY_STATE).filter(o=>o.name==="hidden").find(o=>o.startTime>=e.relative);if(i)return{timeStamp:i.startTime,stop:R}}let r=1/0;const{stop:s}=rt(t,n,["pagehide","visibilitychange"],i=>{(i.type==="pagehide"||document.visibilityState==="hidden")&&(r=i.timeStamp,s())},{capture:!0});return{get timeStamp(){return r},stop:s}}function ep(t,e,n,r){const s={},{stop:i}=qf(t,f=>{n(f.loadEvent),s.navigationTimings=f,r()}),o=To(t,e),{stop:a}=Kf(t,o,f=>{s.firstContentfulPaint=f,r()}),{stop:c}=Qf(t,o,window,f=>{s.largestContentfulPaint=f,r()}),{stop:u}=jf(t,o,f=>{s.firstInput=f,r()});function d(){i(),a(),c(),u(),o.stop()}return{stop:d,initialViewMetrics:s}}const ir=(t,e)=>t*e,np=(t,e)=>{const n=Math.max(t.left,e.left),r=Math.max(t.top,e.top),s=Math.min(t.right,e.right),i=Math.min(t.bottom,e.bottom);return n>=s||r>=i?0:ir(s-n,i-r)},ps=t=>{const e=ir(t.previousRect.width,t.previousRect.height),n=ir(t.currentRect.width,t.currentRect.height),r=np(t.previousRect,t.currentRect);return e+n-r};function rp(t,e,n){if(!cp())return{stop:R};let r=0,s;n({value:0});const i=ap(),o=St(t,{type:k.LAYOUT_SHIFT,buffered:!0}).subscribe(a=>{var c;for(const u of a){if(u.hadRecentInput||u.startTime<e)continue;const{cumulatedValue:d,isMaxValue:f}=i.update(u);if(f){const l=sp(u.sources);s={target:l!=null&&l.node?new WeakRef(l.node):void 0,time:D(e,u.startTime),previousRect:l==null?void 0:l.previousRect,currentRect:l==null?void 0:l.currentRect,devicePixelRatio:window.devicePixelRatio}}if(d>r){r=d;const l=(c=s==null?void 0:s.target)===null||c===void 0?void 0:c.deref();n({value:Oe(r,4),targetSelector:l&&je(l,t.actionNameAttribute),time:s==null?void 0:s.time,previousRect:s!=null&&s.previousRect?ms(s.previousRect):void 0,currentRect:s!=null&&s.currentRect?ms(s.currentRect):void 0,devicePixelRatio:s==null?void 0:s.devicePixelRatio})}}});return{stop:()=>{o.unsubscribe()}}}function sp(t){let e;for(const n of t)if(n.node&&At(n.node)){const r=ps(n);(!e||ps(e)<r)&&(e=n)}return e}function ms({x:t,y:e,width:n,height:r}){return{x:t,y:e,width:n,height:r}}const ip=5*G,op=G;function ap(){let t=0,e,n,r=0;return{update:s=>{const i=e===void 0||s.startTime-n>=op||s.startTime-e>=ip;let o;return i?(e=n=s.startTime,r=t=s.value,o=!0):(t+=s.value,n=s.startTime,o=s.value>r,o&&(r=s.value)),{cumulatedValue:t,isMaxValue:o}}}}function cp(){return Pt(k.LAYOUT_SHIFT)&&"WeakRef"in window}let cn,wo=0,qn=1/0,Yn=0;function up(){"interactionCount"in performance||cn||(cn=new window.PerformanceObserver(S(t=>{t.getEntries().forEach(e=>{const n=e;n.interactionId&&(qn=Math.min(qn,n.interactionId),Yn=Math.max(Yn,n.interactionId),wo=(Yn-qn)/7+1)})})),cn.observe({type:"event",buffered:!0,durationThreshold:0}))}const hs=()=>cn?wo:window.performance.interactionCount||0,_s=10,lp=1*Z;function dp(t,e,n){if(!mp())return{getInteractionToNextPaint:()=>{},setViewEnd:R,stop:R};const{getViewInteractionCount:r,stopViewInteractionCount:s}=pp(n);let i=1/0;const o=fp(r);let a=-1,c,u;function d(p){for(const h of p)h.interactionId&&h.startTime>=e&&h.startTime<=i&&o.process(h);const m=o.estimateP98Interaction();m&&m.duration!==a&&(a=m.duration,u=D(e,m.startTime),c=of(m.startTime),!c&&m.target&&At(m.target)&&(c=je(m.target,t.actionNameAttribute)))}const f=St(t,{type:k.FIRST_INPUT,buffered:!0}).subscribe(d),l=St(t,{type:k.EVENT,durationThreshold:40,buffered:!0}).subscribe(d);return{getInteractionToNextPaint:()=>{if(a>=0)return{value:Math.min(a,lp),targetSelector:c,time:u};if(r())return{value:0}},setViewEnd:p=>{i=p,s()},stop:()=>{l.unsubscribe(),f.unsubscribe()}}}function fp(t){const e=[];function n(){e.sort((r,s)=>s.duration-r.duration).splice(_s)}return{process(r){const s=e.findIndex(o=>r.interactionId===o.interactionId),i=e[e.length-1];s!==-1?r.duration>e[s].duration&&(e[s]=r,n()):(e.length<_s||r.duration>i.duration)&&(e.push(r),n())},estimateP98Interaction(){const r=Math.min(e.length-1,Math.floor(t()/50));return e[r]}}}function pp(t){up();const e=t===Tt.INITIAL_LOAD?0:hs();let n={stopped:!1};function r(){return hs()-e}return{getViewInteractionCount:()=>n.stopped?n.interactionCount:r(),stopViewInteractionCount:()=>{n={stopped:!0,interactionCount:r()}}}}function mp(){return Pt(k.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function hp(t,e,n,r,s,i,o){let a=s===Tt.INITIAL_LOAD,c=!0;const u=[],d=To(r,i);function f(){if(!c&&!a&&u.length>0){const p=Math.max(...u);p<d.timeStamp-i.relative&&o(p)}}const{stop:l}=Cr(t,e,n,r,p=>{c&&(c=!1,p.hadActivity&&u.push(D(i.timeStamp,p.end)),f())});return{stop:()=>{l(),d.stop()},setLoadEvent:p=>{a&&(a=!1,u.push(p),f())}}}function Io(){let t;const e=window.visualViewport;return e?t=e.pageLeft-e.offsetLeft:window.scrollX!==void 0?t=window.scrollX:t=window.pageXOffset||0,Math.round(t)}function kr(){let t;const e=window.visualViewport;return e?t=e.pageTop-e.offsetTop:window.scrollY!==void 0?t=window.scrollY:t=window.pageYOffset||0,Math.round(t)}let Xn;function Ao(t){return Xn||(Xn=_p(t)),Xn}function _p(t){return new O(e=>{const{throttled:n}=Mt(()=>{e.notify(On())},200);return L(t,window,"resize",n,{capture:!0,passive:!0}).stop})}function On(){const t=window.visualViewport;return t?{width:Number(t.width*t.scale),height:Number(t.height*t.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}const gp=G;function bp(t,e,n,r=Sp(t)){let s=0,i=0,o=0;const a=r.subscribe(({scrollDepth:c,scrollTop:u,scrollHeight:d})=>{let f=!1;if(c>s&&(s=c,f=!0),d>i){i=d;const l=it();o=D(e.relative,l),f=!0}f&&n({maxDepth:Math.min(s,i),maxDepthScrollTop:u,maxScrollHeight:i,maxScrollHeightTime:o})});return{stop:()=>a.unsubscribe()}}function yp(){const t=kr(),{height:e}=On(),n=Math.round((document.scrollingElement||document.documentElement).scrollHeight),r=Math.round(e+t);return{scrollHeight:n,scrollDepth:r,scrollTop:t}}function Sp(t,e=gp){return new O(n=>{function r(){n.notify(yp())}if(window.ResizeObserver){const s=Mt(r,e,{leading:!1,trailing:!0}),i=document.scrollingElement||document.documentElement,o=new ResizeObserver(S(s.throttled));i&&o.observe(i);const a=L(t,window,"scroll",s.throttled,{passive:!0});return()=>{s.cancel(),o.disconnect(),a.stop()}}})}function vp(t,e,n,r,s,i,o){const a={},{stop:c,setLoadEvent:u}=hp(t,e,n,r,i,o,h=>{a.loadingTime=h,s()}),{stop:d}=bp(r,o,h=>{a.scroll=h}),{stop:f}=rp(r,o.relative,h=>{a.cumulativeLayoutShift=h,s()}),{stop:l,getInteractionToNextPaint:p,setViewEnd:m}=dp(r,o.relative,i);return{stop:()=>{c(),f(),d()},stopINPTracking:l,setLoadEvent:u,setViewEnd:m,getCommonViewMetrics:()=>(a.interactionToNextPaint=p(),a)}}function Ep(t,e){const{stop:n}=L(t,window,"pageshow",r=>{r.persisted&&e(r)},{capture:!0});return n}function Tp(t,e,n){Wf(t.relative,r=>{e.firstContentfulPaint=r,e.largestContentfulPaint={value:r},n()})}const wp=3e3,Ip=5*Z,Ap=5*Z;function Rp(t,e,n,r,s,i,o,a){const c=new Set;let u=l(Tt.INITIAL_LOAD,ur(),a),d;p();let f;o&&(f=m(i),s.trackBfcacheViews&&(d=Ep(s,h=>{u.end();const g=ze(h.timeStamp);u=l(Tt.BF_CACHE,g,void 0)})));function l(h,g,I){const P=Cp(e,n,r,s,t,h,g,I);return c.add(P),P.stopObservable.subscribe(()=>{c.delete(P)}),P}function p(){e.subscribe(10,()=>{u=l(Tt.ROUTE_CHANGE,void 0,{name:u.name,service:u.service,version:u.version,context:u.contextManager.getContext()})}),e.subscribe(9,()=>{u.end({sessionIsActive:!1})})}function m(h){return h.subscribe(({oldLocation:g,newLocation:I})=>{kp(g,I)&&(u.end(),u=l(Tt.ROUTE_CHANGE))})}return{addTiming:(h,g=x())=>{u.addTiming(h,g)},startView:(h,g)=>{u.end({endClocks:g}),u=l(Tt.ROUTE_CHANGE,g,h)},setViewContext:h=>{u.contextManager.setContext(h)},setViewContextProperty:(h,g)=>{u.contextManager.setContextProperty(h,g)},setViewName:h=>{u.setViewName(h)},getViewContext:()=>u.contextManager.getContext(),stop:()=>{f&&f.unsubscribe(),d&&d(),u.end(),c.forEach(h=>h.stop())}}}function Cp(t,e,n,r,s,i,o=U(),a){const c=W(),u=new O,d={};let f=0,l;const p=Le(s),m=En();let h=!0,g=a==null?void 0:a.name;const I=(a==null?void 0:a.service)||r.service,P=(a==null?void 0:a.version)||r.version,H=a==null?void 0:a.context;H&&m.setContext(H);const b={id:c,name:g,startClocks:o,service:I,version:P,context:H};t.notify(1,b),t.notify(2,b);const{throttled:T,cancel:_}=Mt(_t,wp,{leading:!1}),{setLoadEvent:C,setViewEnd:Ut,stop:ve,stopINPTracking:A,getCommonViewMetrics:N}=vp(t,e,n,r,ht,i,o),{stop:V,initialViewMetrics:j}=i===Tt.INITIAL_LOAD?ep(r,o,C,ht):{stop:R,initialViewMetrics:{}};i===Tt.BF_CACHE&&Tp(o,j,ht);const{stop:K,eventCounts:mt}=Gf(t,c,ht),Ee=he(_t,Ip),Qt=t.subscribe(11,Q=>{Q.reason===ue.UNLOADING&&_t()});_t(),m.changeObservable.subscribe(ht);function Vt(){t.notify(3,{id:c,name:g,context:m.getContext(),startClocks:o,sessionIsActive:h})}function ht(){Vt(),T()}function _t(){_(),Vt(),f+=1;const Q=l===void 0?x():l.timeStamp;t.notify(4,{customTimings:d,documentVersion:f,id:c,name:g,service:I,version:P,context:m.getContext(),loadingType:i,location:p,startClocks:o,commonViewMetrics:N(),initialViewMetrics:j,duration:D(o.timeStamp,Q),isActive:l===void 0,sessionIsActive:h,eventCounts:mt})}return{get name(){return g},service:I,version:P,contextManager:m,stopObservable:u,end(Q={}){var vt,Ft;l||(l=(vt=Q.endClocks)!==null&&vt!==void 0?vt:U(),h=(Ft=Q.sessionIsActive)!==null&&Ft!==void 0?Ft:!0,t.notify(5,{endClocks:l}),t.notify(6,{endClocks:l}),bn(Ee),Ut(l.relative),ve(),Qt.unsubscribe(),_t(),$(()=>{this.stop()},Ap))},stop(){V(),K(),A(),u.notify()},addTiming(Q,vt){if(l)return;const Ft=na(vt)?vt:D(o.timeStamp,vt);d[Op(Q)]=Ft,ht()},setViewName(Q){g=Q,_t()}}}function Op(t){const e=t.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return e!==t&&E.warn(`Invalid timing name: ${t}, sanitized to: ${e}`),e}function kp(t,e){return t.pathname!==e.pathname||!xp(e.hash)&&gs(e.hash)!==gs(t.hash)}function xp(t){const e=t.substring(1);return e!==""&&!!document.getElementById(e)}function gs(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function Np(t,e,n,r,s,i,o,a,c,u){return t.subscribe(4,d=>t.notify(12,Lp(d,n,a))),e.register(0,({startTime:d,eventType:f})=>{const l=c.findView(d);return l?{type:f,service:l.service,version:l.version,context:l.context,view:{id:l.id,name:l.name}}:Lt}),e.register(1,({startTime:d})=>{var f;return{view:{id:(f=c.findView(d))===null||f===void 0?void 0:f.id}}}),Rp(r,t,s,i,n,o,!n.trackViewsManually,u)}function Lp(t,e,n){var r,s,i,o,a,c,u,d,f,l,p,m,h,g,I,P,H,b;const T=n.getReplayStats(t.id),_=(s=(r=t.commonViewMetrics)===null||r===void 0?void 0:r.cumulativeLayoutShift)===null||s===void 0?void 0:s.devicePixelRatio,C={_dd:{document_version:t.documentVersion,replay_stats:T,cls:_?{device_pixel_ratio:_}:void 0,configuration:{start_session_replay_recording_manually:e.startSessionReplayRecordingManually}},date:t.startClocks.timeStamp,type:v.VIEW,view:{action:{count:t.eventCounts.actionCount},frustration:{count:t.eventCounts.frustrationCount},cumulative_layout_shift:(i=t.commonViewMetrics.cumulativeLayoutShift)===null||i===void 0?void 0:i.value,cumulative_layout_shift_time:w((o=t.commonViewMetrics.cumulativeLayoutShift)===null||o===void 0?void 0:o.time),cumulative_layout_shift_target_selector:(a=t.commonViewMetrics.cumulativeLayoutShift)===null||a===void 0?void 0:a.targetSelector,first_byte:w((c=t.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.firstByte),dom_complete:w((u=t.initialViewMetrics.navigationTimings)===null||u===void 0?void 0:u.domComplete),dom_content_loaded:w((d=t.initialViewMetrics.navigationTimings)===null||d===void 0?void 0:d.domContentLoaded),dom_interactive:w((f=t.initialViewMetrics.navigationTimings)===null||f===void 0?void 0:f.domInteractive),error:{count:t.eventCounts.errorCount},first_contentful_paint:w(t.initialViewMetrics.firstContentfulPaint),first_input_delay:w((l=t.initialViewMetrics.firstInput)===null||l===void 0?void 0:l.delay),first_input_time:w((p=t.initialViewMetrics.firstInput)===null||p===void 0?void 0:p.time),first_input_target_selector:(m=t.initialViewMetrics.firstInput)===null||m===void 0?void 0:m.targetSelector,interaction_to_next_paint:w((h=t.commonViewMetrics.interactionToNextPaint)===null||h===void 0?void 0:h.value),interaction_to_next_paint_time:w((g=t.commonViewMetrics.interactionToNextPaint)===null||g===void 0?void 0:g.time),interaction_to_next_paint_target_selector:(I=t.commonViewMetrics.interactionToNextPaint)===null||I===void 0?void 0:I.targetSelector,is_active:t.isActive,name:t.name,largest_contentful_paint:w((P=t.initialViewMetrics.largestContentfulPaint)===null||P===void 0?void 0:P.value),largest_contentful_paint_target_selector:(H=t.initialViewMetrics.largestContentfulPaint)===null||H===void 0?void 0:H.targetSelector,load_event:w((b=t.initialViewMetrics.navigationTimings)===null||b===void 0?void 0:b.loadEvent),loading_time:Qi(w(t.commonViewMetrics.loadingTime)),loading_type:t.loadingType,long_task:{count:t.eventCounts.longTaskCount},performance:Mp(t.commonViewMetrics,t.initialViewMetrics),resource:{count:t.eventCounts.resourceCount},time_spent:w(t.duration)},display:t.commonViewMetrics.scroll?{scroll:{max_depth:t.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:t.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:t.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:w(t.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,privacy:{replay_level:e.defaultPrivacyLevel},device:{locale:navigator.language,locales:navigator.languages,time_zone:dl()}};return Yt(t.customTimings)||(C.view.custom_timings=Fs(t.customTimings,w)),{rawRumEvent:C,startTime:t.startClocks.relative,duration:t.duration,domainContext:{location:t.location}}}function Mp({cumulativeLayoutShift:t,interactionToNextPaint:e},{firstContentfulPaint:n,firstInput:r,largestContentfulPaint:s}){return{cls:t&&{score:t.value,timestamp:w(t.time),target_selector:t.targetSelector,previous_rect:t.previousRect,current_rect:t.currentRect},fcp:n&&{timestamp:w(n)},fid:r&&{duration:w(r.delay),timestamp:w(r.time),target_selector:r.targetSelector},inp:e&&{duration:w(e.value),timestamp:w(e.time),target_selector:e.targetSelector},lcp:s&&{timestamp:w(s.value),target_selector:s.targetSelector,resource_url:s.resourceUrl}}}const Dp="rum";function Pp(t,e,n){const r=Ru(t,Dp,s=>Vp(t,s),n);return r.expireObservable.subscribe(()=>{e.notify(9)}),r.renewObservable.subscribe(()=>{e.notify(10)}),r.sessionStateUpdateObservable.subscribe(({previousState:s,newState:i})=>{if(!s.forcedReplay&&i.forcedReplay){const o=r.findSession();o&&(o.isReplayForced=!0)}}),{findTrackedSession:s=>{const i=r.findSession(s);if(!(!i||i.trackingType==="0"))return{id:i.id,sessionReplay:i.trackingType==="1"?1:i.isReplayForced?2:0,anonymousId:i.anonymousId}},expire:r.expire,expireObservable:r.expireObservable,setForcedReplay:()=>r.updateSessionState({forcedReplay:"1"})}}function Up(){const t={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplay:bi("records")?1:0};return{findTrackedSession:()=>t,expire:R,expireObservable:new O,setForcedReplay:R}}function Vp(t,e){return Fp(e)?e:Kt(t.sessionSampleRate)?Kt(t.sessionReplaySampleRate)?"1":"2":"0"}function Fp(t){return t==="0"||t==="1"||t==="2"}function zp(t,e,n,r,s,i){const o=[t.rumEndpointBuilder];t.replica&&o.push(t.replica.rumEndpointBuilder);const a=Si({encoder:i(2),request:vr(o,t.batchBytesLimit,n),flushController:vi({messagesLimit:t.batchMessagesLimit,bytesLimit:t.batchBytesLimit,durationLimit:t.flushTimeout,pageMayExitObservable:r,sessionExpireObservable:s}),messageBytesLimit:t.messageBytesLimit});return e.subscribe(13,c=>{c.type===v.VIEW?a.upsert(c,c.view.id):a.add(c)}),a}function Bp(t){const e=be();t.subscribe(13,n=>{e.send("rum",n)})}const $p=Xt;function Gp(t,e,n,r){const s=Se({expireDelay:$p});let i;t.subscribe(1,({startClocks:c})=>{const u=r.href;s.add(a({url:u,referrer:i||document.referrer}),c.relative),i=u}),t.subscribe(6,({endClocks:c})=>{s.closeActive(c.relative)});const o=n.subscribe(({newLocation:c})=>{const u=s.find();if(u){const d=it();s.closeActive(d),s.add(a({url:c.href,referrer:u.referrer}),d)}});function a({url:c,referrer:u}){return{url:c,referrer:u}}return e.register(0,({startTime:c,eventType:u})=>{const d=s.find(c);return d?{type:u,view:{url:d.url,referrer:d.referrer}}:Lt}),{findUrl:c=>s.find(c),stop:()=>{o.unsubscribe(),s.stop()}}}function Hp(t,e){let n=Le(e);return new O(r=>{const{stop:s}=Kp(t,o),{stop:i}=Wp(t,o);function o(){if(n.href===e.href)return;const a=Le(e);r.notify({newLocation:a,oldLocation:n}),n=a}return()=>{s(),i()}})}function Kp(t,e){const{stop:n}=nt(bs("pushState"),"pushState",({onPostCall:i})=>{i(e)}),{stop:r}=nt(bs("replaceState"),"replaceState",({onPostCall:i})=>{i(e)}),{stop:s}=L(t,window,"popstate",e);return{stop:()=>{n(),r(),s()}}}function Wp(t,e){return L(t,window,"hashchange",e)}function bs(t){return Object.prototype.hasOwnProperty.call(history,t)?history:History.prototype}const jp=Xt;function qp(t,e,n){const r=Se({expireDelay:jp});return t.subscribe(1,({startClocks:s})=>{r.add({},s.relative)}),t.subscribe(6,({endClocks:s})=>{r.closeActive(s.relative)}),e.register(0,({startTime:s,eventType:i})=>{if(!n.trackFeatureFlagsForEvents.concat([v.VIEW,v.ERROR]).includes(i))return ot;const a=r.find(s);return!a||Yt(a)?ot:{type:i,feature_flags:a}}),{addFeatureFlagEvaluation:(s,i)=>{const o=r.find();o&&(o[s]=i)}}}const Yp=10*G;let le,nn;function Xp(t,e,n){t.metricsEnabled&&(Ro(),nn=!1,e.subscribe(13,()=>{nn=!0}),n.subscribe(({bytesCount:r,messagesCount:s})=>{nn&&(nn=!1,le.batchCount+=1,Ss(le.batchBytesCount,r),Ss(le.batchMessagesCount,s))}),he(Jp,Yp))}function Jp(){le.batchCount!==0&&(We("Customer data measures",le),Ro())}function ys(){return{min:1/0,max:0,sum:0}}function Ss(t,e){t.sum+=e,t.min=Math.min(t.min,e),t.max=Math.max(t.max,e)}function Ro(){le={batchCount:0,batchBytesCount:ys(),batchMessagesCount:ys()}}const Zp=4e3,Qp=500,tm=Xt;function em(t,e,n=Qp){const r=Se({expireDelay:tm,maxEntries:Zp});let s;Pt(k.VISIBILITY_STATE)&&performance.getEntriesByType(k.VISIBILITY_STATE).forEach(u=>{const d=u.name==="hidden"?"hidden":"active";o(d,u.startTime)}),o(Co(),it());const{stop:i}=rt(e,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],c=>{o(rm(c),c.timeStamp)},{capture:!0});function o(c,u=it()){c!==s&&(s=c,r.closeActive(u),r.add({state:s,startTime:u},u))}function a(c,u,d){return r.findAll(u,d).some(f=>f.state===c)}return t.register(0,({startTime:c,duration:u=0,eventType:d})=>{if(d===v.VIEW){const f=r.findAll(c,u);return{type:d,_dd:{page_states:nm(f,c,n)}}}return d===v.ACTION||d===v.ERROR?{type:d,view:{in_foreground:a("active",c,0)}}:ot}),{wasInPageStateDuringPeriod:a,addPageState:o,stop:()=>{i(),r.stop()}}}function nm(t,e,n){if(t.length!==0)return t.slice(-n).reverse().map(({state:r,startTime:s})=>({state:r,start:w(D(e,s))}))}function rm(t){return t.type==="freeze"?"frozen":t.type==="pagehide"?t.persisted?"frozen":"terminated":Co()}function Co(){return document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}function sm(t,e){let n;const r=requestAnimationFrame(S(()=>{n=On()})),s=Ao(e).subscribe(i=>{n=i}).unsubscribe;return t.register(0,({eventType:i})=>({type:i,display:n?{viewport:n}:void 0})),{stop:()=>{s(),r&&cancelAnimationFrame(r)}}}function im(t,e){const n=window.cookieStore?om(t):cm;return new O(r=>n(e,s=>r.notify(s)))}function om(t){return(e,n)=>L(t,window.cookieStore,"change",s=>{const i=s.changed.find(o=>o.name===e)||s.deleted.find(o=>o.name===e);i&&n(i.value)}).stop}const am=G;function cm(t,e){const n=Me(document.cookie,t),r=he(()=>{const s=Me(document.cookie,t);s!==n&&e(s)},am);return()=>{bn(r)}}const vs="datadog-ci-visibility-test-execution-id";function um(t,e,n=im(t,vs)){var r;let s=Rt(vs)||((r=window.Cypress)===null||r===void 0?void 0:r.env("traceId"));const i=n.subscribe(o=>{s=o});return e.register(0,({eventType:o})=>typeof s!="string"?ot:{type:o,session:{type:"ci_test"},ci_test:{test_execution_id:s}}),{stop:()=>{i.unsubscribe()}}}function lm(t,e){const n=St(e,{type:k.LONG_ANIMATION_FRAME,buffered:!0}).subscribe(r=>{for(const s of r){const i=ze(s.startTime),o={date:i.timeStamp,long_task:{id:W(),entry_type:Ui.LONG_ANIMATION_FRAME,duration:w(s.duration),blocking_duration:w(s.blockingDuration),first_ui_event_timestamp:w(s.firstUIEventTimestamp),render_start:w(s.renderStart),style_and_layout_start:w(s.styleAndLayoutStart),start_time:w(s.startTime),scripts:s.scripts.map(a=>({duration:w(a.duration),pause_duration:w(a.pauseDuration),forced_style_and_layout_duration:w(a.forcedStyleAndLayoutDuration),start_time:w(a.startTime),execution_start:w(a.executionStart),source_url:a.sourceURL,source_function_name:a.sourceFunctionName,source_char_position:a.sourceCharPosition,invoker:a.invoker,invoker_type:a.invokerType,window_attribution:a.windowAttribution}))},type:v.LONG_TASK,_dd:{discarded:!1}};t.notify(12,{rawRumEvent:o,startTime:i.relative,duration:s.duration,domainContext:{performanceEntry:s}})}});return{stop:()=>n.unsubscribe()}}function dm(t,e){const n=St(e,{type:k.LONG_TASK,buffered:!0}).subscribe(r=>{for(const s of r){if(s.entryType!==k.LONG_TASK||!e.trackLongTasks)break;const i=ze(s.startTime),o={date:i.timeStamp,long_task:{id:W(),entry_type:Ui.LONG_TASK,duration:w(s.duration)},type:v.LONG_TASK,_dd:{discarded:!1}};t.notify(12,{rawRumEvent:o,startTime:i.relative,duration:s.duration,domainContext:{performanceEntry:s}})}});return{stop(){n.unsubscribe()}}}function fm(t){t.register(0,({eventType:e})=>{if(!ki())return ot;const n=Ci(),r=Oi();return{type:e,session:{type:"synthetics"},synthetics:{test_id:n,result_id:r,injected:Ri()}}})}function pm(t,e,n){const r=Sr(t),s=n(r);return pr(e).forEach(([i,o])=>or(t,r,i.split(/\.|(?=\[\])/),o)),s}function or(t,e,n,r){const[s,...i]=n;if(s==="[]"){Array.isArray(t)&&Array.isArray(e)&&t.forEach((o,a)=>or(o,e[a],i,r));return}if(!(!Es(t)||!Es(e))){if(i.length>0)return or(t[s],e[s],i,r);mm(t,s,e[s],r)}}function mm(t,e,n,r){const s=Jt(n);s===r?t[e]=M(n):r==="object"&&(s==="undefined"||s==="null")&&(t[e]={})}function Es(t){return Jt(t)==="object"}const ne={"view.name":"string","view.url":"string","view.referrer":"string"},re={context:"object"},se={service:"string",version:"string"};let Oo;function hm(t,e,n,r){Oo={[v.VIEW]:{"view.performance.lcp.resource_url":"string",...re,...ne,...se},[v.ERROR]:{"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string",...re,...ne,...se},[v.RESOURCE]:{"resource.url":"string",..._e(wt.WRITABLE_RESOURCE_GRAPHQL)?{"resource.graphql":"object"}:{},...re,...ne,...se},[v.ACTION]:{"action.target.name":"string",...re,...ne,...se},[v.LONG_TASK]:{"long_task.scripts[].source_url":"string","long_task.scripts[].invoker":"string",...re,...ne,...se},[v.VITAL]:{...re,...ne,...se}};const s={[v.ERROR]:zn(v.ERROR,t.eventRateLimiterThreshold,r),[v.ACTION]:zn(v.ACTION,t.eventRateLimiterThreshold,r),[v.VITAL]:zn(v.VITAL,t.eventRateLimiterThreshold,r)};e.subscribe(12,({startTime:i,duration:o,rawRumEvent:a,domainContext:c})=>{const u=n.triggerHook(0,{eventType:a.type,startTime:i,duration:o});if(u===Lt)return;const d=It(u,a,{ddtags:br(t).join(",")});_m(d,t.beforeSend,c,s)&&(Yt(d.context)&&delete d.context,e.notify(13,d))})}function _m(t,e,n,r){var s;if(e){const o=pm(t,Oo[t.type],a=>e(a,n));if(o===!1&&t.type!==v.VIEW)return!1;o===!1&&E.warn("Can't dismiss view events using beforeSend!")}return!((s=r[t.type])===null||s===void 0?void 0:s.isLimitReached())}function gm(t,e,n,r){t.register(0,({eventType:s,startTime:i})=>{const o=e.findTrackedSession(i),a=r.findView(i);if(!o||!a)return Lt;let c,u,d;return s===v.VIEW?(c=n.getReplayStats(a.id)?!0:void 0,u=o.sessionReplay===1,d=a.sessionIsActive?void 0:!1):c=n.isRecording()?!0:void 0,{type:s,session:{id:o.id,type:"user",has_replay:c,sampled_for_replay:u,is_active:d}}}),t.register(1,({startTime:s})=>{const i=e.findTrackedSession(s);return i?{session:{id:i.id}}:ot})}function bm(t){t.register(0,({eventType:e})=>({type:e,connectivity:li()}))}function ym(t,e,n){t.register(0,({eventType:r})=>{const s=e.source;return{type:r,_dd:{format_version:2,drift:Ps(),configuration:{session_sample_rate:Oe(e.sessionSampleRate,3),session_replay_sample_rate:Oe(e.sessionReplaySampleRate,3),profiling_sample_rate:Oe(e.profilingSampleRate,3)},browser_sdk_version:jt()?"6.21.2":void 0,sdk_name:n},application:{id:e.applicationId},date:x(),source:s}}),t.register(1,()=>({application:{id:e.applicationId}}))}function Sm(t,e){t.register(1,()=>e.isGranted()?ot:Lt)}const vm=zc,Em=[v.ACTION,v.ERROR,v.LONG_TASK,v.RESOURCE,v.VITAL];function Tm(t){return{addEvent:(e,n,r,s)=>{Em.includes(n.type)&&t.notify(12,{startTime:e,rawRumEvent:n,domainContext:r,duration:s})}}}function wm(t,e){if(!e.metricsEnabled)return{stop:R};const{unsubscribe:n}=t.subscribe(4,({initialViewMetrics:r})=>{!r.largestContentfulPaint||!r.navigationTimings||(We("Initial view metrics",{metrics:Im(r.largestContentfulPaint,r.navigationTimings)}),n())});return{stop:n}}function Im(t,e){return{lcp:{value:t.value},navigation:{domComplete:e.domComplete,domContentLoaded:e.domContentLoaded,domInteractive:e.domInteractive,firstByte:e.firstByte,loadEvent:e.loadEvent}}}function Am(t,e,n,r,s,i,o,a,c){const u=[],d=new nd,f=vm();d.subscribe(13,st=>yr("rum",st));const l=st=>{d.notify(14,{error:st}),Dt("Error reported to customer",{"error.message":st.message})},p=Fc(t),m=p.subscribe(st=>{d.notify(11,st)});u.push(()=>m.unsubscribe());const h=Hc("browser-rum-sdk",t,f,l,p,s);u.push(h.stop);const g=jt()?Up():Pp(t,d,i);if(jt())Bp(d);else{const st=zp(t,d,l,p,g.expireObservable,s);u.push(()=>st.stop()),Xp(h,d,st.flushController.flushObservable)}const I=Ql(),P=Hp(t,location),{observable:H,stop:b}=td();u.push(b),ym(f,t,c);const T=em(f,t),_=sd(d);u.push(()=>_.stop());const C=Gp(d,f,P,location);u.push(()=>C.stop());const Ut=qp(d,f,t);gm(f,g,e,_),bm(f),Sm(f,i);const ve=ol(f,t,"rum"),A=al(f,t,g,"rum"),N=il(f,t,"rum"),{actionContexts:V,addAction:j,addEvent:K,stop:mt}=Rm(d,f,t,T,I,H,l);u.push(mt);const{addTiming:Ee,startView:Qt,setViewName:Vt,setViewContext:ht,setViewContextProperty:_t,getViewContext:Q,stop:vt}=Np(d,f,t,location,I,H,P,e,_,r);u.push(vt);const{stop:Ft}=wm(d,h);u.push(Ft);const{stop:jo}=Mf(d,t,T);if(u.push(jo),t.trackLongTasks)if(Pt(k.LONG_ANIMATION_FRAME)){const{stop:st}=lm(d,t);u.push(st)}else dm(d,t);const{addError:qo}=_f(d,t,a);a.unbuffer(),hd(d,t,g,A,N);const Xe=pl(d,T,o),Yo=ed(t.applicationId,g,_,V,C);return u.push(()=>n.stop()),{addAction:j,addEvent:K,addError:qo,addTiming:Ee,addFeatureFlagEvaluation:Ut.addFeatureFlagEvaluation,startView:Qt,setViewContext:ht,setViewContextProperty:_t,getViewContext:Q,setViewName:Vt,lifeCycle:d,viewHistory:_,session:g,stopSession:()=>g.expire(),getInternalContext:Yo.get,startDurationVital:Xe.startDurationVital,stopDurationVital:Xe.stopDurationVital,addDurationVital:Xe.addDurationVital,addOperationStepVital:Xe.addOperationStepVital,globalContext:ve,userContext:A,accountContext:N,telemetry:h,stop:()=>{u.forEach(st=>st())},hooks:f}}function Rm(t,e,n,r,s,i,o){const a=pf(t,e,s,i,n),c=Tm(t),u=sm(e,n),d=um(n,e);return fm(e),hm(n,t,e,o),{pageStateHistory:r,addAction:a.addAction,addEvent:c.addEvent,actionContexts:a.actionContexts,stop:()=>{a.stop(),d.stop(),u.stop(),r.stop()}}}function Cm(t,{session:e,viewContext:n,errorType:r}){const s=e?e.id:"no-session-id",i=[];r!==void 0&&i.push(`error-type=${r}`),n&&(i.push(`seed=${n.id}`),i.push(`from=${n.startClocks.timeStamp}`));const o=Om(t),a=`/rum/replay/sessions/${s}`;return`${o}${a}?${i.join("&")}`}function Om(t){const e=t.site,n=t.subdomain||km(t);return`https://${n?`${n}.`:""}${e}`}function km(t){switch(t.site){case Wt:case vc:return"app";case ui:return"dd";default:return}}const xm=1e3;let ct;function Nm(t){return kn(t).segments_count}function Lm(t){kn(t).segments_count+=1}function Mm(t){kn(t).records_count+=1}function Dm(t,e){kn(t).segments_total_raw_size+=e}function Pm(t){return ct==null?void 0:ct.get(t)}function kn(t){ct||(ct=new Map);let e;return ct.has(t)?e=ct.get(t):(e={records_count:0,segments_count:0,segments_total_raw_size:0},ct.set(t,e),ct.size>xm&&Um()),e}function Um(){if(!ct)return;const t=ct.keys().next().value;t&&ct.delete(t)}function ko(t,e,n){let r=0,s=[],i,o=!0,a=0;const c=[],{stop:u}=L(t,e,"message",({data:l})=>{if(l.type!=="wrote"||l.streamId!==n)return;const p=c[0];p&&(p.id===l.id?(c.shift(),r+=l.additionalBytesCount,s.push(l.result),i=l.trailer,p.writeCallback?p.writeCallback(l.result.byteLength):p.finishCallback&&p.finishCallback()):p.id<l.id&&u())});function d(){const l=s.length===0?new Uint8Array(0):sa(s.concat(i)),p={rawBytesCount:r,output:l,outputBytesCount:l.byteLength,encoding:"deflate"};return r=0,s=[],p}function f(){o||(e.postMessage({action:"reset",streamId:n}),o=!0)}return{isAsync:!0,get isEmpty(){return o},write(l,p){e.postMessage({action:"write",id:a,data:l,streamId:n}),c.push({id:a,writeCallback:p,data:l}),o=!1,a+=1},finish(l){f(),c.length?(c.forEach(p=>{delete p.writeCallback}),c[c.length-1].finishCallback=()=>l(d())):l(d())},finishSync(){f();const l=c.map(p=>p.data).join("");return c.length=0,{...d(),pendingData:l}},estimateEncodedBytesCount(l){return l.length/8},stop(){u()}}}function xr({configuredUrl:t,error:e,source:n,scriptType:r}){if(E.error(`${n} failed to start: an error occurred while initializing the ${r}:`,e),e instanceof Event||e instanceof Error&&Vm(e.message)){let s;t?s=`Please make sure the ${r} URL ${t} is correct and CSP is correctly configured.`:s="Please make sure CSP is correctly configured.",E.error(`${s} See documentation at ${gn}/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay`)}else r==="worker"&&Er(e)}function Vm(t){return t.includes("Content Security Policy")||t.includes("requires 'TrustedScriptURL'")}const Fm=30*G;function xo(t){return new Worker(t.workerUrl||URL.createObjectURL(new Blob(['(()=>{function t(t){const e=t.reduce((t,e)=>t+e.length,0),a=new Uint8Array(e);let n=0;for(const e of t)a.set(e,n),n+=e.length;return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),i=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=Array(576);e(s);var h=Array(60);e(h);var l=Array(512);e(l);var _=Array(256);e(_);var o=Array(29);e(o);var d,u,f,c=Array(30);function p(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(c);var v=function(t){return t<256?l[t]:l[256+(t>>>7)]},w=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},m=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},b=function(t,e,a){m(t,a[2*e],a[2*e+1])},y=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},z=function(t,e,a){var n,r,i=Array(16),s=0;for(n=1;n<=15;n++)i[n]=s=s+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=y(i[h]++,h))}},k=function(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},x=function(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},A=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},U=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&A(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!A(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},B=function(t,e,r){var i,s,h,l,d=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],s=t.pending_buf[t.l_buf+d],d++,0===i?b(t,s,e):(h=_[s],b(t,h+256+1,e),0!==(l=a[h])&&(s-=o[h],m(t,s,l)),i--,h=v(i),b(t,h,r),0!==(l=n[h])&&(i-=c[h],m(t,i,l)))}while(d<t.last_lit);b(t,256,e)},I=function(t,e){var a,n,r,i=e.dyn_tree,s=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,_=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==i[2*a]?(t.heap[++t.heap_len]=_=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)i[2*(r=t.heap[++t.heap_len]=_<2?++_:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=s[2*r+1]);for(e.max_code=_,a=t.heap_len>>1;a>=1;a--)U(t,i,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],U(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,i[2*r]=i[2*a]+i[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,i[2*a+1]=i[2*n+1]=r,t.heap[1]=r++,U(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,i,s,h,l=e.dyn_tree,_=e.max_code,o=e.stat_desc.static_tree,d=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,c=e.stat_desc.max_length,p=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(i=l[2*l[2*(n=t.heap[a])+1]+1]+1)>c&&(i=c,p++),l[2*n+1]=i,n>_||(t.bl_count[i]++,s=0,n>=f&&(s=u[n-f]),h=l[2*n],t.opt_len+=h*(i+s),d&&(t.static_len+=h*(o[2*n+1]+s)));if(0!==p){do{for(i=c-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[c]--,p-=2}while(p>0);for(i=c;0!==i;i--)for(n=t.bl_count[i];0!==n;)(r=t.heap[--a])>_||(l[2*r+1]!==i&&(t.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),n--)}}(t,e),z(i,_,t.bl_count)},E=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++h<l&&r===s||(h<_?t.bl_tree[2*r]+=h:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4))},C=function(t,e,a){var n,r,i=-1,s=e[1],h=0,l=7,_=4;for(0===s&&(l=138,_=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++h<l&&r===s)){if(h<_)do{b(t,r,t.bl_tree)}while(0!==--h);else 0!==r?(r!==i&&(b(t,r,t.bl_tree),h--),b(t,16,t.bl_tree),m(t,h-3,2)):h<=10?(b(t,17,t.bl_tree),m(t,h-3,3)):(b(t,18,t.bl_tree),m(t,h-11,7));h=0,i=r,0===s?(l=138,_=3):r===s?(l=6,_=3):(l=7,_=4)}},D=!1,M=function(t,e,a,n){m(t,0+(n?1:0),3),function(t,e,a){x(t),w(t,a),w(t,~a),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a)},j=M,L=function(t,e,a,n){for(var r=65535&t,i=t>>>16&65535,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16},S=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),T=function(t,e,a,n){var r=S,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},O={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q=j,F=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(_[a]+256+1)]++,t.dyn_dtree[2*v(e)]++),t.last_lit===t.lit_bufsize-1},G=-2,H=258,J=262,K=103,N=113,P=666,Q=function(t,e){return t.msg=O[e],e},R=function(t){return(t<<1)-(t>4?9:0)},V=function(t){for(var e=t.length;--e>=0;)t[e]=0},W=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},X=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},Y=function(t,e){(function(t,e,a,n){var r,l,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),I(t,t.l_desc),I(t,t.d_desc),_=function(t){var e;for(E(t,t.dyn_ltree,t.l_desc.max_code),E(t,t.dyn_dtree,t.d_desc.max_code),I(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*i[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(l=t.static_len+3+7>>>3)<=r&&(r=l)):r=l=a+5,a+4<=r&&-1!==e?M(t,e,a,n):4===t.strategy||l===r?(m(t,2+(n?1:0),3),B(t,s,h)):(m(t,4+(n?1:0),3),function(t,e,a,n){var r;for(m(t,e-257,5),m(t,a-1,5),m(t,n-4,4),r=0;r<n;r++)m(t,t.bl_tree[2*i[r]+1],3);C(t,t.dyn_ltree,e-1),C(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),B(t,t.dyn_ltree,t.dyn_dtree)),k(t),n&&x(t)})(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,X(t.strm)},Z=function(t,e){t.pending_buf[t.pending++]=e},$=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},tt=function(t,e,a,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),a),1===t.state.wrap?t.adler=L(t.adler,e,r,a):2===t.state.wrap&&(t.adler=T(t.adler,e,r,a)),t.next_in+=r,t.total_in+=r,r)},et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-J?t.strstart-(t.w_size-J):0,_=t.window,o=t.w_mask,d=t.prev,u=t.strstart+H,f=_[i+s-1],c=_[i+s];t.prev_length>=t.good_match&&(r>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(a=e)+s]===c&&_[a+s-1]===f&&_[a]===_[i]&&_[++a]===_[i+1]){i+=2,a++;do{}while(_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&_[++i]===_[++a]&&i<u);if(n=H-(u-i),i=u-H,n>s){if(t.match_start=e,s=n,n>=h)break;f=_[i+s-1],c=_[i+s]}}}while((e=d[e&o])>l&&0!==--r);return s<=t.lookahead?s:t.lookahead},at=function(t){var e,a,n,r,i,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-J)){t.window.set(t.window.subarray(s,s+s),0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=s?n-s:0}while(--a);e=a=s;do{n=t.prev[--e],t.prev[e]=n>=s?n-s:0}while(--a);r+=s}if(0===t.strm.avail_in)break;if(a=tt(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=W(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=W(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<J&&0!==t.strm.avail_in)},nt=function(t,e){for(var a,n;;){if(t.lookahead<J){if(at(t),t.lookahead<J&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-J&&(t.match_length=et(t,a)),t.match_length>=3)if(n=F(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=W(t,t.ins_h,t.window[t.strstart+1]);else n=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2},rt=function(t,e){for(var a,n,r;;){if(t.lookahead<J){if(at(t),t.lookahead<J&&0===e)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-J&&(t.match_length=et(t,a),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=F(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=W(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Y(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=F(t,0,t.window[t.strstart-1]))&&Y(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=F(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2};function it(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var st=[new it(0,0,0,0,function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Y(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-J&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Y(t,!1),t.strm.avail_out),1)}),new it(4,4,8,4,nt),new it(4,5,16,8,nt),new it(4,6,32,32,nt),new it(4,4,16,16,rt),new it(8,16,32,32,rt),new it(8,16,128,128,rt),new it(8,32,128,256,rt),new it(32,128,258,1024,rt),new it(32,258,258,4096,rt)];function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}for(var lt=function(t){var e,i=function(t){if(!t||!t.state)return Q(t,G);t.total_in=t.total_out=0,t.data_type=2;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:N,t.adler=2===e.wrap?0:1,e.last_flush=0,function(t){D||(function(){var t,e,i,g,v,w=Array(16);for(i=0,g=0;g<28;g++)for(o[g]=i,t=0;t<1<<a[g];t++)_[i++]=g;for(_[i-1]=g,v=0,g=0;g<16;g++)for(c[g]=v,t=0;t<1<<n[g];t++)l[v++]=g;for(v>>=7;g<30;g++)for(c[g]=v<<7,t=0;t<1<<n[g]-7;t++)l[256+v++]=g;for(e=0;e<=15;e++)w[e]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,w[8]++;for(;t<=255;)s[2*t+1]=9,t++,w[9]++;for(;t<=279;)s[2*t+1]=7,t++,w[7]++;for(;t<=287;)s[2*t+1]=8,t++,w[8]++;for(z(s,287,w),t=0;t<30;t++)h[2*t+1]=5,h[2*t]=y(t,5);d=new p(s,a,257,286,15),u=new p(h,n,0,30,15),f=new p([],r,0,19,7)}(),D=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,u),t.bl_desc=new g(t.bl_tree,f),t.bi_buf=0,t.bi_valid=0,k(t)}(e),0}(t);return 0===i&&((e=t.state).window_size=2*e.w_size,V(e.head),e.max_lazy_match=st[e.level].max_lazy,e.good_match=st[e.level].good_length,e.nice_match=st[e.level].nice_length,e.max_chain_length=st[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),i},_t=function(t,e){var a,n;if(!t||!t.state||e>5||e<0)return t?Q(t,G):G;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===P&&4!==e)return Q(t,0===t.avail_out?-5:G);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Z(r,31),Z(r,139),Z(r,8),r.gzhead?(Z(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Z(r,255&r.gzhead.time),Z(r,r.gzhead.time>>8&255),Z(r,r.gzhead.time>>16&255),Z(r,r.gzhead.time>>24&255),Z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Z(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Z(r,255&r.gzhead.extra.length),Z(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=T(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Z(r,0),Z(r,0),Z(r,0),Z(r,0),Z(r,0),Z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Z(r,3),r.status=N);else{var h=8+(r.w_bits-8<<4)<<8;h|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(h|=32),h+=31-h%31,r.status=N,$(r,h),0!==r.strstart&&($(r,t.adler>>>16),$(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending!==r.pending_buf_size));)Z(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Z(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),X(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Z(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=T(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=K)}else r.status=K;if(r.status===K&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&X(t),r.pending+2<=r.pending_buf_size&&(Z(r,255&t.adler),Z(r,t.adler>>8&255),t.adler=0,r.status=N)):r.status=N),0!==r.pending){if(X(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&R(e)<=R(i)&&4!==e)return Q(t,-5);if(r.status===P&&0!==t.avail_in)return Q(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&r.status!==P){var l=2===r.strategy?function(t,e){for(var a;;){if(0===t.lookahead&&(at(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,a=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=H){if(at(t),t.lookahead<=H&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+H;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=H-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=F(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=F(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Y(t,!1),0===t.strm.avail_out)?1:2}(r,e):st[r.level].func(r,e);if(3!==l&&4!==l||(r.status=P),1===l||3===l)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===l&&(1===e?function(t){m(t,2,3),b(t,256,s),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}(r):5!==e&&(q(r,0,0,!1),3===e&&(V(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),X(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(Z(r,255&t.adler),Z(r,t.adler>>8&255),Z(r,t.adler>>16&255),Z(r,t.adler>>24&255),Z(r,255&t.total_in),Z(r,t.total_in>>8&255),Z(r,t.total_in>>16&255),Z(r,t.total_in>>24&255)):($(r,t.adler>>>16),$(r,65535&t.adler)),X(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},ot=function(t){if(!t||!t.state)return G;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==K&&e!==N&&e!==P?Q(t,G):(t.state=null,e===N?Q(t,-3):0)},dt=new Uint8Array(256),ut=0;ut<256;ut++)dt[ut]=ut>=252?6:ut>=248?5:ut>=240?4:ut>=224?3:ut>=192?2:1;dt[254]=dt[254]=1;var ft=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ct=Object.prototype.toString;function pt(){this.options={level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ft,this.strm.avail_out=0;var e,a,n=function(t,e,a,n,r,i){if(!t)return G;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||8!==a||n<8||n>15||e<0||e>9||i<0||i>4)return Q(t,G);8===n&&(n=9);var h=new ht;return t.state=h,h.strm=t,h.wrap=s,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=r+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<r+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=i,h.method=a,lt(t)}(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw Error(O[n]);if(t.header&&(e=this.strm,a=t.header,e&&e.state&&(2!==e.state.wrap||(e.state.gzhead=a))),t.dictionary){var r;if(r="[object ArrayBuffer]"===ct.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=function(t,e){var a=e.length;if(!t||!t.state)return G;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return G;if(1===r&&(t.adler=L(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(V(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,h=t.next_in,l=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,at(n);n.lookahead>=3;){var _=n.strstart,o=n.lookahead-2;do{n.ins_h=W(n,n.ins_h,n.window[_+3-1]),n.prev[_&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=_,_++}while(--o);n.strstart=_,n.lookahead=2,at(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=h,t.input=l,t.avail_in=s,n.wrap=r,0}(this.strm,r)))throw Error(O[n]);this._dict_set=!0}}function gt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:e+"",streamId:a})}}function vt(t){const e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}pt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?4:0,"[object ArrayBuffer]"===ct.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(2===n||3===n)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(1===(a=_t(r,n)))return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=ot(this.strm),this.onEnd(a),this.ended=!0,0===a;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},pt.prototype.onData=function(t){this.chunks.push(t)},pt.prototype.onEnd=function(t){0===t&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,h=t.length;i<h;i++){var l=t[i];r.set(l,s),s+=l.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e=self){try{const a=new Map;e.addEventListener("message",n=>{try{const r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"6.21.2"};case"write":{let n=e.get(a.streamId);n||(n=new pt,e.set(a.streamId,n));const r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,n,r,i,s=t.length,h=0;for(r=0;r<s;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),h+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(h),i=0,r=0;i<h;r++)a=t.charCodeAt(r),55296==(64512&a)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(a=65536+(a-55296<<10)+(n-56320),r++)),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,2),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:vt(n),additionalBytesCount:i.length}}case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){gt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}})}catch(t){gt(e,t)}}()})();'])))}let F={status:0};function No(t,e,n,r=xo){switch(F.status===0&&zm(t,e,r),F.status){case 1:return F.initializationFailureCallbacks.push(n),F.worker;case 3:return F.worker}}function Ts(){return F.status}function zm(t,e,n=xo){try{const r=n(t),{stop:s}=L(t,r,"error",a=>{Jn(t,e,a)}),{stop:i}=L(t,r,"message",({data:a})=>{a.type==="errored"?Jn(t,e,a.error,a.streamId):a.type==="initialized"&&$m(a.version)});r.postMessage({action:"init"}),$(()=>Bm(e),Fm),F={status:1,worker:r,stop:()=>{s(),i()},initializationFailureCallbacks:[]}}catch(r){Jn(t,e,r)}}function Bm(t){F.status===1&&(E.error(`${t} failed to start: a timeout occurred while initializing the Worker`),F.initializationFailureCallbacks.forEach(e=>e()),F={status:2})}function $m(t){F.status===1&&(F={status:3,worker:F.worker,stop:F.stop,version:t})}function Jn(t,e,n,r){F.status===1||F.status===0?(xr({configuredUrl:t.workerUrl,error:n,source:e,scriptType:"worker"}),F.status===1&&F.initializationFailureCallbacks.forEach(s=>s()),F={status:2}):Er(n,{worker_version:F.status===3&&F.version,stream_id:r})}function Lo(){return typeof Array.from=="function"&&typeof CSSSupportsRule=="function"&&typeof URL.createObjectURL=="function"&&"forEach"in NodeList.prototype}function Gm(t,e,n,r){const s=e.findTrackedSession(),i=Hm(s,r),o=n.findView();return Cm(t,{viewContext:o,errorType:i,session:s})}function Hm(t,e){if(!Lo())return"browser-not-supported";if(!t)return"rum-not-tracked";if(t.sessionReplay===0)return"incorrect-session-plan";if(!e)return"replay-not-started"}function Km(t,e){if(!t.metricsEnabled)return{stop:R};let n,r,s;const{unsubscribe:i}=e.subscribe(o=>{switch(o.type){case"start":n={forced:o.forced,timestamp:x()},r=void 0,s=void 0;break;case"document-ready":n&&(r=D(n.timestamp,x()));break;case"recorder-settled":n&&(s=D(n.timestamp,x()));break;case"aborted":case"deflate-encoder-load-failed":case"recorder-load-failed":case"succeeded":i(),n&&We("Recorder init metrics",{metrics:Wm(n.forced,s,D(n.timestamp,x()),o.type,r)});break}});return{stop:i}}function Wm(t,e,n,r,s){return{forced:t,loadRecorderModuleDuration:e,recorderInitDuration:n,result:r,waitForDocReadyDuration:s}}function jm(t,e,n,r,s,i,o){let a=0,c;e.subscribe(9,()=>{(a===2||a===3)&&(l(),a=1)}),e.subscribe(10,()=>{a===1&&f()});const u=new O;Km(o,u);const d=async p=>{u.notify({type:"start",forced:p});const[m]=await Promise.all([ws(u,{type:"recorder-settled"},s()),ws(u,{type:"document-ready"},Du(t,"interactive"))]);if(a!==2){u.notify({type:"aborted"});return}if(!m){a=0,u.notify({type:"recorder-load-failed"});return}const h=i();if(!h){a=0,u.notify({type:"deflate-encoder-load-failed"});return}({stop:c}=m(e,t,n,r,h,o)),a=3,u.notify({type:"succeeded"})};function f(p){const m=n.findTrackedSession();if(qm(m,p)){a=1;return}if(Ym(a))return;a=2;const h=Xm(m,p)||!1;d(h).catch(dt),h&&n.setForcedReplay()}function l(){a===3&&(c==null||c()),a=0}return{start:f,stop:l,getSessionReplayLink(){return Gm(t,n,r,a!==0)},isRecording:()=>a===3}}function qm(t,e){return!t||t.sessionReplay===0&&(!e||!e.force)}function Ym(t){return t===2||t===3}function Xm(t,e){return e&&e.force&&t.sessionReplay===0}async function ws(t,e,n){try{return await n}finally{t.notify(e)}}function Jm(){let t=0;return{strategy:{start(){t=1},stop(){t=2},isRecording:()=>!1,getSessionReplayLink:R},shouldStartImmediately(e){return t===1||t===0&&!e.startSessionReplayRecordingManually}}}function Zm(t,e){if(jt()&&!bi("records")||!Lo())return{start:R,stop:R,getReplayStats:()=>{},onRumStart:R,isRecording:()=>!1,getSessionReplayLink:()=>{}};let{strategy:n,shouldStartImmediately:r}=Jm();return{start:i=>n.start(i),stop:()=>n.stop(),getSessionReplayLink:()=>n.getSessionReplayLink(),onRumStart:s,isRecording:()=>Ts()===3&&n.isRecording(),getReplayStats:i=>Ts()===3?Pm(i):void 0};function s(i,o,a,c,u,d){let f;function l(){return f||(u??(u=No(o,"Datadog Session Replay",()=>{n.stop()},e)),u&&(f=ko(o,u,1))),f}n=jm(o,i,a,c,t,l,d),r(o)&&n.start()}}async function Qm(t=th){try{return await t()}catch(e){xr({error:e,source:"Recorder",scriptType:"module"})}}async function th(){return(await Ns(()=>Promise.resolve().then(()=>g_),void 0)).startRecording}function eh(){return at().Profiler!==void 0}const nh=t=>{let e={status:"starting"};return t.register(0,({eventType:n})=>n!==v.VIEW&&n!==v.LONG_TASK?ot:{type:n,_dd:{profiling:e}}),{get:()=>e,set:n=>{e=n}}};async function rh(t=sh){try{return await t()}catch(e){xr({error:e,source:"Profiler",scriptType:"module"})}}async function sh(){return(await Ns(()=>Promise.resolve().then(()=>N_),void 0)).createRumProfiler}function ih(){let t;function e(n,r,s,i,o){const a=i.findTrackedSession();if(!a||!Bi(a.id,s.profilingSampleRate))return;const c=nh(r);if(!eh()){c.set({status:"error",error_reason:"not-supported-by-browser"});return}rh().then(u=>{if(!u){Dt("[DD_RUM] Failed to lazy load the RUM Profiler"),c.set({status:"error",error_reason:"failed-to-lazy-load"});return}t=u(s,n,i,c),t.start(o.findView())}).catch(dt)}return{onRumStart:e,stop:()=>{t==null||t.stop().catch(dt)}}}const oh=Zm(Qm),ah=ih(),ch=Jl(Am,oh,ah,{startDeflateWorker:No,createDeflateEncoder:ko,sdkName:"rum"});mu(at(),"DD_RUM",ch);const Nr=new WeakMap;function bt(t){return Nr.has(t)}function uh(t){let e=t;for(;e;){if(!bt(e)&&!Rr(e))return!1;e=An(e)}return!0}function et(t){return Nr.get(t)}function lh(t,e){Nr.set(t,e)}function Lr(t,e){const n=t.tagName,r=t.value;if(qe(t,e)){const s=t.type;return n==="INPUT"&&(s==="button"||s==="submit"||s==="reset")?r:!r||n==="OPTION"?void 0:Ct}if(n==="OPTION"||n==="SELECT")return t.value;if(!(n!=="INPUT"&&n!=="TEXTAREA"))return r}const dh=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,fh=/^[A-Za-z]+:|^\/\//,ph=/^["']?data:.*,/i;function mh(t,e){return t.replace(dh,(n,r,s,i,o,a)=>{const c=s||o||a;if(!e||!c||fh.test(c)||ph.test(c))return n;const u=r||i||"";return`url(${u}${hh(c,e)}${u})`})}function hh(t,e){try{return $e(t,e).href}catch{return t}}const _h=/[^a-z1-6-_]/;function Mo(t){const e=t.toLowerCase().trim();return _h.test(e)?"div":e}function Is(t,e){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${e}' style='background-color:silver'%3E%3C/svg%3E`}const gt={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},qt={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},ut={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},lt={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},As={Play:0,Pause:1};function Do(t){if(!(t===void 0||t.length===0))return t.map(e=>{const n=e.cssRules||e.rules;return{cssRules:Array.from(n,i=>i.cssText),disabled:e.disabled||void 0,media:e.media.length>0?Array.from(e.media):void 0}})}const gh=1e6;function Po(t,e,n,r){if(e===y.HIDDEN)return null;const s=t.getAttribute(n);if(e===y.MASK&&n!==Or&&!ro.includes(n)&&n!==r.actionNameAttribute){const i=t.tagName;switch(n){case"title":case"alt":case"placeholder":return Ct}if(i==="IMG"&&(n==="src"||n==="srcset")){const o=t;if(o.naturalWidth>0)return Is(o.naturalWidth,o.naturalHeight);const{width:a,height:c}=t.getBoundingClientRect();return a>0||c>0?Is(a,c):ns}if(i==="SOURCE"&&(n==="src"||n==="srcset"))return ns;if(i==="A"&&n==="href"||s&&n.startsWith("data-")||i==="IFRAME"&&n==="srcdoc")return Ct}return!s||typeof s!="string"?s:Ji(s,gh)}function Mr(){return{cssText:{count:0,max:0,sum:0},serializationDuration:{count:0,max:0,sum:0}}}function mn(t,e,n){t[e].count+=1,t[e].max=Math.max(t[e].max,n),t[e].sum+=n}function bh(t,e){for(const n of["cssText","serializationDuration"])t[n].count+=e[n].count,t[n].max=Math.max(t[n].max,e[n].max),t[n].sum+=e[n].sum}function yh(t,e,n){if(e===y.HIDDEN)return{};const r={},s=Mo(t.tagName),i=t.ownerDocument;for(let d=0;d<t.attributes.length;d+=1){const l=t.attributes.item(d).name,p=Po(t,e,l,n.configuration);p!==null&&(r[l]=p)}if(t.value&&(s==="textarea"||s==="select"||s==="option"||s==="input")){const d=Lr(t,e);d!==void 0&&(r.value=d)}if(s==="option"&&e===y.ALLOW){const d=t;d.selected&&(r.selected=d.selected)}if(s==="link"){const d=Array.from(i.styleSheets).find(l=>l.href===t.href),f=ar(d);f&&d&&(mn(n.serializationContext.serializationStats,"cssText",f.length),r._cssText=f)}if(s==="style"&&t.sheet){const d=ar(t.sheet);d&&(mn(n.serializationContext.serializationStats,"cssText",d.length),r._cssText=d)}const o=t;if(s==="input"&&(o.type==="radio"||o.type==="checkbox")&&(e===y.ALLOW?r.checked=!!o.checked:qe(o,e)&&delete r.checked),s==="audio"||s==="video"){const d=t;r.rr_mediaState=d.paused?"paused":"played"}let a,c;const u=n.serializationContext;switch(u.status){case 0:a=Math.round(t.scrollTop),c=Math.round(t.scrollLeft),(a||c)&&u.elementsScrollPositions.set(t,{scrollTop:a,scrollLeft:c});break;case 1:u.elementsScrollPositions.has(t)&&({scrollTop:a,scrollLeft:c}=u.elementsScrollPositions.get(t));break}return c&&(r.rr_scrollLeft=c),a&&(r.rr_scrollTop=a),r}function ar(t){if(!t)return null;let e;try{e=t.rules||t.cssRules}catch{}if(!e)return null;const n=Array.from(e,ua()?Sh:Uo).join("");return mh(n,t.href)}function Sh(t){if(Eh(t)&&t.selectorText.includes(":")){const e=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return t.cssText.replace(e,"$1\\$2")}return Uo(t)}function Uo(t){return vh(t)&&ar(t.styleSheet)||t.cssText}function vh(t){return"styleSheet"in t}function Eh(t){return"selectorText"in t}function Dr(t,e){const n=Ih(t,e);if(!n)return null;const r=et(t)||wh(),s=n;return s.id=r,lh(t,r),e.serializedNodeIds&&e.serializedNodeIds.add(r),s}let Th=1;function wh(){return Th++}function Pr(t,e){const n=[];return eo(t,r=>{const s=Dr(r,e);s&&n.push(s)}),n}function Ih(t,e){switch(t.nodeType){case t.DOCUMENT_NODE:return Ah(t,e);case t.DOCUMENT_FRAGMENT_NODE:return Rh(t,e);case t.DOCUMENT_TYPE_NODE:return Ch(t);case t.ELEMENT_NODE:return Oh(t,e);case t.TEXT_NODE:return xh(t,e);case t.CDATA_SECTION_NODE:return Nh()}}function Ah(t,e){return{type:qt.Document,childNodes:Pr(t,e),adoptedStyleSheets:Do(t.adoptedStyleSheets)}}function Rh(t,e){const n=Rr(t);return n&&e.serializationContext.shadowRootsController.addShadowRoot(t),{type:qt.DocumentFragment,childNodes:Pr(t,e),isShadowRoot:n,adoptedStyleSheets:n?Do(t.adoptedStyleSheets):void 0}}function Ch(t){return{type:qt.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId}}function Oh(t,e){const n=Mo(t.tagName),r=kh(t)||void 0,s=oo(ao(t),e.parentNodePrivacyLevel);if(s===y.HIDDEN){const{width:a,height:c}=t.getBoundingClientRect();return{type:qt.Element,tagName:n,attributes:{rr_width:`${a}px`,rr_height:`${c}px`,[Or]:Fd},childNodes:[],isSVG:r}}if(s===y.IGNORE)return;const i=yh(t,s,e);let o=[];if(Id(t)&&n!=="style"){let a;e.parentNodePrivacyLevel===s&&e.ignoreWhiteSpace===(n==="head")?a=e:a={...e,parentNodePrivacyLevel:s,ignoreWhiteSpace:n==="head"},o=Pr(t,a)}return{type:qt.Element,tagName:n,attributes:i,childNodes:o,isSVG:r}}function kh(t){return t.tagName==="svg"||t instanceof SVGElement}function xh(t,e){const n=uo(t,e.ignoreWhiteSpace||!1,e.parentNodePrivacyLevel);if(n!==void 0)return{type:qt.Text,textContent:n}}function Nh(){return{type:qt.CDATA,textContent:""}}function Lh(t,e,n){const r=x(),s=Dr(t,{serializationContext:n,parentNodePrivacyLevel:e.defaultPrivacyLevel,configuration:e});return mn(n.serializationStats,"serializationDuration",D(r,x())),s}function Vo(t){return!!t.changedTouches}function Ye(t){return t.composed===!0&&In(t.target)?t.composedPath()[0]:t.target}const Rs=25;function Mh(t){return Math.abs(t.pageTop-t.offsetTop-window.scrollY)>Rs||Math.abs(t.pageLeft-t.offsetLeft-window.scrollX)>Rs}const Dh=(t,e)=>{const n=window.visualViewport,r={layoutViewportX:t,layoutViewportY:e,visualViewportX:t,visualViewportY:e};if(n)Mh(n)?(r.layoutViewportX=Math.round(t+n.offsetLeft),r.layoutViewportY=Math.round(e+n.offsetTop)):(r.visualViewportX=Math.round(t-n.offsetLeft),r.visualViewportY=Math.round(e-n.offsetTop));else return r;return r},Fo=t=>({scale:t.scale,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,pageLeft:t.pageLeft,pageTop:t.pageTop,height:t.height,width:t.width});function ft(t,e){return{data:{source:t,...e},type:gt.IncrementalSnapshot,timestamp:x()}}const Ph=50;function Uh(t,e){const{throttled:n,cancel:r}=Mt(i=>{const o=Ye(i);if(bt(o)){const a=zo(i);if(!a)return;const c={id:et(o),timeOffset:0,x:a.x,y:a.y};e(ft(Vo(i)?ut.TouchMove:ut.MouseMove,{positions:[c]}))}},Ph,{trailing:!1}),{stop:s}=rt(t,document,["mousemove","touchmove"],n,{capture:!0,passive:!0});return{stop:()=>{s(),r()}}}function zo(t){let{clientX:e,clientY:n}=Vo(t)?t.changedTouches[0]:t;if(window.visualViewport){const{visualViewportX:r,visualViewportY:s}=Dh(e,n);e=r,n=s}if(!(!Number.isFinite(e)||!Number.isFinite(n)))return{x:e,y:n}}const Cs={pointerup:lt.MouseUp,mousedown:lt.MouseDown,click:lt.Click,contextmenu:lt.ContextMenu,dblclick:lt.DblClick,focus:lt.Focus,blur:lt.Blur,touchstart:lt.TouchStart,touchend:lt.TouchEnd};function Vh(t,e,n){const r=s=>{const i=Ye(s);if(pt(i,t.defaultPrivacyLevel)===y.HIDDEN||!bt(i))return;const o=et(i),a=Cs[s.type];let c;if(a!==lt.Blur&&a!==lt.Focus){const d=zo(s);if(!d)return;c={id:o,type:a,x:d.x,y:d.y}}else c={id:o,type:a};const u={id:n.getIdForEvent(s),...ft(ut.MouseInteraction,c)};e(u)};return rt(t,document,Object.keys(Cs),r,{capture:!0,passive:!0})}const Fh=100;function Bo(t,e,n,r=document){const{throttled:s,cancel:i}=Mt(a=>{const c=Ye(a);if(!c||pt(c,t.defaultPrivacyLevel)===y.HIDDEN||!bt(c))return;const u=et(c),d=c===document?{scrollTop:kr(),scrollLeft:Io()}:{scrollTop:Math.round(c.scrollTop),scrollLeft:Math.round(c.scrollLeft)};n.set(c,d),e(ft(ut.Scroll,{id:u,x:d.scrollLeft,y:d.scrollTop}))},Fh),{stop:o}=L(t,r,"scroll",s,{capture:!0,passive:!0});return{stop:()=>{o(),i()}}}const zh=200;function Bh(t,e){const n=Ao(t).subscribe(r=>{e(ft(ut.ViewportResize,r))});return{stop:()=>{n.unsubscribe()}}}function $h(t,e){const n=window.visualViewport;if(!n)return{stop:R};const{throttled:r,cancel:s}=Mt(()=>{e({data:Fo(n),type:gt.VisualViewport,timestamp:x()})},zh,{trailing:!1}),{stop:i}=rt(t,n,["resize","scroll"],r,{capture:!0,passive:!0});return{stop:()=>{i(),s()}}}function Gh(t,e){return rt(t,document,["play","pause"],n=>{const r=Ye(n);!r||pt(r,t.defaultPrivacyLevel)===y.HIDDEN||!bt(r)||e(ft(ut.MediaInteraction,{id:et(r),type:n.type==="play"?As.Play:As.Pause}))},{capture:!0,passive:!0})}function Hh(t){function e(s,i){s&&bt(s.ownerNode)&&i(et(s.ownerNode))}const n=[nt(CSSStyleSheet.prototype,"insertRule",({target:s,parameters:[i,o]})=>{e(s,a=>t(ft(ut.StyleSheetRule,{id:a,adds:[{rule:i,index:o}]})))}),nt(CSSStyleSheet.prototype,"deleteRule",({target:s,parameters:[i]})=>{e(s,o=>t(ft(ut.StyleSheetRule,{id:o,removes:[{index:i}]})))})];typeof CSSGroupingRule<"u"?r(CSSGroupingRule):(r(CSSMediaRule),r(CSSSupportsRule));function r(s){n.push(nt(s.prototype,"insertRule",({target:i,parameters:[o,a]})=>{e(i.parentStyleSheet,c=>{const u=Os(i);u&&(u.push(a||0),t(ft(ut.StyleSheetRule,{id:c,adds:[{rule:o,index:u}]})))})}),nt(s.prototype,"deleteRule",({target:i,parameters:[o]})=>{e(i.parentStyleSheet,a=>{const c=Os(i);c&&(c.push(o),t(ft(ut.StyleSheetRule,{id:a,removes:[{index:c}]})))})}))}return{stop:()=>{n.forEach(s=>s.stop())}}}function Os(t){const e=[];let n=t;for(;n.parentRule;){const o=Array.from(n.parentRule.cssRules).indexOf(n);e.unshift(o),n=n.parentRule}if(!n.parentStyleSheet)return;const s=Array.from(n.parentStyleSheet.cssRules).indexOf(n);return e.unshift(s),e}function Kh(t,e){return rt(t,window,["focus","blur"],()=>{e({data:{has_focus:document.hasFocus()},type:gt.Focus,timestamp:x()})})}function Wh(t,e,n){const r=t.subscribe(12,s=>{var i,o;s.rawRumEvent.type===v.ACTION&&s.rawRumEvent.action.type===wn.CLICK&&(!((o=(i=s.rawRumEvent.action.frustration)===null||i===void 0?void 0:i.type)===null||o===void 0)&&o.length)&&"events"in s.domainContext&&s.domainContext.events&&s.domainContext.events.length&&e({timestamp:s.rawRumEvent.date,type:gt.FrustrationRecord,data:{frustrationTypes:s.rawRumEvent.action.frustration.type,recordIds:s.domainContext.events.map(a=>n.getIdForEvent(a))}})});return{stop:()=>{r.unsubscribe()}}}function jh(t,e){const n=t.subscribe(5,()=>{e({timestamp:x(),type:gt.ViewEnd})});return{stop:()=>{n.unsubscribe()}}}function $o(t,e,n=document){const r=t.defaultPrivacyLevel,s=new WeakMap,i=n!==document,{stop:o}=rt(t,n,i?["change"]:["input","change"],d=>{const f=Ye(d);(f instanceof HTMLInputElement||f instanceof HTMLTextAreaElement||f instanceof HTMLSelectElement)&&c(f)},{capture:!0,passive:!0});let a;if(i)a=R;else{const d=[we(HTMLInputElement.prototype,"value",c),we(HTMLInputElement.prototype,"checked",c),we(HTMLSelectElement.prototype,"value",c),we(HTMLTextAreaElement.prototype,"value",c),we(HTMLSelectElement.prototype,"selectedIndex",c)];a=()=>{d.forEach(f=>f.stop())}}return{stop:()=>{a(),o()}};function c(d){const f=pt(d,r);if(f===y.HIDDEN)return;const l=d.type;let p;if(l==="radio"||l==="checkbox"){if(qe(d,f))return;p={isChecked:d.checked}}else{const h=Lr(d,f);if(h===void 0)return;p={text:h}}u(d,p);const m=d.name;l==="radio"&&m&&d.checked&&document.querySelectorAll(`input[type="radio"][name="${CSS.escape(m)}"]`).forEach(h=>{h!==d&&u(h,{isChecked:!1})})}function u(d,f){if(!bt(d))return;const l=s.get(d);(!l||l.text!==f.text||l.isChecked!==f.isChecked)&&(s.set(d,f),e(ft(ut.Input,{id:et(d),...f})))}}const qh=100,Yh=16;function Xh(t){let e=R,n=[];function r(){e(),t(n),n=[]}const{throttled:s,cancel:i}=Mt(r,Yh,{leading:!1});return{addMutations:o=>{n.length===0&&(e=Li(s,{timeout:qh})),n.push(...o)},flush:r,stop:()=>{e(),i()}}}function Go(t,e,n,r){const s=Wi();if(!s)return{stop:R,flush:R};const i=Xh(a=>{Jh(a.concat(o.takeRecords()),t,e,n)}),o=new s(S(i.addMutations));return o.observe(r,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:()=>{o.disconnect(),i.stop()},flush:()=>{i.flush()}}}function Jh(t,e,n,r){const s=new Map;t.filter(l=>l.type==="childList").forEach(l=>{l.removedNodes.forEach(p=>{Ho(p,r.removeShadowRoot)})});const i=t.filter(l=>l.target.isConnected&&uh(l.target)&&pt(l.target,n.defaultPrivacyLevel,s)!==y.HIDDEN),o=Mr(),{adds:a,removes:c,hasBeenSerialized:u}=Zh(i.filter(l=>l.type==="childList"),n,o,r,s),d=Qh(i.filter(l=>l.type==="characterData"&&!u(l.target)),n,s),f=t_(i.filter(l=>l.type==="attributes"&&!u(l.target)),n,s);!d.length&&!f.length&&!c.length&&!a.length||e(ft(ut.Mutation,{adds:a,removes:c,texts:d,attributes:f}),o)}function Zh(t,e,n,r,s){const i=new Set,o=new Map;for(const m of t)m.addedNodes.forEach(h=>{i.add(h)}),m.removedNodes.forEach(h=>{i.has(h)||o.set(h,m.target),i.delete(h)});const a=Array.from(i);e_(a);const c=new Set,u={status:2,serializationStats:n,shadowRootsController:r},d=[];for(const m of a){if(l(m))continue;const h=pt(m.parentNode,e.defaultPrivacyLevel,s);if(h===y.HIDDEN||h===y.IGNORE)continue;const g=x(),I=Dr(m,{serializedNodeIds:c,parentNodePrivacyLevel:h,serializationContext:u,configuration:e});if(mn(n,"serializationDuration",D(g,x())),!I)continue;const P=An(m);d.push({nextId:p(m),parentId:et(P),node:I})}const f=[];return o.forEach((m,h)=>{bt(h)&&f.push({parentId:et(m),id:et(h)})}),{adds:d,removes:f,hasBeenSerialized:l};function l(m){return bt(m)&&c.has(et(m))}function p(m){let h=m.nextSibling;for(;h;){if(bt(h))return et(h);h=h.nextSibling}return null}}function Qh(t,e,n){var r;const s=[],i=new Set,o=t.filter(a=>i.has(a.target)?!1:(i.add(a.target),!0));for(const a of o){if(a.target.textContent===a.oldValue)continue;const u=pt(An(a.target),e.defaultPrivacyLevel,n);u===y.HIDDEN||u===y.IGNORE||s.push({id:et(a.target),value:(r=uo(a.target,!1,u))!==null&&r!==void 0?r:null})}return s}function t_(t,e,n){const r=[],s=new Map,i=t.filter(a=>{const c=s.get(a.target);return c&&c.has(a.attributeName)?!1:(c?c.add(a.attributeName):s.set(a.target,new Set([a.attributeName])),!0)}),o=new Map;for(const a of i){if(a.target.getAttribute(a.attributeName)===a.oldValue)continue;const u=pt(a.target,e.defaultPrivacyLevel,n),d=Po(a.target,u,a.attributeName,e);let f;if(a.attributeName==="value"){const p=Lr(a.target,u);if(p===void 0)continue;f=p}else typeof d=="string"?f=d:f=null;let l=o.get(a.target);l||(l={id:et(a.target),attributes:{}},r.push(l),o.set(a.target,l)),l.attributes[a.attributeName]=f}return r}function e_(t){t.sort((e,n)=>{const r=e.compareDocumentPosition(n);return r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_CONTAINS||r&Node.DOCUMENT_POSITION_FOLLOWING?1:r&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function Ho(t,e){In(t)&&e(t.shadowRoot),eo(t,n=>Ho(n,e))}function n_(){const t=new WeakMap;return{set(e,n){e===document&&!document.scrollingElement||t.set(e===document?document.scrollingElement:e,n)},get(e){return t.get(e)},has(e){return t.has(e)}}}const r_=(t,e,n)=>{const r=new Map,s={addShadowRoot:i=>{if(r.has(i))return;const o=Go(e,t,s,i),a=$o(t,e,i),c=Bo(t,e,n,i);r.set(i,{flush:()=>o.flush(),stop:()=>{o.stop(),a.stop(),c.stop()}})},removeShadowRoot:i=>{const o=r.get(i);o&&(o.stop(),r.delete(i))},stop:()=>{r.forEach(({stop:i})=>i())},flush:()=>{r.forEach(({flush:i})=>i())}};return s};function s_(t,e,n,r,s,i){const o=(c,u)=>{const{width:d,height:f}=On();i({data:{height:f,href:window.location.href,width:d},type:gt.Meta,timestamp:c}),i({data:{has_focus:document.hasFocus()},type:gt.Focus,timestamp:c});const l=Mr();i({data:{node:Lh(document,r,{status:u,elementsScrollPositions:t,serializationStats:l,shadowRootsController:e}),initialOffset:{left:Io(),top:kr()}},type:gt.FullSnapshot,timestamp:c},l),window.visualViewport&&i({data:Fo(window.visualViewport),type:gt.VisualViewport,timestamp:c})};o(x(),0);const{unsubscribe:a}=n.subscribe(2,c=>{s(),o(c.startClocks.timeStamp,1)});return{stop:a}}function i_(){const t=new WeakMap;let e=1;return{getIdForEvent(n){return t.has(n)||t.set(n,e++),t.get(n)}}}function o_(t){const{emit:e,configuration:n,lifeCycle:r}=t;if(!e)throw new Error("emit function is required");const s=(l,p)=>{e(l,p),yr("record",{record:l});const m=t.viewHistory.findView();Mm(m.id)},i=n_(),o=r_(n,s,i),{stop:a}=s_(i,o,r,n,c,s);function c(){o.flush(),d.flush()}const u=i_(),d=Go(s,n,o,document),f=[d,Uh(n,s),Vh(n,s,u),Bo(n,s,i,document),Bh(n,s),$o(n,s),Gh(n,s),Hh(s),Kh(n,s),$h(n,s),Wh(r,s,u),jh(r,l=>{c(),s(l)})];return{stop:()=>{o.stop(),f.forEach(l=>l.stop()),a()},flushMutations:c,shadowRootsController:o}}function a_(t,e,n,r){const s=new FormData;s.append("segment",new Blob([t],{type:"application/octet-stream"}),`${e.session.id}-${e.start}`);const i={raw_segment_size:r,compressed_segment_size:t.byteLength,...e},o=JSON.stringify(i);return s.append("event",new Blob([o],{type:"application/json"})),{data:s,bytesCount:t.byteLength,cssText:n.cssText,isFullSnapshot:e.index_in_view===0,rawSize:r,recordCount:e.records_count,serializationDuration:n.serializationDuration}}function c_({context:t,creationReason:e,encoder:n}){let r=0;const s=t.view.id,i=Nm(s),o={start:1/0,end:-1/0,creation_reason:e,records_count:0,has_full_snapshot:!1,index_in_view:i,source:"browser",...t},a=Mr();Lm(s);function c(d,f,l){o.start=Math.min(o.start,d.timestamp),o.end=Math.max(o.end,d.timestamp),o.records_count+=1,o.has_full_snapshot||(o.has_full_snapshot=d.type===gt.FullSnapshot),f&&bh(a,f);const p=n.isEmpty?'{"records":[':",";n.write(p+JSON.stringify(d),m=>{r+=m,l(r)})}function u(d){if(n.isEmpty)throw new Error("Empty segment flushed");n.write(`],${JSON.stringify(o).slice(1)}
`),n.finish(f=>{Dm(o.view.id,f.rawBytesCount),d(o,a,f)})}return{addRecord:c,flush:u}}const u_=5*G;let Ko=6e4;function l_(t,e,n,r,s,i){return d_(t,()=>f_(e.applicationId,n,r),s,i)}function d_(t,e,n,r){let s={status:0,nextSegmentCreationReason:"init"};const{unsubscribe:i}=t.subscribe(2,()=>{a("view_change")}),{unsubscribe:o}=t.subscribe(11,c=>{a(c.reason)});function a(c){s.status===1&&(s.segment.flush((u,d,f)=>{const l=a_(f.output,u,d,f.rawBytesCount);yi(c)?n.sendOnExit(l):n.send(l)}),tt(s.expirationTimeoutId)),c!=="stop"?s={status:0,nextSegmentCreationReason:c}:s={status:2}}return{addRecord:(c,u)=>{if(s.status!==2){if(s.status===0){const d=e();if(!d)return;s={status:1,segment:c_({encoder:r,context:d,creationReason:s.nextSegmentCreationReason}),expirationTimeoutId:$(()=>{a("segment_duration_limit")},u_)}}s.segment.addRecord(c,u,d=>{d>Ko&&a("segment_bytes_limit")})}},stop:()=>{a("stop"),i(),o()}}}function f_(t,e,n){const r=e.findTrackedSession(),s=n.findView();if(!(!r||!s))return{application:{id:t},session:{id:r.id},view:{id:s.id}}}function p_(t,e){if(!t.metricsEnabled)return{stop:R};const{unsubscribe:n}=e.subscribe(r=>{if(r.type==="failure"||r.type==="queue-full"||r.type==="success"&&r.payload.isFullSnapshot){const s=m_(r.type,r.bandwidth,r.payload);We("Segment network request metrics",{metrics:s})}});return{stop:n}}function m_(t,e,n){return{cssText:{count:n.cssText.count,max:n.cssText.max,sum:n.cssText.sum},isFullSnapshot:n.isFullSnapshot,ongoingRequests:{count:e.ongoingRequestCount,totalSize:e.ongoingByteCount},recordCount:n.recordCount,result:t,serializationDuration:{count:n.serializationDuration.count,max:n.serializationDuration.max,sum:n.serializationDuration.sum},size:{compressed:n.bytesCount,raw:n.rawSize}}}function h_(t){const e=be();return{addRecord:n=>{const r=t.findView();e.send("record",n,r.id)}}}function __(t,e,n,r,s,i,o){const a=[],c=l=>{t.notify(14,{error:l}),Dt("Error reported to customer",{"error.message":l.message})},u=o||vr([e.sessionReplayEndpointBuilder],Ko,c);let d;if(jt())({addRecord:d}=h_(r));else{const l=l_(t,e,n,r,u,s);d=l.addRecord,a.push(l.stop);const p=p_(i,u.observable);a.push(p.stop)}const{stop:f}=o_({emit:d,configuration:e,lifeCycle:t,viewHistory:r});return a.push(f),{stop:()=>{a.forEach(l=>l())}}}const g_=Object.freeze(Object.defineProperty({__proto__:null,startRecording:__},Symbol.toStringTag,{value:"Module"}));function b_(t){let e=0;for(const n of t)n.stackId!==void 0&&e++;return e}const hn=new Map;function y_(t,e){hn.set(e,t)}function S_(t){return hn.get(t)}function ks(t){for(const e of hn.keys())e<t&&hn.delete(e)}function v_({rawRumEvent:t,startTime:e}){if(t.type!==v.LONG_TASK)return;const n=t.long_task.id;y_(n,e)}function E_(t,e,n){const r={application:{id:e}};n&&(r.session={id:n});const{ids:s,names:i}=T_(t.views);s.length&&(r.view={id:s,name:i});const o=t.longTasks.map(a=>a.id).filter(a=>a!==void 0);return o.length&&(r.long_task={id:o}),r}function T_(t){const e={ids:[],names:[]};for(const n of t)e.ids.push(n.viewId),n.viewName&&e.names.push(n.viewName);return e.names=Array.from(new Set(e.names)),e}const w_=(t,e,n)=>{const{profilingEndpointBuilder:r,applicationId:s}=e,i=I_(t,e,n),o=R_(t,i),a=r.build("fetch",o);return Dt("Sending profile to public profiling intake",{profilingIntakeURL:a,applicationId:s,sessionId:n}),fetch(a,{body:o.data,method:"POST"})};function I_(t,e,n){const r=br(e),s=E_(t,e.applicationId,n),i=A_(r);return{...s,attachments:["wall-time.json"],start:new Date(t.startClocks.timeStamp).toISOString(),end:new Date(t.endClocks.timeStamp).toISOString(),family:"chrome",runtime:"chrome",format:"json",version:4,tags_profiler:i.join(","),_dd:{clock_drift:Ps()}}}function A_(t){return t.concat(["language:javascript","runtime:chrome","family:chrome","host:browser"])}function R_(t,e){const n=new Blob([JSON.stringify(t)],{type:"application/json"}),r=new FormData;return r.append("event",new Blob([JSON.stringify(e)],{type:"application/json"}),"event.json"),r.append("wall-time.json",n,"wall-time.json"),{data:r,bytesCount:0}}const C_={sendProfile:w_},O_=/\/(?![vV]\d{1,2}\/)([^/\d?]*\d+[^/?]*)/g;function k_(t){return t?t.replace(O_,"/?"):"/"}const xs=(t,e)=>t||k_(e),Wo={sampleIntervalMs:10,collectIntervalMs:6e4,minProfileDurationMs:5e3,minNumberOfSamples:50};function x_(t,e,n,r,s=Wo){const i=Pt(k.LONG_ANIMATION_FRAME);let o;const a=[];let c={state:"stopped"};function u(A){c.state!=="running"&&(o=A?{startClocks:A.startClocks,viewId:A.id,viewName:xs(A.name,document.location.pathname)}:void 0,a.push(L(t,window,"visibilitychange",b).stop,L(t,window,"beforeunload",T).stop),l())}async function d(){await m("stopped"),a.forEach(A=>A()),ks(U().relative),r.set({status:"stopped",error_reason:void 0})}function f(A){if(A.state==="running")return{cleanupTasks:A.cleanupTasks,observer:A.observer};const N=[];let V;if(t.trackLongTasks){V=new PerformanceObserver(P),V.observe({entryTypes:[_()]});const K=e.subscribe(12,mt=>{v_(mt)});N.push(()=>V==null?void 0:V.disconnect()),N.push(K.unsubscribe)}const j=e.subscribe(2,K=>{const mt={viewId:K.id,viewName:xs(K.name,document.location.pathname),startClocks:K.startClocks};h(mt),o=mt});return N.push(j.unsubscribe),{cleanupTasks:N,observer:V}}function l(){const A=at().Profiler;if(!A)throw r.set({status:"error",error_reason:"not-supported-by-browser"}),new Error("RUM Profiler is not supported in this browser.");p(c).catch(dt);const{cleanupTasks:N,observer:V}=f(c);let j;try{j=new A({sampleInterval:s.sampleIntervalMs,maxBufferSize:Math.round(s.collectIntervalMs*1.5/s.sampleIntervalMs)})}catch(K){K instanceof Error&&K.message.includes("disabled by Document Policy")?(E.warn("[DD_RUM] Profiler startup failed. Ensure your server includes the `Document-Policy: js-profiling` response header when serving HTML pages.",K),r.set({status:"error",error_reason:"missing-document-policy-header"})):r.set({status:"error",error_reason:"unexpected-exception"});return}r.set({status:"running",error_reason:void 0}),c={state:"running",startClocks:U(),profiler:j,timeoutId:$(l,s.collectIntervalMs),longTasks:[],views:[],cleanupTasks:N,observer:V},h(o),j.addEventListener("samplebufferfull",I)}async function p(A){var N,V;if(A.state!=="running")return;H((V=(N=A.observer)===null||N===void 0?void 0:N.takeRecords())!==null&&V!==void 0?V:[]),tt(A.timeoutId),A.profiler.removeEventListener("samplebufferfull",I);const{startClocks:j,longTasks:K,views:mt}=A,Ee=U();await A.profiler.stop().then(Qt=>{const Vt=U(),ht=K.length>0,_t=D(j.timeStamp,Vt.timeStamp)<s.minProfileDurationMs,Q=b_(Qt.samples)<s.minNumberOfSamples;!ht&&(_t||Q)||(g(Object.assign(Qt,{startClocks:j,endClocks:Vt,clocksOrigin:ur(),longTasks:K,views:mt,sampleInterval:s.sampleIntervalMs})),ks(Ee.relative))}).catch(dt)}async function m(A){c.state==="running"&&(c.cleanupTasks.forEach(N=>N()),await p(c),c={state:A})}function h(A){c.state!=="running"||!A||c.views.push(A)}function g(A){var N;const V=(N=n.findTrackedSession())===null||N===void 0?void 0:N.id;C_.sendProfile(A,t,V).catch(dt)}function I(){l()}function P(A){H(A.getEntries())}function H(A){if(c.state==="running")for(const N of A){if(N.duration<s.sampleIntervalMs)continue;const V=ze(N.startTime),j=S_(V.relative);c.longTasks.push({id:j,duration:N.duration,entryType:N.entryType,startClocks:V})}}function b(){document.visibilityState==="hidden"&&c.state==="running"?m("paused").catch(dt):document.visibilityState==="visible"&&c.state==="paused"&&l()}function T(){l()}function _(){return i?"long-animation-frame":"longtask"}function C(){return c.state==="stopped"}function Ut(){return c.state==="running"}function ve(){return c.state==="paused"}return{start:u,stop:d,isStopped:C,isRunning:Ut,isPaused:ve}}const N_=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_RUM_PROFILER_CONFIGURATION:Wo,createRumProfiler:x_},Symbol.toStringTag,{value:"Module"}));export{ch as d};
//# sourceMappingURL=datadog-D0riiRF-.js.map
